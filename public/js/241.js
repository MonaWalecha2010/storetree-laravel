"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[241],{8006:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(3645),r=i.n(n)()((function(e){return e[1]}));r.push([e.id,".bft-search[data-v-c51ca0b4]{display:none!important}",""]);const o=r},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=e(t);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(r[a]=!0)}for(var l=0;l<e.length;l++){var s=[].concat(e[l]);n&&r[s[0]]||(i&&(s[2]?s[2]="".concat(i," and ").concat(s[2]):s[2]=i),t.push(s))}},t}},3379:(e,t,i)=>{var n,r=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),a=[];function l(e){for(var t=-1,i=0;i<a.length;i++)if(a[i].identifier===e){t=i;break}return t}function s(e,t){for(var i={},n=[],r=0;r<e.length;r++){var o=e[r],s=t.base?o[0]+t.base:o[0],d=i[s]||0,c="".concat(s," ").concat(d);i[s]=d+1;var p=l(c),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==p?(a[p].references++,a[p].updater(h)):a.push({identifier:c,updater:m(h,t),references:1}),n.push(c)}return n}function d(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var r=i.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var c,p=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function h(e,t,i,n){var r=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=p(t,r);else{var o=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function f(e,t,i){var n=i.css,r=i.media,o=i.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var u=null,g=0;function m(e,t){var i,n,r;if(t.singleton){var o=g++;i=u||(u=d(t)),n=h.bind(null,i,o,!1),r=h.bind(null,i,o,!0)}else i=d(t),n=f.bind(null,i,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var i=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<i.length;n++){var r=l(i[n]);a[r].references--}for(var o=s(e,t),d=0;d<i.length;d++){var c=l(i[d]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}i=o}}}},9241:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var n,r=function(e,t){var i=this;if(("string"==typeof e||e instanceof String)&&(e=document.querySelector(e)),this.element=e,this.config=r.mergeDeep(r._defaultConfig(t),t),this._layoutConfigs={base:{orientation:this.config.orientation,levelSeparation:this.config.levelSeparation,mixedHierarchyNodesSeparation:this.config.mixedHierarchyNodesSeparation,assistantSeparation:this.config.assistantSeparation,subtreeSeparation:this.config.subtreeSeparation,siblingSeparation:this.config.siblingSeparation,layout:this.config.layout,columns:this.config.columns,collapse:this.config.collapse,partnerNodeSeparation:this.config.partnerNodeSeparation}},this.config.tags)for(var n in this.config.tags){var o=this.config.tags[n];null!=o.subTreeConfig&&(this._layoutConfigs[n]={orientation:null!=o.subTreeConfig.orientation?o.subTreeConfig.orientation:this.config.orientation,levelSeparation:null!=o.subTreeConfig.levelSeparation?o.subTreeConfig.levelSeparation:this.config.levelSeparation,mixedHierarchyNodesSeparation:null!=o.subTreeConfig.mixedHierarchyNodesSeparation?o.subTreeConfig.mixedHierarchyNodesSeparation:this.config.mixedHierarchyNodesSeparation,assistantSeparation:null!=o.subTreeConfig.assistantSeparation?o.subTreeConfig.assistantSeparation:this.config.assistantSeparation,subtreeSeparation:null!=o.subTreeConfig.subtreeSeparation?o.subTreeConfig.subtreeSeparation:this.config.subtreeSeparation,siblingSeparation:null!=o.subTreeConfig.siblingSeparation?o.subTreeConfig.siblingSeparation:this.config.siblingSeparation,layout:null!=o.subTreeConfig.layout?o.subTreeConfig.layout:this.config.layout,columns:null!=o.subTreeConfig.columns?o.subTreeConfig.columns:this.config.columns,collapse:null!=o.subTreeConfig.collapse?o.subTreeConfig.collapse:this.config.collapse,partnerNodeSeparation:null!=o.subTreeConfig.partnerNodeSeparation?o.subTreeConfig.partnerNodeSeparation:this.config.partnerNodeSeparation})}if(this._event_id=r._guid(),!this.config.searchFields.length&&this.config.nodeBinding)for(var a in this.config.nodeBinding)-1==a.indexOf("img")&&"function"!=typeof this.config.nodeBinding[a]&&this.config.searchFields.push(this.config.nodeBinding[a]);r._validateConfig(this.config)&&(this._vScroll={},this.config.ui||(this.ui=r.ui),this.config.editUI?this.editUI=this.config.editUI:this.editUI=new r.editUI,this.editUI.init(this),this.config.filterUI?this.filterUI=this.config.filterUI:this.filterUI=new r.filterUI,this.filterUI.init(this),this.manager=new r.manager(this),this.config.searchUI?this.searchUI=this.config.searchUI:this.searchUI=new r.searchUI,this.config.nodeMenuUI?this.nodeMenuUI=this.config.nodeMenuUI:this.nodeMenuUI=new r.menuUI,this.nodeMenuUI.init(this,this.config.nodeMenu),this.config.nodeCircleMenuUI?this.nodeCircleMenuUI=this.config.nodeCircleMenuUI:this.nodeCircleMenuUI=new r.circleMenuUI,this.nodeCircleMenuUI.init(this,this.config.nodeCircleMenu),this.config.nodeContextMenuUI?this.nodeContextMenuUI=this.config.nodeContextMenuUI:this.nodeContextMenuUI=new r.menuUI,this.nodeContextMenuUI.init(this,this.config.nodeContextMenu),this.config.toolbarUI?this.toolbarUI=this.config.toolbarUI:this.toolbarUI=new r.toolbarUI,this.config.notifierUI?this.notifierUI=this.config.notifierUI:this.notifierUI=new r.notifierUI,this.notifierUI.init(this),this.config.menuUI?this.menuUI=this.config.menuUI:this.menuUI=new r.menuUI,this.menuUI.init(this,this.config.menu),this.config.xScrollUI||(this.xScrollUI=new r.xScrollUI(this.element,this.config,(function(){return{boundary:i.response.boundary,scale:i.getScale(),viewBox:i.getViewBox(),padding:i.config.padding}}),(function(e){i.setViewBox(e)}),(function(){i._draw(!0,r.action.xScroll)}))),this.config.yScrollUI||(this.yScrollUI=new r.yScrollUI(this.element,this.config,(function(){return{boundary:i.response.boundary,scale:i.getScale(),viewBox:i.getViewBox(),padding:i.config.padding}}),(function(e){i.setViewBox(e)}),(function(){i._draw(!0,r.action.xScroll)}))),this.element.classList.add("bft-"+this.config.mode),this._gragStartedId=null,this._timeout=null,this._touch=null,this._initialized=!1,this._loaded=!1,this._moveInterval=null,this._movePosition=null,this.response=null,this.nodes=null,this.isVisible=null,r._intersectionObserver(this.element,(function(e){i.isVisible=e,!1!==r.events.publish("visibility-change",[i])&&r.LAZY_LOADING&&i.isVisible&&(i._loaded?i._draw(!1,r.action.update):(i._setInitialSizeIfNotSet(),i._draw(!1,r.action.init)))})))};r._defaultConfig=function(e){return{interactive:!0,mode:"light",lazyLoading:!0,enableDragDrop:!1,enableSearch:!0,enableTouch:!1,enableKeyNavigation:!1,miniMap:!1,nodeMenu:null,nodeCircleMenu:null,nodeContextMenu:null,menu:null,toolbar:!1,sticky:!0,nodeMouseClick:r.action.details,nodeMouseDbClick:r.none,mouseScrool:r.action.zoom,showXScroll:r.none,showYScroll:r.none,template:"ana",tags:{},min:!1,nodeBinding:{},linkBinding:{},searchFields:[],searchDisplayField:null,searchFieldsWeight:null,nodes:[],clinks:[],slinks:[],levelSeparation:60,siblingSeparation:20,subtreeSeparation:40,mixedHierarchyNodesSeparation:15,assistantSeparation:100,minPartnerSeparation:50,partnerChildrenSplitSeparation:20,partnerNodeSeparation:15,columns:10,padding:30,orientation:r.orientation.top,layout:r.normal,scaleInitial:1,scaleMin:.1,scaleMax:5,orderBy:null,editUI:null,filterUI:null,searchUI:null,xScrollUI:null,yScrollUI:null,nodeMenuUI:null,nodeCircleMenuUI:null,nodeContextMenuUI:null,toolbarUI:null,notifierUI:null,menuUI:null,exportUrl:"https://balkan.app/export",collapse:{},expand:{},align:r.CENTER,UI:null,anim:{func:r.anim.outPow,duration:200},zoom:{speed:120,smooth:12},roots:null,state:null,editForm:{readOnly:!1,titleBinding:"name",photoBinding:"img",addMore:"Add more fileds",addMoreBtn:"Add",addMoreFieldName:"Field name",saveAndCloseBtn:"Save and close",cancelBtn:"Cancel",generateElementsFromFields:!0,focusBinding:null,buttons:{edit:{icon:r.icon.edit(24,24,"#fff"),text:"Edit",hideIfEditMode:!0,hideIfDetailsMode:!1},share:{icon:r.icon.share(24,24,"#fff"),text:"Share"},pdf:{icon:r.icon.pdf(24,24,"#fff"),text:"Save as PDF"},remove:{icon:r.icon.remove(24,24,"#fff"),text:"Remove",hideIfDetailsMode:!0}},elements:[]}}},r.prototype.load=function(e){return this.config.nodes=e,this._draw(!1,r.action.init),this},r.prototype.loadXML=function(e){var t=r._xml2json(e);return this.load(t)},r.prototype.getXML=function(){return r._json2xml(this.config.nodes)},r.prototype.on=function(e,t){return r.events.on(e,t,this._event_id),this},r.prototype.draw=function(e,t,i){null==e&&(e=r.action.update),this._draw(!1,e,t,i)},r.prototype._draw=function(e,t,i,n){var o=this;if(!r.LAZY_LOADING||this.isVisible)if(r.LAZY_LOADING||this._initialized||(this._setInitialSizeIfNotSet(),0!=this.width()&&0!=this.height())){this._hideBeforeAnimationCompleted=!1;var a=t==r.action.init?null:this.getViewBox();this.manager.read(e,this.width(),this.height(),a,t,i,(function(e){if(!o.notifierUI.show(e.notif)){t!=r.action.exporting&&(o.nodes=e.nodes,o.visibleNodeIds=e.visibleNodeIds,o.roots=e.roots),o.editUI.fields=e.allFields;var a={defs:""};r.events.publish("renderdefs",[o,a]);var l=o.ui.defs(a.defs),s=o.getScale(e.viewBox);l+=o.ui.pointer(o.config,t,s);var d=o.getViewBox(),c=e.viewBox;a={content:l,res:e},r.events.publish("prerender",[o,a]),l=a.content;for(var p=0;p<e.visibleNodeIds.length;p++){var h=e.nodes[e.visibleNodeIds[p]],f=o._get(h.id);r.RENDER_LINKS_BEFORE_NODES&&(l+=o.ui.link(h,o,s,e.bordersByRootIdAndLevel,e.nodes,t)),l+=o.ui.node(h,f,e.animations,o.config,void 0,void 0,void 0,t,s,o)}for(p=0;p<e.visibleNodeIds.length;p++)h=e.nodes[e.visibleNodeIds[p]],r.RENDER_LINKS_BEFORE_NODES||(l+=o.ui.link(h,o,s,e.bordersByRootIdAndLevel,e.nodes,t)),l+=o.ui.expandCollapseBtn(o,h,o._layoutConfigs,t,s);if(a={content:l,res:e},r.events.publish("render",[o,a]),l=a.content,e=a.res,l+=o.ui.lonely(o.config),t!==r.action.exporting){if(t!==r.action.centerNode&&t!==r.action.insert&&t!==r.action.expand&&t!==r.action.collapse&&t!==r.action.update||(c=d),t===r.action.init&&null!=d&&(c=d),o.response=e,_=o.ui.svg(o.width(),o.height(),c,o.config,l),o._initialized){var u=o.getSvg(),g=u.parentNode;g.removeChild(u),g.insertAdjacentHTML("afterbegin",_),o._attachEventHandlers(),o.xScrollUI.addListener(o.getSvg()),o.yScrollUI.addListener(o.getSvg()),o.xScrollUI.setPosition(),o.yScrollUI.setPosition()}else o.element.innerHTML=o.ui.css()+_+o.ui.menuButton(o.config),o._attachInitEventHandlers(),o._attachEventHandlers(),o.xScrollUI.create(o.width(),o.config.padding),o.xScrollUI.setPosition(),o.xScrollUI.addListener(o.getSvg()),o.yScrollUI.create(o.height(),o.config.padding),o.yScrollUI.setPosition(),o.yScrollUI.addListener(o.getSvg()),o.config.enableSearch&&o.searchUI.init(o),o.toolbarUI.init(o,o.config.toolbar);var m=!1,b=o.response.animations;if(b[0].length>0){for(o._hideBeforeAnimation(b[0].length),p=0;p<b[0].length;p++)b[0][p]=o.getNodeElement(b[0][p]);r.animate(b[0],b[1],b[2],o.config.anim.duration,o.config.anim.func,(function(){m||(n&&n(),r.events.publish("redraw",[o]),o._showAfterAnimation(),m=!0)}))}t===r.action.centerNode?r.animate(o.getSvg(),{viewbox:d},{viewbox:o.response.viewBox},o.config.anim.duration,o.config.anim.func,(function(){o.ripple(i.options.rippleId),m||(n&&n(),r.events.publish("redraw",[o]),o._showAfterAnimation(),m=!0)}),(function(){o.xScrollUI.setPosition(),o.yScrollUI.setPosition()})):!d||!o.response||d[0]==o.response.viewBox[0]&&d[1]==o.response.viewBox[1]&&d[2]==o.response.viewBox[2]&&d[3]==o.response.viewBox[3]||t!==r.action.insert&&t!==r.action.expand&&t!==r.action.collapse&&t!==r.action.update&&t!==r.action.init?0==b[0].length&&(m||(n&&n(),r.events.publish("redraw",[o]),m=!0)):r.animate(o.getSvg(),{viewbox:d},{viewbox:o.response.viewBox},2*o.config.anim.duration,o.config.anim.func,(function(){o.xScrollUI.setPosition(),o.yScrollUI.setPosition(),m||(n&&n(),r.events.publish("redraw",[o]),m=!0)})),o._initialized||(o._initialized=!0,o.filterUI.update(),r.events.publish("init",[o])),!o._loaded&&e&&e.nodes&&Object.keys(e.nodes).length&&(o._loaded=!0)}else{var v=e.boundary,y=v.maxX-v.minX,x=v.maxY-v.minY,_=o.ui.svg(y,x,[v.minX,v.minY,y,x],o.config,l,s);n(_)}}}),(function(e){r.events.publish("ready",[o,e])}))}else console.error("Cannot load the family with size 0! If you are using the FamilyTree within tabs set FamilyTree.LAZY_LOADING to true! ")},r.prototype._setInitialSizeIfNotSet=function(){this.element.style.overflow="hidden",this.element.style.position="relative",0==this.element.offsetHeight&&(this.element.style.height="100%",0==this.element.offsetHeight&&(this.element.style.height="700px")),0==this.element.offsetWidth&&(this.element.style.width="100%",0==this.element.offsetWidth&&(this.element.style.width="700px"))},r.prototype.width=function(){return this.element.offsetWidth},r.prototype.height=function(){return this.element.offsetHeight},r.prototype.getViewBox=function(){var e=this.getSvg();return r._getViewBox(e)},r.prototype.setViewBox=function(e){this.getSvg().setAttribute("viewBox",e.toString())},r.prototype.getScale=function(e){return e||(e=this.getViewBox()),r.getScale(e,this.width(),this.height(),this.config.scaleInitial,this.config.scaleMax,this.config.scaleMin)},r.prototype.ripple=function(e,t,i){var n=this.getNode(e);if(null!=n){var o=this.getNodeElement(e);if(null!=o){var a=this.getScale(),l=n.w/2,s=n.h/2;if(void 0!==t&&void 0!==i){var d=o.getBoundingClientRect();l=t/a-d.left/a,s=i/a-d.top/a}var c=n.w,p=n.h,h=c-l>l?c-l:l,f=p-s>s?p-s:s,u=h>f?h:f,g=document.createElementNS("http://www.w3.org/2000/svg","g"),m=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),b=document.createElementNS("http://www.w3.org/2000/svg","rect"),v=document.createElementNS("http://www.w3.org/2000/svg","circle"),y=r.randomId();m.setAttribute("id",y);var x={ripple:r.t(n.templateName,n.min,this.getScale()).ripple,node:n};r.events.publish("ripple",[this,x]),b.setAttribute("x",x.ripple.rect?x.ripple.rect.x:0),b.setAttribute("y",x.ripple.rect?x.ripple.rect.y:0),b.setAttribute("width",x.ripple.rect?x.ripple.rect.width:n.w),b.setAttribute("height",x.ripple.rect?x.ripple.rect.height:n.h),b.setAttribute("rx",x.ripple.radius),b.setAttribute("ry",x.ripple.radius),v.setAttribute("clip-path","url(#"+y+")"),v.setAttribute("cx",l),v.setAttribute("cy",s),v.setAttribute("r",0),v.setAttribute("fill",x.ripple.color),v.setAttribute("class","bft-ripple"),m.appendChild(b),g.appendChild(m),g.appendChild(v),o.appendChild(g),r.animate(v,{r:0,opacity:1},{r:u,opacity:0},500,r.anim.outPow,(function(){o.removeChild(g)}))}}},r.prototype.center=function(e,t,i){var n,o,a=e,l=!0,s=!0;t&&null!=t.parentState&&(n=t.parentState),t&&null!=t.childrenState&&(o=t.childrenState),t&&null!=t.rippleId&&(a=t.rippleId),t&&null!=t.vertical&&(l=t.vertical),t&&null!=t.horizontal&&(s=t.horizontal);var d={parentState:n,childrenState:o,rippleId:a,vertical:l,horizontal:s};this._draw(!1,r.action.centerNode,{id:e,options:d},i)},r.prototype.fit=function(e){this.config.scaleInitial=r.match.boundary,this._draw(!0,r.action.init,{method:"fit"},e)},r.prototype.toggleFullScreen=function(){var e=document.querySelector("["+r.attr.tlbr+"r='fullScreen']");document.fullscreenElement==this.element||document.webkitFullscreenElement==this.element||document.mozFullScreenElement==this.element||document.msFullscreenElement==this.element?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),e&&(e.innerHTML=r.toolbarUI.openFullScreenIcon)):(this.element.requestFullscreen?this.element.requestFullscreen():this.element.mozRequestFullScreen?this.element.mozRequestFullScreen():this.element.webkitRequestFullscreen?this.element.webkitRequestFullscreen():this.element.msRequestFullscreen&&this.element.msRequestFullscreen(),e&&(e.innerHTML=r.toolbarUI.closeFullScreenIcon))},r.prototype.getNode=function(e){return this.nodes[e]},r.prototype.setLayout=function(e,t){t||(t="base"),this._layoutConfigs[t].layout=e,this._draw(!1,r.action.update)},r.prototype.setOrientation=function(e,t){t||(t="base"),this._layoutConfigs[t].orientation=e,this._draw(!1,r.action.update)},r.prototype.search=function(e,t,i){return r.isNEU(t)&&(t=this.config.searchFields),r.isNEU(i)&&(i=t),r._search.search(this.config.nodes,e,t,i,this.config.searchDisplayField,this.config.searchFieldsWeight)},r.prototype._hideBeforeAnimation=function(e){if(1!=this._hideBeforeAnimationCompleted&&!(e&&e<r.ANIM_THRESHOLD)){var t=this.element.getElementsByTagName("text");if(t.length>r.TEXT_THRESHOLD)for(var i=0;i<t.length;i++)t[i].style.display="none";var n=this.element.getElementsByTagName("image");if(n.length>r.IMAGES_THRESHOLD)for(i=0;i<n.length;i++)n[i].style.display="none";var o=this.element.querySelectorAll("["+r.attr.link_id+"]");if(o.length>r.LINKS_THRESHOLD)for(i=0;i<o.length;i++)o[i].style.display="none";var a=this.element.querySelectorAll("["+r.attr.control_expcoll_id+"]");if(a.length>r.BUTTONS_THRESHOLD)for(i=0;i<a.length;i++)a[i].style.display="none";var l=this.element.querySelectorAll("["+r.attr.control_up_id+"]");if(l.length>r.BUTTONS_THRESHOLD)for(i=0;i<l.length;i++)l[i].style.display="none";this._hideBeforeAnimationCompleted=!0}},r.prototype._showAfterAnimation=function(){for(var e=this.element.getElementsByTagName("text"),t=0;t<e.length;t++)e[t].style.display="";var i=this.element.getElementsByTagName("image");for(t=0;t<i.length;t++)i[t].style.display="";var n=this.element.querySelectorAll("["+r.attr.link_id+"]");for(t=0;t<n.length;t++)n[t].style.display="";var o=this.element.querySelectorAll("["+r.attr.control_expcoll_id+"]");for(t=0;t<o.length;t++)o[t].style.display="";var a=this.element.querySelectorAll("["+r.attr.control_up_id+"]");for(t=0;t<a.length;t++)a[t].style.display="";this._hideBeforeAnimationCompleted=!1},r.prototype.isChild=function(e,t){for(var i=this.getNode(t);i;){if(i.id==e)return!0;i=i.parent?i.parent:i.stParent}return!1},r.prototype.getCollapsedIds=function(e){for(var t=[],i=0;i<e.childrenIds.length;i++){var n=this.getNode(e.childrenIds[i]);1==n.collapsed&&t.push(n.id)}return t},r.prototype.stateToUrl=function(){if(this.manager.state){var e={};return e.exp=this.manager.state.exp.join("*"),e.min=this.manager.state.min.join("*"),e.adjustify=this.manager.state.adjustify.x+"*"+this.manager.state.adjustify.y,e.scale=this.manager.state.scale,e.y=this.manager.state.x,e.x=this.manager.state.y,new URLSearchParams(e).toString()}return""},r.prototype.generateId=function(){for(;;){var e="_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4);if(!this.nodes.hasOwnProperty(e))return e}},r.prototype._nodeHasHiddenParent=function(e){return!e.parent&&!r.isNEU(e.pid)&&this.getNode(e.pid)},r.prototype.destroy=function(){this._removeEvent(window,"resize"),r.events.removeForEventId(this._event_id),this.element.innerHTML=null},r.__defaultConfig=r._defaultConfig,r._defaultConfig=function(e){var t=r.__defaultConfig();return t.nodeTreeMenu=null,t.template="tommy",t.mode="light",t.minPartnerSeparation=30,t.partnerChildrenSplitSeparation=10,t.siblingSeparation=35,t.tags["children-group"]={template:"cgroup",subTreeConfig:{siblingSeparation:7,columns:1}},e&&e.template?(t.tags.male={template:e.template+"_male"},t.tags.female={template:e.template+"_female"}):(t.tags.male={template:t.template+"_male"},t.tags.female={template:t.template+"_female"}),t},r.prototype.getRecentRootsByNodeId=function(e){this.recentRoots||(this.recentRoots=[]);var t=this.recentRoots,i=this.getNode(e);return i?(i.rids.sort((function(e,i){var n=t.indexOf(e),r=t.indexOf(i);return-1==n?1e3:-1==r?-1e3:n-r})),i.rids):[]},r.prototype._nodeHasHiddenParent=function(e){return!((e.parent||r.isNEU(e.pid)||!this.getNode(e.pid))&&(!e.isPartner||r.isNEU(e.mid)||!this.getNode(e.mid))&&(!e.isPartner||r.isNEU(e.fid)||!this.getNode(e.fid))&&!(e.isPartner&&e.pids.length>1))},r.prototype._center=r.prototype.center,r.prototype.center=function(e,t,i){var n=this.getRecentRootsByNodeId(e);Array.isArray(this.config.roots)||(roots=[]),r._changeRootOption(this.config.roots,n,this.manager.rootList),this._center(e,t,i)},r.prototype.onUpdateNode=function(e){return this.on("update",(function(t,i){return e.call(t,i)}))},r.prototype.onNodeTreeMenuShow=function(e){return this.on("node-tree-menu-show",(function(t,i){return e.call(t,i)}))},r.prototype.onRemoveNode=null,r.prototype.onAddNode=null,r.localStorage={},r.localStorage.getItem=function(e){var t=localStorage.getItem("to_date");if(t){if((t=new Date(t))<new Date){for(var i=0,n=localStorage.length;i<n;++i){var r=localStorage.key(i);r&&r.startsWith&&r.startsWith('{"n"')&&localStorage.removeItem(r)}localStorage.removeItem("to_date")}}else(t=new Date).setDate(t.getDate()+5),t=t.toISOString(),localStorage.setItem("to_date",t);return localStorage.getItem(e)},r.localStorage.setItem=function(e,t){try{localStorage.setItem(e,t)}catch(e){e.code==e.QUOTA_EXCEEDED_ERR?(console.warn("Local storage quota exceeded"),localStorage.clear()):(console.error("Local storage error code:"+e.code),console.error(e))}},r.prototype.canUpdateLink=function(e,t){if(null==t||null==t)return!1;if(null==e||null==e)return!1;if(e==t)return!1;var i=this.getNode(t),n=this.getNode(e);return!(i&&n&&(i.isPartner||i.hasPartners&&n.isAssistant||i.hasAssistants&&n.isPartner)||this.isChild(e,t))},r.prototype._canUpdateLink=r.prototype.canUpdateLink,r.prototype.updateNode=function(e,t,i){var n=this,o=this.get(e.id);if(!0===i&&!1===r.events.publish("update",[this,o,e]))return!1;this.update(e);var a=this.getNode(e.id),l=a.pid;null==l&&(l=a.stpid),this._draw(!1,r.action.update,{id:l},(function(){n.ripple(e.id),t&&t(),r.events.publish("updated",[n,o,e]),n.filterUI.update()}))},r.prototype.update=function(e){for(var t=0;t<this.config.nodes.length;t++)if(this.config.nodes[t].id==e.id){this.config.nodes[t]=e;break}return this},r.prototype.removeNode=function(e,t,i){var n=this;if(!this.canRemove(e))return!1;var o=this._getNewPidsAndStpidsForIds(e);return(!0!==i||!1!==r.events.publish("remove",[this,e,o]))&&(this.remove(e),this._draw(!1,r.action.update,null,(function(){n.config.sticky&&r._moveToBoundaryArea(n.getSvg(),n.getViewBox(),n.response.boundary),t&&t(),r.events.publish("removed",[n,e,o]),n.filterUI.update()})),!0)},r.prototype.remove=function(e){var t=this.get(e);if(t)for(var i=this.config.nodes.length-1;i>=0;i--)this.config.nodes[i].pid!=e&&this.config.nodes[i].stpid!=e||(this.config.nodes[i].pid=t.pid,this.config.nodes[i].stpid=t.stpid),this.config.nodes[i].id==e&&this.config.nodes.splice(i,1);return this},r.prototype._getNewPidsAndStpidsForIds=function(e){var t=this.get(e),i={},n={};if(t)for(var r=this.config.nodes.length-1;r>=0;r--)this.config.nodes[r].pid==e?i[this.config.nodes[r].id]=t.pid:this.config.nodes[r].stpid==e&&(n[this.config.nodes[r].id]=t.stpid);return{newPidsForIds:i,newStpidsForIds:n}},r.prototype.addNode=function(e,t,i){var n=this;if(!0===i&&!1===r.events.publish("add",[this,e]))return!1;this.add(e),n._draw(!1,r.action.insert,{id:e.pid,insertedNodeId:e.id},(function(){n.ripple(e.id),t&&t(),r.events.publish("added",[n,e.id]),n.filterUI.update()})),r.events.publish("adding",[n,e.id])},r.prototype.add=function(e){return null==e.id&&console.error("Call addNode without id"),this.config.nodes.push(e),this},r.prototype._get=function(e){for(var t=0;t<this.config.nodes.length;t++)if(this.config.nodes[t].id==e)return this.config.nodes[t];return null},r.prototype.get=function(e){for(var t=0;t<this.config.nodes.length;t++)if(this.config.nodes[t].id==e)return JSON.parse(JSON.stringify(this.config.nodes[t]));return null},r.prototype.canRemove=function(e){var t=this.getNode(e);return!!t&&!t.hasPartners&&!t.hasAssistants},r.prototype.addChildNode=function(e,t,i){this.hideTreeMenu(!1);var n=this;if(!e||r.isNEU(e.mid)&&r.isNEU(e.fid))console.error("addSonNode invalid data");else{r.isNEU(e.id)&&(e.id=this.generateId());var o={addNodesData:[e],updateNodesData:[],removeNodeId:null};if(!1!==this._fireUpdate_addUpdateRemove(o,i)){var a="";r.isNEU(o.addNodesData[0].pid)?r.isNEU(o.addNodesData[0].mid)?r.isNEU(o.addNodesData[0].fid)||(a=o.addNodesData[0].fid):a=o.addNodesData[0].mid:a=o.addNodesData[0].pid,n._draw(!1,r.action.insert,{id:a,insertedNodeId:o.addNodesData[0].id},(function(){n.ripple(o.addNodesData[0].id),t&&t(),r.events.publish("updated",[n,o]),n.filterUI.update()})),r.events.publish("updating",[n,o])}}},r.prototype.addChildAndPartnerNodes=function(e,t,i,n,o){this.hideTreeMenu(!1);var a=this;if(!t||r.isNEU(t.mid)&&r.isNEU(t.fid))console.error("addChildAndPartnerNodes invalid childData");else if(i){r.isNEU(t.id)&&(t.id=this.generateId()),r.isNEU(i.id)&&(i.id=this.generateId()),"_ft_partner"==t.mid?t.mid=i.id:"_ft_partner"==t.fid&&(t.fid=i.id);var l=[],s=null;Array.isArray(i.pids)&&(1!=i.pids.length&&console.error("addChildAndPartnerNodes partnerData.pids has to have one partner"),s=this.get(i.pids[0]),Array.isArray(s.pids)||(s.pids=[]),s.pids.push(i.id),l.push(s));var d={addNodesData:[t,i],updateNodesData:l,removeNodeId:null};if(!1!==this._fireUpdate_addUpdateRemove(d,o)){var c=this.getRecentRootsByNodeId(e);r._changeRootOption(this.config.roots,c,this.manager.rootList);var p="";s?p=s.id:r.isNEU(t.pid)?r.isNEU(t.mid)?r.isNEU(t.fid)||(p=t.fid):p=t.mid:p=t.pid,a._draw(!1,r.action.update,{id:p},(function(){a.ripple(t.id),a.ripple(i.id),n&&n(),r.events.publish("updated",[a,d]),a.filterUI.update()})),r.events.publish("updating",[a,d])}}else console.error("addChildAndPartnerNodes invalid data")},r.prototype.addPartnerAndParentNodes=function(e,t,i,n,o){this.hideTreeMenu(!1);var a=this;if(r.isNEU(t))console.error("addPartnerAndParentNodes invalid data");else if(i){r.isNEU(i.id)&&(i.id=this.generateId());var l=[],s=this.get(t);if(r.isNEU(s.mid)||r.isNEU(s.fid)){r.isNEU(s.mid)?s.mid=i.id:r.isNEU(s.mid)||(s.fid=i.id),l.push(s);var d=null;Array.isArray(i.pids)&&(1!=i.pids.length&&console.error("addChildAndPartnerNodes partnerData.pids has to have one partner"),d=this.get(i.pids[0]),Array.isArray(d.pids)||(d.pids=[]),d.pids.push(i.id),l.push(d));var c={addNodesData:[i],updateNodesData:l,removeNodeId:null};if(!1!==this._fireUpdate_addUpdateRemove(c,o)){var p=this.getRecentRootsByNodeId(e);r._changeRootOption(this.config.roots,p,this.manager.rootList);var h="";d?h=d.id:r.isNEU(s.pid)?r.isNEU(s.mid)?r.isNEU(s.fid)||(h=s.fid):h=s.mid:h=s.pid,a._draw(!1,r.action.update,{id:h},(function(){a.ripple(s.id),a.ripple(i.id),n&&n(),r.events.publish("updated",[a,c]),a.filterUI.update()})),r.events.publish("updating",[a,c])}}else console.error("father id (fid) or mather id (mid) has to be null or undefined")}else console.error("addPartnerAndParentNodes invalid data")},r.prototype.addPartnerNode=function(e,t,i){this.hideTreeMenu(!1);var n=this;if(e&&Array.isArray(e.pids)&&1==e.pids.length){r.isNEU(e.id)&&(e.id=this.generateId());var o=this.get(e.pids[0]);Array.isArray(o.pids)||(o.pids=[]),o.pids.push(e.id);var a={removeNodeId:null,updateNodesData:[o],addNodesData:[e]};if(!1!==this._fireUpdate_addUpdateRemove(a,i)){var l=this.getRecentRootsByNodeId(a.updateNodesData[0].id);r._changeRootOption(this.config.roots,l,this.manager.rootList);var s=a.updateNodesData[0].id;n._draw(!1,r.action.insert,{id:s,insertedNodeId:a.addNodesData[0].id},(function(){n.ripple(a.addNodesData[0].id),t&&t(),r.events.publish("updated",[n,a]),n.filterUI.update()})),r.events.publish("updating",[n,a])}}else console.error("addPartnerNode invalid data")},r.prototype.addParentNode=function(e,t,i,n,o){this.hideTreeMenu(!1);var a=this;if(i)if(["mid","fid"].has(t))if(r.isNEU(e))console.error("addParentNode invalid childId");else{r.isNEU(i.id)&&(i.id=this.generateId());var l=[],s=this.get(e);s[t]=i.id,l.push(s);var d=null;Array.isArray(i.pids)&&(1!=i.pids.length&&console.error("addParentNode: data has to have one partner"),d=this.get(i.pids[0]),Array.isArray(d.pids)||(d.pids=[]),d.pids.push(i.id),l.push(d));var c={removeNodeId:null,updateNodesData:l,addNodesData:[i]};if(!1!==this._fireUpdate_addUpdateRemove(c,o)){var p=e;this.config.roots=[c.addNodesData[0].id],this._draw(!1,r.action.insert,{id:p,insertedNodeId:c.addNodesData[0].id},(function(){a.ripple(c.addNodesData[0].id),n&&n(),r.events.publish("updated",[a,c]),a.filterUI.update()})),r.events.publish("updating",[a,c])}}else console.error("addParentNode invalid type");else console.error("addParentNode invalid data")},r.prototype.canRemove=function(e){var t=this.getNode(e);return!(!t||t.pids.length>1||t.childrenIds.length>0)},r.prototype.removeNode=function(e,t,i){var n=this;if(this.canRemove(e)){var o=this.getNode(e),a=[];if(Array.isArray(o.pids))for(var l=0;l<o.pids.length;l++){var s=this.get(o.pids[l]);s&&-1!=(c=s.pids.indexOf(o.id))&&(s.pids.splice(c,1),a.push(s))}if(Array.isArray(o.ftChildrenIds))for(l=0;l<o.ftChildrenIds.length;l++){var d=this.get(o.ftChildrenIds[l]);d&&(d.mid==o.id?(d.mid=void 0,a.push(d)):d.fid==o.id&&(d.fid=void 0,a.push(d)))}var c,p={removeNodeId:e,updateNodesData:a,addNodesData:[]};!1!==this._fireUpdate_addUpdateRemove(p,i)&&(-1!=(c=this.config.roots.indexOf(e))&&this.config.roots.splice(c,1),this._draw(!1,r.action.update,null,(function(){n.config.sticky&&r._moveToBoundaryArea(n.getSvg(),n.getViewBox(),n.response.boundary),t&&t(),r.events.publish("updated",[n,p]),n.filterUI.update()})),r.events.publish("updating",[n,p]))}},r.prototype.updateNode=function(e,t,i){var n=this,o=this.getNode(e.id);e.pids||(e.pids=[]);var a=[];a.push(e);for(var l=0;l<o.pids.length;l++)if(!e.pids.has(o.pids[l])&&(d=this._get(o.pids[l]))&&d.pids){var s=d.pids.indexOf(e.id);-1!=s&&(d.pids.splice(s,1),a.push(e)),o.pids.splice(l,1),a.push(d)}for(l=0;l<e.pids.length;l++){var d;o.pids&&o.pids.has(e.pids[l])||((d=this._get(e.pids[l])).pids||(d.pids=[]),d.pids.push(e.pids[l]),a.push(d))}var c={removeNodeId:null,updateNodesData:a,addNodesData:[]};!1!==this._fireUpdate_addUpdateRemove(c,i)&&(this._draw(!1,r.action.update,null,(function(){n.config.sticky&&r._moveToBoundaryArea(n.getSvg(),n.getViewBox(),n.response.boundary),t&&t(),r.events.publish("updated",[n,c]),n.filterUI.update()})),r.events.publish("updating",[n,c]))},r.prototype._fireUpdate_addUpdateRemove=function(e,t){if(!0===t&&!1===r.events.publish("update",[this,e]))return!1;for(var i=0;i<e.addNodesData.length;i++)this.add(e.addNodesData[i]);for(i=0;i<e.updateNodesData.length;i++)this.update(e.updateNodesData[i]);return r.isNEU(e.removeNodeId)||this.remove(e.removeNodeId),!0},void 0===r&&(r={}),r._ajax=function(e,t,i,n,r){null==n&&(n="arraybuffer");var o=new XMLHttpRequest;o.onload=function(e){4==o.readyState&&200===this.status&&(null==e.target?r(this.response):r(e.target.response))},o.onerror=function(e){r({error:e})},o.open(t,e),o.responseType=n,o.setRequestHeader("Content-Type","application/json"),null==i?o.send():o.send(i)},void 0===r&&(r={}),r.animate=function(e,t,i,n,o,a,l){var s,d=10,c=1,p=n/d+1;return document.getElementsByTagName("g"),Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]),s=setInterval((function(){for(var h=0;h<e.length;h++)for(var f in i[h]){var u=r._arrayContains(["top","left","right","bottom","width","height"],f.toLowerCase())?"px":"";switch(f.toLowerCase()){case"d":var g=o((c*d-d)/n)*(i[h][f][0]-t[h][f][0])+t[h][f][0],m=o((c*d-d)/n)*(i[h][f][1]-t[h][f][1])+t[h][f][1];e[h].setAttribute("d",e[h].getAttribute("d")+" L"+g+" "+m);break;case"r":var b=o((c*d-d)/n)*(i[h][f]-t[h][f])+t[h][f];e[h].setAttribute("r",b);break;case"x1":b=o((c*d-d)/n)*(i[h][f]-t[h][f])+t[h][f],e[h].setAttribute("x1",b);break;case"x2":b=o((c*d-d)/n)*(i[h][f]-t[h][f])+t[h][f],e[h].setAttribute("x2",b);break;case"y1":b=o((c*d-d)/n)*(i[h][f]-t[h][f])+t[h][f],e[h].setAttribute("y1",b);break;case"y2":b=o((c*d-d)/n)*(i[h][f]-t[h][f])+t[h][f],e[h].setAttribute("y2",b);break;case"rotate3d":if(i[h][f]){var v=t[h][f],y=i[h][f],x=[0,0,0,0];for(var _ in v)x[_]=o((c*d-d)/n)*(y[_]-v[_])+v[_];e[h].style.transform="rotate3d("+x.toString()+"deg)"}break;case"transform":if(i[h][f]){for(var _ in v=t[h][f],y=i[h][f],x=[0,0,0,0,0,0],v)x[_]=o((c*d-d)/n)*(y[_]-v[_])+v[_];e[h].hasAttribute("transform")?e[h].setAttribute("transform","matrix("+x.toString()+")"):e[h].style.transform="matrix("+x.toString()+")"}break;case"viewbox":if(i[h][f]){for(var _ in v=t[h][f],y=i[h][f],x=[0,0,0,0],v)x[_]=o((c*d-d)/n)*(y[_]-v[_])+v[_];e[h].setAttribute("viewBox",x.toString())}break;case"margin":if(i[h][f]){for(var _ in v=t[h][f],y=i[h][f],x=[0,0,0,0],v)x[_]=o((c*d-d)/n)*(y[_]-v[_])+v[_];var w="";for(_=0;_<x.length;_++)w+=parseInt(x[_])+"px ";e[h]&&e[h].style&&(e[h].style[f]=w)}break;case"scrolly":b=o((c*d-d)/n)*(i[h][f]-t[h][f])+t[h][f],e[h].scrollTo(0,b);break;default:b=o((c*d-d)/n)*(i[h][f]-t[h][f])+t[h][f],e[h]&&e[h].style&&(e[h].style[f]=b+u)}}l&&l(),(c+=1)>p+1&&(clearInterval(s),a&&a(e))}),d)},r.anim={},r.anim.inPow=function(e){return e<0?0:e>1?1:Math.pow(e,2)},r.anim.outPow=function(e){return e<0?0:e>1?1:-1*(Math.pow(e-1,2)+-1)},r.anim.inOutPow=function(e){return e<0?0:e>1?1:(e*=2)<1?r.anim.inPow(e,2)/2:-.5*(Math.pow(e-2,2)+-2)},r.anim.inSin=function(e){return e<0?0:e>1?1:1-Math.cos(e*(Math.PI/2))},r.anim.outSin=function(e){return e<0?0:e>1?1:Math.sin(e*(Math.PI/2))},r.anim.inOutSin=function(e){return e<0?0:e>1?1:-.5*(Math.cos(Math.PI*e)-1)},r.anim.inExp=function(e){return e<0?0:e>1?1:Math.pow(2,10*(e-1))},r.anim.outExp=function(e){return e<0?0:e>1?1:1-Math.pow(2,-10*e)},r.anim.inOutExp=function(e){return e<0?0:e>1?1:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,10*(-2*e+1)))},r.anim.inCirc=function(e){return e<0?0:e>1?1:-(Math.sqrt(1-e*e)-1)},r.anim.outCirc=function(e){return e<0?0:e>1?1:Math.sqrt(1-(e-1)*(e-1))},r.anim.inOutCirc=function(e){return e<0?0:e>1?1:e<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(2*e-2)*(2*e-2))+1)},r.anim.rebound=function(e){return e<0?0:e>1?1:e<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-1.5/2.75)*(e-1.5/2.75)+.75):e<2.5/2.75?1-(7.5625*(e-2.25/2.75)*(e-2.25/2.75)+.9375):1-(7.5625*(e-2.625/2.75)*(e-2.625/2.75)+.984375)},r.anim.inBack=function(e){return e<0?0:e>1?1:e*e*(2.70158*e-1.70158)},r.anim.outBack=function(e){return e<0?0:e>1?1:(e-1)*(e-1)*(2.70158*(e-1)+1.70158)+1},r.anim.inOutBack=function(e){return e<0?0:e>1?1:e<.5?4*e*e*(7.1898*e-2.5949)*.5:.5*((2*e-2)*(2*e-2)*(3.5949*(2*e-2)+2.5949)+2)},r.anim.impulse=function(e){var t=2*e;return t*Math.exp(1-t)},r.anim.expPulse=function(e){return Math.exp(-2*Math.pow(e,2))},void 0===r&&(r={}),r.prototype._attachInitEventHandlers=function(e){this._addEvent(window,"resize",this._resizeHandler)},r.prototype._attachEventHandlers=function(e){if(this.config.interactive){e=this.getSvg(),this.config.enableTouch||r.isMobile()?(this._addEvent(e,"touchstart",this._globalMouseDownHandler),this._addEvent(e,"touchend",this._globalClickHandler)):(this._addEvent(e,"mousedown",this._globalMouseDownHandler),this._addEvent(e,"click",this._globalClickHandler),this._addEvent(e,"contextmenu",this._globalContextHandler),this._addEvent(e,"dblclick",this._globalDbClickHandler),this.config.mouseScrool!=r.action.zoom&&this.config.mouseScrool!=r.action.ctrlZoom||(this._addEvent(e,"DOMMouseScroll",this._mouseScrollHandler),this._addEvent(e,"mousewheel",this._mouseScrollHandler)));var t=this.getMenuButton();t&&this._addEvent(t,"click",this._menuClickHandler)}},r.prototype._addEvent=function(e,t,i,n){var r,o;function a(e){var t=i.apply(this,arguments);return!1===t&&(e.stopPropagation(),e.preventDefault()),t}n||(n=""),e.getListenerList||(e.getListenerList={}),e.getListenerList[t+n]||(r=this,o=i,i=function(){if(o)return o.apply(r,[this,arguments[0]])},e.addEventListener?"mousewheel"==t?e.addEventListener(t,a,{passive:!1}):e.addEventListener(t,a,!1):e.attachEvent("on"+t,(function(){var t=i.call(e,window.event);return!1===t&&(window.event.returnValue=!1,window.event.cancelBubble=!0),t})),e.getListenerList[t+n]=a)},r.prototype._removeEvent=function(e,t){if(e.getListenerList[t]){var i=e.getListenerList[t];e.removeEventListener(t,i,!1),delete e.getListenerList[t]}},void 0===r&&(r={}),r.VERSION="8.04.11",r.orientation={},r.orientation.top=0,r.orientation.bottom=1,r.orientation.right=2,r.orientation.left=3,r.orientation.top_left=4,r.orientation.bottom_left=5,r.orientation.right_top=6,r.orientation.left_top=7,r.align={},r.align.center=r.CENTER=8,r.align.orientation=r.ORIENTATION=9,r.attr={},r.attr.l="data-l",r.attr.id="data-id",r.attr.sl="data-sl",r.attr.lbl="data-lbl",r.attr.val="data-val",r.attr.tlbr="data-tlbr",r.attr.item="data-item",r.attr.layout="data-layout",r.attr.node_id="data-n-id",r.attr.link_id="data-l-id",r.attr.field_name="data-f-name",r.attr.c_link_to="data-c-l-to",r.attr.c_link_from="data-c-l-from",r.attr.s_link_to="data-s-l-to",r.attr.s_link_from="data-s-l-from",r.attr.control_add="data-ctrl-add",r.attr.control_expcoll_id="data-ctrl-ec-id",r.attr.control_up_id="data-ctrl-up-id",r.attr.control_export_menu="data-ctrl-menu",r.attr.control_node_menu_id="data-ctrl-n-menu-id",r.attr.control_node_circle_menu_id="data-ctrl-n-c-menu-id",r.attr.control_node_circle_menu_name="data-ctrl-n-c-menu-name",r.attr.control_node_circle_menu_wrraper_id="data-ctrl-n-c-menu-wrapper-id",r.attr.width="data-width",r.attr.text_overflow="data-text-overflow",r.ID="id",r.PID="pid",r.STPID="stpid",r.TAGS="tags",r.NODES="nodes",r.ELASTIC="elastic",r.ASSISTANT="Assistant",r.action={},r.action.expand=0,r.action.collapse=1,r.action.maximize=101,r.action.minimize=102,r.action.expandCollapse=501,r.action.edit=1,r.action.zoom=2,r.action.ctrlZoom=22,r.action.scroll=41,r.action.xScroll=3,r.action.yScroll=4,r.action.none=5,r.action.init=6,r.action.update=7,r.action.pan=8,r.action.centerNode=9,r.action.resize=10,r.action.insert=11,r.action.insertfirst=12,r.action.details=13,r.action.exporting=14,r.none=400001,r.scroll={},r.scroll.visible=!0,r.scroll.smooth=12,r.scroll.speed=120,r.scroll.safari={smooth:12,speed:250},r.match={},r.match.height=100001,r.match.width=100002,r.match.boundary=100003,r.layout={},r.layout.normal=r.normal=0,r.layout.mixed=r.mixed=1,r.layout.tree=r.tree=2,r.layout.treeLeftOffset=r.treeLeftOffset=3,r.layout.treeRightOffset=r.treeRightOffset=4,r.nodeOpenTag="<g "+r.attr.node_id+'="{id}" style="opacity: {opacity}" transform="matrix(1,0,0,1,{x},{y})" class="{class}" '+r.attr.sl+'="{sl}" '+r.attr.l+"={level} {lcn}>",r.linkOpenTag="<g "+r.attr.link_id+'="[{id}][{child-id}]" class="{class}">',r.expcollOpenTag="<g "+r.attr.control_expcoll_id+'="{id}" transform="matrix(1,0,0,1,{x},{y})"  style="cursor:pointer;">',r.upOpenTag="<g "+r.attr.control_up_id+'="{id}" transform="matrix(1,0,0,1,{x},{y})" style="cursor:pointer;">',r.linkFieldsOpenTag='<g transform="matrix(1,0,0,1,{x},{y}) rotate({rotate})">',r.grCloseTag="</g>",r.A5w=420,r.A5h=595,r.A4w=595,r.A4h=842,r.A3w=842,r.A3h=1191,r.A2w=1191,r.A2h=1684,r.A1w=1684,r.A1h=2384,r.Letterw=612,r.Letterh=791,r.Legalw=612,r.Legalh=1009,r.COLLAPSE_PARENT_NEIGHBORS=1,r.COLLAPSE_SUB_CHILDRENS=2,r.COLLAPSE_PARENT_SUB_CHILDREN_EXCEPT_CLICKED=3,r.TEXT_THRESHOLD=400,r.IMAGES_THRESHOLD=100,r.LINKS_THRESHOLD=200,r.BUTTONS_THRESHOLD=70,r.ANIM_THRESHOLD=50,r.IT_IS_LONELY_HERE='<g transform="translate(-100, 0)" style="cursor:pointer;"  '+r.attr.control_add+'="control-add"><text fill="#039be5">{link}</text></g>',r.RES={},r.RES.IT_IS_LONELY_HERE_LINK="It's lonely here, add your first node",r.FIRE_DRAG_NOT_CLICK_IF_MOVE=3,r.STRING_TAGS=!1,r.MAX_NODES_MESS="The trial has expired or 200 nodes limit was reached! <br /><a style='color: #039BE5;' target='_blank' href='https://balkan.app/FamilyTreeJS/Docs/Evaluation'>See more</a>",r.OFFLINE_MESS="The evaluation version requires internet connection! <br /><a style='color: #039BE5;' target='_blank' href='https://balkan.app/FamilyTreeJS/Docs/Evaluation'>See more</a>",r.SEARCH_PLACEHOLDER="Search",r.IMPORT_MESSAGE="Choose the columns (fields) in your data file that contain the required information.",r.FIXED_POSITION_ON_CLICK=!1,r.RENDER_LINKS_BEFORE_NODES=!1,r.MIXED_LAYOUT_ALL_NODES=!0,r.MIXED_LAYOUT_FOR_NODES_WITH_COLLAPSED_CHILDREN=!1,r.LINK_ROUNDED_CORNERS=5,r.MOVE_STEP=5,r.MOVE_INTERVAL=25,r.CLINK_CURVE=1,r.SEARCH_RESULT_LIMIT=10,r.MAX_DEPTH=200,r.SCALE_FACTOR=1.44,r.LAZY_LOADING_FACTOR=500,r.HIDE_EDIT_FORM_ON_PAN=!0,r.LAZY_LOADING=!0,r.ARRAY_FIELDS=["tags"],r.CSV_DELIMITER=",",r.EDITFORM_CLOSE_BTN='<svg data-edit-from-close class="bft-edit-form-close"><path style="fill:#ffffff;" d="M21.205,5.007c-0.429-0.444-1.143-0.444-1.587,0c-0.429,0.429-0.429,1.143,0,1.571l8.047,8.047H1.111 C0.492,14.626,0,15.118,0,15.737c0,0.619,0.492,1.127,1.111,1.127h26.554l-8.047,8.032c-0.429,0.444-0.429,1.159,0,1.587 c0.444,0.444,1.159,0.444,1.587,0l9.952-9.952c0.444-0.429,0.444-1.143,0-1.571L21.205,5.007z"></path></svg>',r.OC_VERSION=r.VERSION,r.VERSION="1.06.08",r.RENDER_LINKS_BEFORE_NODES=!0,r.ARRAY_FIELDS=["tags","pids"],r._intersects=function(e,t,i){var n=e.x-i.siblingSeparation/4,o=e.y,a=e.x+e.w+i.siblingSeparation/4,l=e.y;switch(i.orientation){case r.orientation.right:case r.orientation.right_top:case r.orientation.left:case r.orientation.left_top:n=e.x,o=e.y-i.siblingSeparation/4,a=e.x,l=e.y+e.h+i.siblingSeparation/4}var s,d,c,p=t.p,h=t.q,f=t.r,u=t.s;return 0!=(s=(a-n)*(u-h)-(f-p)*(l-o))&&(d=((o-l)*(f-n)+(a-n)*(u-o))/s,0<(c=((u-h)*(f-n)+(p-f)*(u-o))/s)&&c<1&&0<d&&d<1)},r._addPoint=function(e,t,i,n,o){switch(i.orientation){case r.orientation.top:case r.orientation.top_left:return r._addPointTop(e,t,i,n,o);case r.orientation.bottom:case r.orientation.bottom_left:return r._addPointBottom(e,t,i,n,o);case r.orientation.left:case r.orientation.left_top:return r._addPointLeft(e,t,i,n,o);case r.orientation.right:case r.orientation.right_top:return r._addPointRight(e,t,i,n,o)}},r._addPointTop=function(e,t,i,n,r){var o,a,l;return"left"==r?o=e.leftNeighbor?e.x+(e.leftNeighbor.x+e.leftNeighbor.w-e.x)/2:e.x-i.siblingSeparation/2:"right"==r&&(o=e.rightNeighbor?e.x+e.w+(e.rightNeighbor.x-(e.x+e.w))/2:e.x+e.w+i.siblingSeparation/2),t.push([o,t[t.length-1][1]]),t.push([o,e.y-i.levelSeparation/3]),a=t[t.length-1][1],l=o,n.p=o,n.q=a,n.r=l,n},r._addPointBottom=function(e,t,i,n,r){var o,a,l;return"left"==r?o=e.leftNeighbor?e.x+(e.leftNeighbor.x+e.leftNeighbor.w-e.x)/2:e.x-i.siblingSeparation/2:"right"==r&&(o=e.rightNeighbor?e.x+e.w+(e.rightNeighbor.x-(e.x+e.w))/2:e.x+e.w+i.siblingSeparation/2),t.push([o,t[t.length-1][1]]),t.push([o,e.y+e.h+i.levelSeparation/3]),a=t[t.length-1][1],l=o,n.p=o,n.q=a,n.r=l,n},r._addPointLeft=function(e,t,i,n,r){var o,a=t[t.length-1][0];return"bottom"==r?o=e.rightNeighbor?e.y+e.h+(e.rightNeighbor.y-(e.y+e.h))/2:e.y+e.h+i.siblingSeparation/2:"top"==r&&(o=e.leftNeighbor?e.y+(e.leftNeighbor.y+e.leftNeighbor.h-e.y)/2:e.y-i.siblingSeparation/2),t.push([t[t.length-1][0],o]),t.push([e.x-i.levelSeparation/3,o]),a=t[t.length-1][0],s=o,n.p=a,n.q=o,n.s=s,n},r._addPointRight=function(e,t,i,n,r){var o,a=t[t.length-1][0];return"bottom"==r?o=e.rightNeighbor?e.y+e.h+(e.rightNeighbor.y-(e.y+e.h))/2:e.y+e.h+i.siblingSeparation/2:"top"==r&&(o=e.leftNeighbor?e.y+(e.leftNeighbor.y+e.leftNeighbor.h-e.y)/2:e.y-i.siblingSeparation/2),t.push([t[t.length-1][0],o]),t.push([e.x+e.w+i.levelSeparation/3,o]),a=t[t.length-1][0],s=o,n.p=a,n.q=o,n.s=s,n},r.editUI=function(){},r.editUI.prototype.init=function(e){this.obj=e,this.fields=null,this._event_id=r._guid()},r.editUI.prototype.on=function(e,t){return r.events.on(e,t,this._event_id),this},r.editUI.prototype.show=function(e,t,i){if(this.hide(),!1===r.events.publish("show",[this,e]))return!1;var n=this,o=this.content(e,t,i);this.obj.element.appendChild(o.element),r.input.init(this.obj.element),i?t||this._focusElement(o.focusId):this.interval=r.animate(o.element,{right:-20,opacity:0},{right:0,opacity:1},300,r.anim.outSin,(function(){t||n._focusElement(o.focusId)})),this.obj.element.querySelector("[data-edit-from-close]").addEventListener("click",(function(t){t.preventDefault(),!1!==r.events.publish("cancel",[n,{id:e}])&&n.hide()})),this.obj.element.querySelector("[data-edit-from-cancel]").addEventListener("click",(function(t){t.preventDefault(),!1!==r.events.publish("cancel",[n,{id:e}])&&n.hide()})),this.obj.element.querySelector("[data-edit-from-save]").addEventListener("click",(function(t){t.preventDefault();var i=r.input.validateAndGetData(o.element);if(!1!==i){var a=n.obj.get(e),l={data:r.mergeDeep(a,i)};if(!1===r.events.publish("save",[n,l]))return;n.obj.updateNode(l.data,null,!0),n.hide()}}));for(var a=this.obj.element.querySelectorAll("[bft-input-btn]"),l=0;l<a.length;l++)a[l].addEventListener("click",(function(t){r.events.publish("element-btn-click",[n,{input:this.parentNode.querySelector("input"),nodeId:e}])}));this.obj.element.querySelector("[data-add-more-fields-btn]").addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault();var t=this,i=r.elements.textbox({},{type:"textbox",label:n.obj.config.editForm.addMoreFieldName,btn:n.obj.config.editForm.addMoreBtn},"280px");t.parentNode.insertAdjacentHTML("beforebegin",i.html),t.style.display="none",r.input.init(t.parentNode.previousSibling);var o=document.getElementById(i.id);o.focus(),o.nextElementSibling.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault();var i=n.obj.element.querySelector('[data-binding="'+o.value+'"]');if(r.isNEU(o.value)||i)o.focus();else{var a=r.elements.textbox({},{type:"textbox",label:o.value,binding:o.value},"280px");o.parentNode.parentNode.parentNode.removeChild(o.parentNode.parentNode),t.parentNode.insertAdjacentHTML("beforebegin",a.html),t.style.display="",r.input.init(t.parentNode.previousSibling),document.getElementById(a.id).focus()}}))})),this.obj.element.querySelector("[data-bft-edit-from-btns]").addEventListener("click",(function(t){for(var i=t.target;i&&i.hasAttribute&&!i.hasAttribute("data-edit-from-btn");)i=i.parentNode;if(i&&i.hasAttribute){var a=i.getAttribute("data-edit-from-btn"),l={button:n.obj.config.editForm.buttons[a],name:a,nodeId:e,event:t};if(!1===r.events.publish("button-click",[n,l]))return!1;switch(a){case"edit":n.obj.editUI.show(e,!1,!0);break;case"pdf":n.obj.exportPDFProfile({id:e,filename:o.title}),n.hide();break;case"png":n.obj.exportPNGProfile({id:e,filename:o.title}),n.hide();break;case"share":n.obj.shareProfile(e);break;case"remove":n.obj.removeNode(e,null,!0),n.hide()}}}))},r.editUI.prototype._focusElement=function(e){var t=null;r.isNEU(this.obj.config.editForm.focusBinding)?r.isNEU(e)||(t=document.getElementById(e)):t=this.obj.element.querySelector('[data-binding="'+this.obj.config.editForm.focusBinding+'"]'),t&&(t.focus(),t.value&&t.value.length&&(t.selectionStart=t.selectionEnd=t.value.length))},r.editUI.prototype.setAvatar=function(e){var t=this.obj.element.querySelector("#bft-avatar");r.isNEU(e)?t.innerHTML=r.icon.user(150,150,"#8C8C8C",0,0):t.innerHTML=`<img style="width: 100%;height:100%;border-radius: 50%;" src="${e}"></img>`},r.editUI.prototype.content=function(e,t,i,n,o){var a,l=this.obj.config.editForm.readOnly,s=JSON.parse(JSON.stringify(this.obj.config.editForm.elements)),d=this.obj.config.editForm.addMore,c=this.obj.config.editForm.saveAndCloseBtn,p=this.obj.config.editForm.cancelBtn,h=this.obj.config.editForm.buttons,f=this.obj.config.editForm.titleBinding,u=this.obj.config.editForm.photoBinding,g=this.obj.getNode(e),m=this.obj._get(e),b=r.t(g.templateName,g.min,this.obj.getScale()),v=m[f],y=m[u];if(this.obj.config.editForm.generateElementsFromFields)for(var x=0;x<this.fields.length;x++){var _=this.fields[x];if("tags"!=_){for(var w=!1,k=0;k<s.length;k++){if(Array.isArray(s[k])){for(var S=0;S<s[k].length;S++)if(_==s[k][S].binding){w=!0;break}}else if(_==s[k].binding){w=!0;break}if(w)break}w||s.push({type:"textbox",label:_,binding:_})}}r.isNEU(v)&&(v=""),y=r.isNEU(y)?r.icon.user(150,150,"#8C8C8C",0,0):`<img style="width: 100%;height:100%;border-radius: 50%;" src="${y}"></img>`;var C=!t,I=t?"display:none;":"",N=t||!d?"display:none;":"",A=b.editFormHeaderColor?`style="background-color:${b.editFormHeaderColor};"`:"",M=document.createElement("form");if(M.setAttribute("data-bft-edit-form",""),M.classList.add("bft-edit-form"),M.classList.add(this.obj.config.mode),M.classList.add(g.templateName),M.classList.add(r.ui._defsIds[g.templateName]),Array.isArray(g.tags)&&g.tags.length)for(x=0;x<g.tags.length;x++)M.classList.add(g.tags[x]);M.style.display="flex",M.style.opacity=i?1:0,M.style.right=i?0:"-20px",n&&(M.style.width=n);var E=[],L=o?"":r.EDITFORM_CLOSE_BTN;return M.innerHTML=`<div>\n                        <div class="bft-edit-form-header" ${A}>\n                            ${L}\n                            <h1 class="bft-edit-form-title">${v}</h1>\n                            <div id="bft-avatar" class="bft-edit-form-avatar">${y}</div>                        \n                        </div>\n                        <div data-bft-edit-from-btns class="bft-edit-form-instruments">\n                        ${function(){if(o)return"";var e="";for(var i in h){var n=h[i];r.isNEU(n)||C&&n.hideIfEditMode||t&&n.hideIfDetailsMode||l&&"Edit"==n.text||(e+=`<div data-edit-from-btn='${i}' class="bft-img-button" ${A} title="${n.text}">${n.icon}</div>`)}return e}()}    \n                        </div>\n                    </div>\n                    <div class="bft-edit-form-fields">\n                        <div class="bft-edit-form-fields-inner">\n                            <div class="bft-form-fieldset">\n                                ${function(){for(var e="",i=0;i<s.length;i++){var n=s[i];if(Array.isArray(n)){e+='<div class="bft-form-field-100 bft-form-fieldset">';for(var o=0;o<n.length;o++){var l=n[o],d=r.elements[l.type](m,l,"unset",t);!r.isNEU(d.id)&&r.isNEU(a)&&r.isNEU(d.value)&&(a=d.id),r.isNEU(d.value)||E.push(`${l.label}: ${d.value}`),e+=d.html}e+="</div>"}else d=r.elements[n.type](m,n,"280px",t),!r.isNEU(d.id)&&r.isNEU(a)&&r.isNEU(d.value)&&(a=d.id),r.isNEU(d.value)||E.push(`${n.label}: ${d.value}`),e+=d.html}return e}()}\n\n                                <div class="bft-form-field" style="min-width: 280px; text-align:center; ${N}">\n                                    <a data-add-more-fields-btn href="#" class="bft-link">${d}</a>\n                                </div>\n                            </div>        \n                        </div>\n                    </div>\n                    <div class="bft-form-fieldset" style="padding: 14px 10px; ${I}">\n                        <div class="bft-form-field" style="min-width: initial;">\n                            <button data-edit-from-cancel type="button" class="bft-button transparent">${p}</button>\n                        </div>\n                        <div class="bft-form-field" style="min-width: initial;">\n                            <button type="submit" data-edit-from-save type="button" class="bft-button">${c}</button>\n                        </div>\n                    </div>`,{element:M,focusId:a,title:v,shareText:E.join("\n")}},r.editUI.prototype.hide=function(){if(!1===r.events.publish("hide",[this]))return!1;r.isNEU(this.interval)&&(clearInterval(this.interval),this.interval=null);var e=this.obj.element.querySelector("[data-bft-edit-form]");e&&e.parentNode&&e.parentNode.removeChild(e)},r.prototype.getSvg=function(){var e=this.element.getElementsByTagName("svg");return e&&e.length?e[0]:null},r.prototype.getPointerElement=function(){return this.element.querySelector("g[data-pointer]")},r.prototype.getNodeElement=function(e){return this.element.querySelector("g["+r.attr.node_id+"='"+e+"']")},r.prototype.getMenuButton=function(){return this.element.querySelector("["+r.attr.control_export_menu+"]")},r.menuUI=function(){},r.menuUI.prototype.init=function(e,t){this.obj=e,this.wrapper=null,this.menu=t,this._event_id=r._guid()},r.menuUI.prototype.showStickIn=function(e,t,i,n){this._show(e,null,t,i,n)},r.menuUI.prototype.show=function(e,t,i,n,r){this._show(e,t,i,n,r)},r.menuUI.prototype._show=function(e,t,i,n,o){var a=this;this.hide();var l="";o||(o=this.menu);var s={firstNodeId:i,secondNodeId:n,menu:o};if(!1===r.events.publish("show",[this,s]))return!1;for(var d in o=s.menu){var c=o[d].icon,p=o[d].text;void 0===c&&(c=r.icon[d](24,24,"#7A7A7A")),"function"==typeof p&&(p=p()),"function"==typeof c&&(c=c()),l+="<div "+r.attr.item+'="'+d+'">'+c+"<span>&nbsp;&nbsp;"+p+"</span></div>"}if(""!=l){if(this.wrapper=document.createElement("div"),this.wrapper.className="bft-family-menu",this.wrapper.style.left="-99999px",this.wrapper.style.top="-99999px",this.wrapper.innerHTML=l,this.obj.element.appendChild(this.wrapper),null==t){var h=r._menuPosition(e,this.wrapper,this.obj.getSvg());e=h.x,t=h.y}var f=e+45;this.wrapper.style.left=f+"px",this.wrapper.style.top=t+"px",this.wrapper.style.left=f-this.wrapper.offsetWidth+"px";var u=e-this.wrapper.offsetWidth;r.animate(this.wrapper,{opacity:0,left:f-this.wrapper.offsetWidth},{opacity:1,left:u},300,r.anim.inOutPow);for(var g=this.wrapper.getElementsByTagName("div"),m=0;m<g.length;m++)(d=g[m]).addEventListener("click",(function(e){var t,l=this.getAttribute(r.attr.item);if(void 0===o[l].onClick)if("add"===l){var s={id:a.obj.generateId(),pid:i};a.obj.addNode(s,null,!0)}else if("edit"===l){var d=a.obj.getNode(i);a.obj.editUI.show(d.id)}else"details"===l?(d=a.obj.getNode(i),a.obj.editUI.show(d.id,!0)):"remove"===l?a.obj.removeNode(i,null,!0):"svg"===l?a.obj.exportSVG({filename:"FamilyTree.svg",expandChildren:!1,nodeId:i}):"pdf"===l?a.obj.exportPDF({filename:"FamilyTree.pdf",expandChildren:!1,nodeId:i}):"png"===l?a.obj.exportPNG({filename:"FamilyTree.png",expandChildren:!1,nodeId:i}):"csv"===l?a.obj.exportCSV():"xml"===l?a.obj.exportXML():"json"===l&&a.obj.exportJSON();else t=o[l].onClick.call(a.obj,i,n);0!=t&&a.hide()}))}},r.menuUI.prototype.hide=function(){null!=this.wrapper&&(this.obj.element.removeChild(this.wrapper),this.wrapper=null)},r.menuUI.prototype.on=function(e,t){return r.events.on(e,t,this._event_id),this},r.circleMenuUI=function(){},r.circleMenuUI.prototype.init=function(e,t){this.obj=e,this.menu=t,this._menu=null,this._buttonsInterval=[],this._linesInterval=[],this._event_id=r._guid()},r.circleMenuUI.prototype.show=function(e,t){this._show(e,t)},r.circleMenuUI.prototype._show=function(e,t){var i=this,n=this.obj.getNode(e),o=r.t(n.templateName,n.min,this.obj.getScale());if(!r.isNEU(o.nodeCircleMenuButton)){var a=this.obj.getSvg(),l=this.obj.element.querySelector("["+r.attr.control_node_circle_menu_id+'="'+e+'"]'),s=this.obj.getNodeElement(e),d=r._getTransform(l),c=r._getTransform(s),p=d[4]+c[4],h=d[5]+c[5],f=l.querySelectorAll("line"),u=this.obj.element.querySelector("["+r.attr.control_node_circle_menu_wrraper_id+"]");if(r.isNEU(u)||u.getAttribute(r.attr.control_node_circle_menu_wrraper_id)!=e){this.hide(),t||(t=this.menu);var g={nodeId:e,menu:t},m=r.events.publish("show",[this,g]);if(this._menu=t,!1===m)return!1;for(var b=0,v=Object.keys(g.menu).length,y=2*o.nodeCircleMenuButton.radius+4,x=2*Math.PI*y,_=x/v-(2*o.nodeCircleMenuButton.radius+2);_<0;)y+=8,_=(x=2*Math.PI*y)/v-(2*o.nodeCircleMenuButton.radius+2);for(var w in(u=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute(r.attr.control_node_circle_menu_wrraper_id,e),u.setAttribute("transform","matrix(1,0,0,1,"+p+","+h+")"),a.appendChild(u),g.menu){var k=g.menu[w].icon,S=g.menu[w].color,C=g.menu[w].text;"function"==typeof k&&(k=k()),"function"==typeof S&&(S=S()),"function"==typeof C&&(C=C());var I=document.createElementNS("http://www.w3.org/2000/svg","g");I.setAttribute("transform","matrix(1,0,0,1,0,0)"),I.setAttribute(r.attr.control_node_circle_menu_name,w),I.style.cursor="pointer";var N=document.createElementNS("http://www.w3.org/2000/svg","title");r.isNEU(C)||(N.innerHTML=C);var A=document.createElementNS("http://www.w3.org/2000/svg","circle");A.setAttribute("cx",0),A.setAttribute("cy",0),A.setAttribute("r",o.nodeCircleMenuButton.radius),A.setAttribute("fill",S),A.setAttribute("stroke-width","1"),A.setAttribute("stroke",o.nodeCircleMenuButton.stroke),I.appendChild(A),I.appendChild(N),I.innerHTML+=k,u.appendChild(I);var M=I.getElementsByTagName("svg")[0];if(M.setAttribute("pointer-events","none"),M){var E=parseInt(M.getAttribute("width")),L=parseInt(M.getAttribute("height"));M.setAttribute("x",-E/2),M.setAttribute("y",-L/2)}var T=b*Math.PI/(v/2);b++;var U=Math.cos(T)*y,O=Math.sin(T)*y;this._buttonsInterval.push(r.animate(I,{transform:[1,0,0,1,0,0]},{transform:[1,0,0,1,U,O]},250,r.anim.outBack,(function(e){var t=e[0].getAttribute(r.attr.control_node_circle_menu_name),n=e[0].parentNode.getAttribute(r.attr.control_node_circle_menu_wrraper_id);e[0].addEventListener("mouseenter",(function(e){r.events.publish("mouseenter",[i,{from:n,menuItem:g.menu[t],menuItemName:t,event:e}])})),e[0].addEventListener("mouseout",(function(e){r.events.publish("mouseout",[i,{from:n,menuItem:g.menu[t],menuItemName:t,event:e}])}))})))}this._linesInterval.push(r.animate(f[0],{x1:-o.nodeCircleMenuButton.radius/2,y1:-6,x2:o.nodeCircleMenuButton.radius/2,y2:-6},{x1:-7,y1:-7,x2:7,y2:7},500,r.anim.inOutSin)),this._linesInterval.push(r.animate(f[1],{x1:-o.nodeCircleMenuButton.radius/2,y1:0,x2:o.nodeCircleMenuButton.radius/2,y2:0},{x1:0,y1:0,x2:0,y2:0},500,r.anim.inOutSin)),this._linesInterval.push(r.animate(f[2],{x1:-o.nodeCircleMenuButton.radius/2,y1:6,x2:o.nodeCircleMenuButton.radius/2,y2:6},{x1:-7,y1:7,x2:7,y2:-7},500,r.anim.inOutSin))}else this.hide()}},r.circleMenuUI.prototype.hide=function(){for(var e=this._buttonsInterval.length-1;e>=0;e--)clearInterval(this._buttonsInterval[e]),this._buttonsInterval.splice(e,1);for(this._buttonsInterval=[],e=this._linesInterval.length-1;e>=0;e--)clearInterval(this._linesInterval[e]),this._linesInterval.splice(e,1);this._linesInterval=[];var t=this.obj.element.querySelector("["+r.attr.control_node_circle_menu_wrraper_id+"]");if(null!=t){var i=t.getAttribute(r.attr.control_node_circle_menu_wrraper_id),n=this.obj.getNode(i),o=r.t(n.templateName,n.min,this.obj.getScale()),a=this.obj.element.querySelector("["+r.attr.control_node_circle_menu_id+'="'+i+'"]').querySelectorAll("line");a[0].setAttribute("x1",-o.nodeCircleMenuButton.radius/2),a[0].setAttribute("x2",o.nodeCircleMenuButton.radius/2),a[0].setAttribute("y1",-6),a[0].setAttribute("y2",-6),a[1].setAttribute("x1",-o.nodeCircleMenuButton.radius/2),a[1].setAttribute("x2",o.nodeCircleMenuButton.radius/2),a[1].setAttribute("y1",0),a[1].setAttribute("y2",0),a[2].setAttribute("x1",-o.nodeCircleMenuButton.radius/2),a[2].setAttribute("x2",o.nodeCircleMenuButton.radius/2),a[2].setAttribute("y1",6),a[2].setAttribute("y2",6),t.parentElement.removeChild(t),t=null}},r.circleMenuUI.prototype.on=function(e,t){return r.events.on(e,t,this._event_id),this},void 0===r&&(r={}),r.idb={version:1,dbName:"BALKAN",tableName:"familytree-js",keyPath:"id"},r.idb.db=null,r.idb._open=function(e){if(r._browser().msie)e&&e(!1);else if((navigator.userAgent.toLowerCase().indexOf("safari")>0||navigator.userAgent.toLowerCase().indexOf("firefox")>0)&&window.location!==window.parent.location)e&&e(!1);else{if(!window.indexedDB)return console.error("Your browser doesn't support a stable version of IndexedDB."),void(e&&e(!1));if(null==r.idb.db){var t=indexedDB.open(r.idb.dbName,r.idb.version);t.onerror=function(t){console.error("Cannot open database!"),e&&e(!1)},t.onsuccess=function(t){r.idb.db=t.target.result,e&&e(!0)},t.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains(r.idb.tableName)&&t.deleteObjectStore(r.idb.tableName),t.createObjectStore(r.idb.tableName,{keyPath:r.idb.keyPath})}}else e&&e(!0)}},r.idb.read=function(e,t){r.idb._open((function(i){if(i){var n=r.idb.db.transaction([r.idb.tableName]).objectStore(r.idb.tableName).get(e);n.onerror=function(e){console.error("Unable to retrieve data from database!"),t&&t(!1)},n.onsuccess=function(e){n.result?t&&t(!0,n.result):t&&t(null)}}else t&&t(!1)}))},r.idb.write=function(e,t){r.idb.read(e.id,(function(i){if(null==i){var n=r.idb.db.transaction([r.idb.tableName],"readwrite").objectStore(r.idb.tableName).add(e);n.onerror=function(e){console.error("Unable to add data to database!"),t&&t(!1)},n.onsuccess=function(e){t&&t(!0)}}else t&&t(i)}))},r.idb.put=function(e,t){r.idb._open((function(i){if(i){var n=r.idb.db.transaction([r.idb.tableName],"readwrite").objectStore(r.idb.tableName).put(e);n.onerror=function(e){console.error("Unable to put data to database!"),t&&t(!1)},n.onsuccess=function(e){t&&t(!0)}}else t&&t(!1)}))},r.idb.delete=function(e,t){r.idb._open((function(i){if(i){var n=r.idb.db.transaction([r.idb.tableName],"readwrite").objectStore(r.idb.tableName).delete(e);n.onerror=function(e){console.error("Unable to retrieve data from database!"),t&&t(!1)},n.onsuccess=function(e){n.error?t&&t(!1):t&&t(!0)}}else t&&t(!1)}))},r.toolbarUI=function(){},r.toolbarUI.expandAllIcon='<svg style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="4" markerHeight="4" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#757575" /></marker><line x1="11" y1="11" x2="6" y2="6" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><line x1="21" y1="11" x2="26" y2="6" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><line x1="21" y1="21" x2="26" y2="26" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><line x1="11" y1="21" x2="6" y2="26" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><rect x="12" y="12" width="8" height="8" fill="#757575"></rect></svg>',r.toolbarUI.fitIcon='<svg  style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M4,11 L4,4 L11,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,11 L28,4 L21,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,21 L28,28 L21,28"></path><path stroke-width="3" fill="none" stroke="#757575" d="M4,21 L4,28 L11,28"></path><circle cx="16" cy="16" r="5" fill="#757575"></circle></svg>',r.toolbarUI.openFullScreenIcon='<svg  style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M4,11 L4,4 L11,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,11 L28,4 L21,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,21 L28,28 L21,28"></path><path stroke-width="3" fill="none" stroke="#757575" d="M4,21 L4,28 L11,28"></path><line x1="5" y1="5" x2="27" y2="27" stroke-width="3" stroke="#757575"></line><line x1="5" y1="27" x2="27" y2="5" stroke-width="3" stroke="#757575"></line></svg>',r.toolbarUI.closeFullScreenIcon='<svg  style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M4,11 L4,4 L11,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,11 L28,4 L21,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,21 L28,28 L21,28"></path><path stroke-width="3" fill="none" stroke="#757575" d="M4,21 L4,28 L11,28"></path><rect x="11" y="11" width="10" height="10" stroke-width="3" fill="none" stroke="#757575" ></rect></svg>',r.toolbarUI.zoomInIcon='<svg style="box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border-left: 1px solid #cacaca; border-right: 1px solid #cacaca; border-top: 1px solid #cacaca; background-color: #f9f9f9;display: block; cursor: pointer;" width="32px" height="32px" ><g><rect fill="#f9f9f9" x="0" y="0" width="32" height="32" ></rect><line x1="8" y1="16" x2="24" y2="16" stroke-width="3" stroke="#757575"></line><line x1="16" y1="8" x2="16" y2="24" stroke-width="3" stroke="#757575"></line></g><line x1="4" y1="32" x2="28" y2="32" stroke-width="1" stroke="#cacaca"></line></svg>',r.toolbarUI.zoomOutIcon='<svg style="box-shadow: 0px 1px 4px rgba(0,0,0,0.3); margin-bottom:7px; border-left: 1px solid #cacaca; border-right: 1px solid #cacaca; border-bottom: 1px solid #cacaca; background-color: #f9f9f9;display: block; cursor: pointer;" width="32px" height="32px" ><g><rect fill="#f9f9f9" x="0" y="0" width="32" height="32" ></rect><line x1="8" y1="16" x2="24" y2="16" stroke-width="3" stroke="#757575"></line></g></svg>',r.toolbarUI.layoutIcon="<svg "+r.attr.tlbr+'="layout" style="box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M8,24 L16,14 L24,24"></path><path stroke-width="3" fill="none" stroke="#757575" d="M8,16 L16,8 L24,16"></path></svg>',r.toolbarUI.prototype.init=function(e,t){if(t){this.obj=e,this.toolbar=t,this._visible=!1,this.div=document.createElement("div"),this.div.classList.add("bft-toolbar-container"),Object.assign(this.div.style,{position:"absolute",padding:"3px",right:this.obj.config.padding-10+"px",bottom:this.obj.config.padding-10+"px"}),t.expandAll&&(this.div.innerHTML+="<div "+r.attr.tlbr+'="expand">'+r.toolbarUI.expandAllIcon+"</div>"),t.fit&&(this.div.innerHTML+="<div "+r.attr.tlbr+'="fit">'+r.toolbarUI.fitIcon+"</div>"),t.zoom&&(this.div.innerHTML+="<div "+r.attr.tlbr+'="plus">'+r.toolbarUI.zoomInIcon+"</div>",this.div.innerHTML+="<div "+r.attr.tlbr+'="minus">'+r.toolbarUI.zoomOutIcon+"</div>"),t.layout&&(this.div.innerHTML+="<div "+r.attr.tlbr+'="layout">'+r.toolbarUI.layoutIcon+"</div>",this.layouts=document.createElement("div"),this.layouts.innerHTML="<svg "+r.attr.layout+'="normal" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="41" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line><line stroke="#000000" x1="32" x2="88" y1="35" y2="35" stroke-width="1"></line><line stroke="#000000" x1="32" x2="32" y1="35" y2="41" stroke-width="1"></line><line stroke="#000000" x1="88" x2="88" y1="35" y2="41" stroke-width="1"></line></svg><svg '+r.attr.layout+'="treeRightOffset" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="40" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="40" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line><line stroke="#000000" x1="60" x2="35" y1="35" y2="35" stroke-width="1"></line><line stroke="#000000" x1="35" x2="35" y1="35" y2="86" stroke-width="1"></line><line stroke="#000000" x1="35" x2="40" y1="86" y2="86" stroke-width="1"></line><line stroke="#000000" x1="35" x2="40" y1="54" y2="54" stroke-width="1"></line></svg><svg '+r.attr.layout+'="treeLeftOffset" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="30" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="30" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line><line stroke="#000000" x1="60" x2="85" y1="35" y2="35" stroke-width="1"></line><line stroke="#000000" x1="85" x2="85" y1="35" y2="86" stroke-width="1"></line><line stroke="#000000" x1="80" x2="85" y1="86" y2="86" stroke-width="1"></line><line stroke="#000000" x1="80" x2="85" y1="54" y2="54" stroke-width="1"></line></svg><svg '+r.attr.layout+'="mixed" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="35" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="35" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="41" stroke-width="1"></line><line stroke="#000000" x1="60" x2="60" y1="68" y2="73" stroke-width="1"></line></svg><svg '+r.attr.layout+'="tree" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="73" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="86" stroke-width="1"></line><line stroke="#000000" x1="57" x2="63" y1="54" y2="54" stroke-width="1"></line><line stroke="#000000" x1="57" x2="63" y1="86" y2="86" stroke-width="1"></line></svg>',this.obj.element.appendChild(this.layouts),Object.assign(this.layouts.style,{position:"absolute",width:"100%",left:"0",bottom:"-145px","box-shadow":"0px 1px 4px rgba(0,0,0,0.3)","background-color":"#f9f9f9",height:"123px","padding-top":"20px","border-top":"1px solid #cacaca"})),t.fullScreen&&(this.div.innerHTML+="<div "+r.attr.tlbr+'="fullScreen">'+r.toolbarUI.openFullScreenIcon+"</div>"),this.obj.element.appendChild(this.div),this.layoutBtn=this.div.querySelector("["+r.attr.tlbr+'="layout"]');var i=this.div.querySelector("["+r.attr.tlbr+'="plus"]'),n=this.div.querySelector("["+r.attr.tlbr+'="minus"]'),o=this.div.querySelector("["+r.attr.tlbr+'="fit"]'),a=this.div.querySelector("["+r.attr.tlbr+'="fullScreen"]'),l=this.div.querySelector("["+r.attr.tlbr+'="expand"]'),s=this;i&&i.addEventListener("click",(function(){s.obj.zoom(!0,null,!0)})),n&&n.addEventListener("click",(function(){s.obj.zoom(!1,null,!0)})),o&&o.addEventListener("click",(function(){s.obj.fit()})),a&&a.addEventListener("click",(function(){s.obj.toggleFullScreen()})),l&&l.addEventListener("click",(function(){s.obj.expand(null,"all")})),this.layoutBtn&&this.layoutBtn.addEventListener("click",(function(){s._visible?s.hideLayout():s.showLayout()})),this.layouts&&this.layouts.addEventListener("click",(function(e){for(var t=e.target;t;){if(t.hasAttribute&&t.hasAttribute(r.attr.layout)){t=t.getAttribute(r.attr.layout),s.obj.setLayout(r[t]);break}t=t.parentNode}}))}},r.toolbarUI.prototype.showLayout=function(){this._visible=!0,this.layoutBtn.style.transform="rotate(180deg) translateX(0px) translateY(0px)",r.animate(this.div,{bottom:this.obj.config.padding-10},{bottom:this.obj.config.padding+135},this.obj.config.anim.duration,this.obj.config.anim.func),r.animate(this.layouts,{bottom:-145},{bottom:0},this.obj.config.anim.duration,this.obj.config.anim.func)},r.toolbarUI.prototype.hideLayout=function(){this._visible=!1,this.layoutBtn.style.transform="rotate(0deg) translateX(0px) translateY(0px)",r.animate(this.div,{bottom:this.obj.config.padding+135},{bottom:this.obj.config.padding-10},this.obj.config.anim.duration,this.obj.config.anim.func),r.animate(this.layouts,{bottom:0},{bottom:-145},this.obj.config.anim.duration,this.obj.config.anim.func)},r.notifierUI=function(){},r.notifierUI.prototype.init=function(e){this.obj=e},r.notifierUI.prototype.show=function(e,t){if(null==e)return!1;1==e&&(e=r.MAX_NODES_MESS,t="#FFCA28"),2==e&&(e=r.OFFLINE_MESS,t="#FFCA28");var i=document.createElement("div");i.innerHTML=e,Object.assign(i.style,{position:"absolute","background-color":t,color:"#ffffff",padding:"15px","border-radius":"40px",opacity:0,overflow:"hidden","white-space":"nowrap","text-align":"center"}),this.obj.element.appendChild(i);var n=this.obj.width()/2-i.offsetWidth/2,o=this.obj.height()/2-i.offsetHeight/2;i.style.left=n+"px",i.style.top=o+"px";var a=i.offsetWidth;return i.style.width="20px",r.animate(i,{opacity:0,width:10},{opacity:1,width:a},this.obj.config.anim.duration,this.obj.config.anim.func),!0},void 0===r&&(r={}),r._validateConfig=function(e){return!!e||(console.error("config is not defined"),!1)},r._arrayContains=function(e,t){if(e&&Array.isArray(e))for(var i=e.length;i--;)if(e[i]===t)return!0;return!1},r._interceptions=function(e,t){if(!e)return[];if(!t)return[];var i=[];if(Array.isArray(e)&&Array.isArray(t))for(var n in e)for(var r in t)e[n]==t[r]&&i.push(e[n]);else if(Array.isArray(e)&&!Array.isArray(t))for(var n in e)for(var r in t)e[n]==r&&i.push(e[n]);else if(!Array.isArray(e)&&Array.isArray(t))for(var n in e)for(var r in t)n==t[r]&&i.push(t[r]);return i},r._getTags=function(e){return e.tags&&!Array.isArray(e.tags)?e.tags.split(","):e.tags&&Array.isArray(e.tags)?e.tags:[]},r._centerPointInPercent=function(e,t,i){var n=e.getBoundingClientRect(),r=t-n.left,o=i-n.top;return[r/(n.width/100),o/(n.height/100)]},r._trim=function(e){return e.replace(/^\s+|\s+$/g,"")},r._getTransform=function(e){var t=e.getAttribute("transform");return t=t.replace("matrix","").replace("(","").replace(")",""),r._browser().msie&&(t=t.replace(/ /g,",")),t="["+(t=r._trim(t))+"]",JSON.parse(t)},r.getScale=function(e,t,i,n,o,a,l,s){var d=1;if(e||n!==r.match.boundary)if(e||n!==r.match.width)if(e||n!==r.match.height)if(e){var c,p;d=(c=t/e[2])>(p=i/e[3])?p:c}else d=n;else d=i/s;else d=t/l;else d=(c=t/l)>(p=i/s)?p:c;return d&&d>o&&(d=o),d&&d<a&&(d=a),d},r.isObject=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&null!==e},r.fileUploadDialog=function(e){var t=document.createElement("INPUT");t.setAttribute("type","file"),t.style.display="none",t.onchange=function(){var t=this.files[0];e(t)},document.body.appendChild(t),t.click()},r.mergeDeep=function(e,t){if(r.isObject(e)&&r.isObject(t))for(var i in t)r.isObject(t[i])?(e[i]||Object.assign(e,{[i]:{}}),r.mergeDeep(e[i],t[i])):Object.assign(e,{[i]:t[i]});return e},r._lblIsImg=function(e,t){return!(!e.nodeBinding||"string"!=typeof t||-1==t.indexOf("img")||!e.nodeBinding[t])},r._getFistImgField=function(e){if(e.nodeBinding)for(var t in e.nodeBinding)if(-1!=t.indexOf("img"))return e.nodeBinding[t];return!1},r._fieldIsImg=function(e,t){if(e.nodeBinding)for(var i in e.nodeBinding)if(e.nodeBinding[i]==t)return r._lblIsImg(e,i);return!1},r._guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},r.htmlRipple=function(e){var t=document.createElement("style");t.type="text/css",t.innerHTML=" .bft-ripple-container {position: absolute; top: 0; right: 0; bottom: 0; left: 0; } .bft-ripple-container span {transform: scale(0);border-radius:100%;position:absolute;opacity:0.75;background-color:#fff;animation: bft-ripple 1000ms; }@-moz-keyframes bft-ripple {to {opacity: 0;transform: scale(2);}}@-webkit-keyframes bft-ripple {to {opacity: 0;transform: scale(2);}}@-o-keyframes bft-ripple {to {opacity: 0;transform: scale(2);}}@keyframes bft-ripple {to {opacity: 0;transform: scale(2);}}",document.head.appendChild(t);var i,n,r=document.createElement("div");r.className="bft-ripple-container",e.addEventListener("mousedown",(function(t){var i,n,r,o,a;return n=document.createElement("span"),r=this.offsetWidth,i=this.getBoundingClientRect(),a=t.pageX-i.left-r/2,o="top:"+(t.pageY-i.top-r/2)+"px; left: "+a+"px; height: "+r+"px; width: "+r+"px;",e.rippleContainer.appendChild(n),n.setAttribute("style",o)})),e.addEventListener("mouseup",(i=function(){for(;this.rippleContainer.firstChild;)this.rippleContainer.removeChild(this.rippleContainer.firstChild)},2e3,n=void 0,function(){var e,t;return t=this,e=arguments,clearTimeout(n),n=setTimeout((function(){return i.apply(t,e)}),2e3)})),e.rippleContainer=r,e.appendChild(r)},r._moveToBoundaryArea=function(e,t,i,n){var o=t.slice(0);t[0]<i.left&&t[0]<i.right&&(o[0]=i.left>i.right?i.right:i.left),t[0]>i.right&&t[0]>i.left&&(o[0]=i.left>i.right?i.left:i.right),t[1]<i.top&&t[1]<i.bottom&&(o[1]=i.top>i.bottom?i.bottom:i.top),t[1]>i.bottom&&t[1]>i.top&&(o[1]=i.top>i.bottom?i.top:i.bottom),t[0]!==o[0]||t[1]!==o[1]?r.animate(e,{viewBox:t},{viewBox:o},300,r.anim.outPow,(function(){n&&n()})):n&&n()},r.randomId=function(){return"_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4)},r._getClientXY=function(e){return-1==e.type.indexOf("touch")?{x:e.clientX,y:e.clientY}:e.changedTouches.length?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:void 0},r._getClientTouchesXY=function(e,t){return-1!=e.type.indexOf("touch")?e.touches.length<t+1?{x:null,y:null}:{x:e.touches[t].clientX,y:e.touches[t].clientY}:{x:e.clientX,y:e.clientY}},r._getOffset=function(e,t){e&&(t.x+=e.offsetLeft,t.y+=e.offsetTop,r._getOffset(e.offsetParent,t))},r._getTopLeft=function(e){var t={x:0,y:0};return r._getOffset(e,t),t},r._getOffsetXY=function(e,t){if(-1==t.type.indexOf("touch"))return{x:t.offsetX,y:t.offsetY};if(t.touches.length){var i=r._getTopLeft(e);return{x:t.touches[0].pageX-i.x,y:t.touches[0].pageY-i.y}}return t.changedTouches.length?(i=r._getTopLeft(e),{x:t.changedTouches[0].pageX-i.x,y:t.changedTouches[0].pageY-i.y}):void 0},r._pinchMiddlePointInPercent=function(e,t,i,n){var o=r._getTopLeft(e),a=n.touches[0].pageX-o.x,l=n.touches[0].pageY-o.y,s=n.touches[1].pageX-o.x,d=n.touches[1].pageY-o.y;return[((a-s)/2+s)/(t/100),((l-d)/2+d)/(i/100)]},r._browser=function(){var e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t="undefined"!=typeof InstallTrigger,i=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString(),n=!!document.documentMode,r=!n&&!!window.StyleMedia,o=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime);return{opera:e,firefox:t,safari:i,msie:n,edge:r,chrome:o,blink:(o||e)&&!!window.CSS}},r._menuPosition=function(e,t,i){var n=e.getBoundingClientRect(),r=i.getBoundingClientRect(),o=t.getBoundingClientRect(),a=n.left-r.left,l=n.top-r.top;return n.top+o.height>r.top+r.height&&(l-=o.height),n.left-o.width<r.left&&(a+=o.width),{x:a,y:l}},r._getTemplate=function(e,t,i){if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=t[e[n]];if(r&&r.template)return r.template}return i},r._getMin=function(e,t){if(e.tags&&e.tags.length&&t.tags)for(var i=0;i<e.tags.length;i++){var n=t.tags[e.tags[i]];if(n&&!0===n.min)return!0}return t.min},r._getSubLevels=function(e,t){if(e&&e.length)for(var i=0;i<e.length;i++){var n=t[e[i]];if(n&&n.subLevels)return n.subLevels}return 0},r._isHTML=function(e){var t=document.createElement("div");t.innerHTML=e;for(var i=t.childNodes,n=i.length;n--;)if(1==i[n].nodeType)return!0;return!1},r._getTestDiv=function(){var e=document.getElementById("orgfamily_js_test_div");return e||((e=document.createElement("div")).id="orgfamily_js_test_div",e.style.position="fixed",e.style.top="-10000px",e.style.left="-10000px",document.body.appendChild(e)),e},r._getLabelSize=function(e){var t=r._getTestDiv();return t.innerHTML="<svg>"+e+"</svg>",t.querySelector("text").getBoundingClientRect()},r.wrapText=function(e,t){var i=t.toLowerCase();if(-1==i.indexOf("<text"))return e;if(-1==i.indexOf(r.attr.width))return e;if(-1!=i.indexOf("foreignobject"))return e;if(-1==t.indexOf(r.attr.width))return e;if(r._isHTML(e))return e;var n=r._getTestDiv();t=t.replaceAll("{cw}",0),n.innerHTML="<svg>"+t+"</svg>";var o,a,l=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("text")[0],s=parseFloat(l.getAttribute("x")),d=parseFloat(l.getAttribute("y")),c=l.getAttribute("text-anchor"),p=l.getAttribute(r.attr.width),h=l.getAttribute(r.attr.text_overflow),f="http://www.w3.org/2000/svg",u=n.getElementsByTagName("svg")[0].getElementsByTagName("text")[0];h||(h="ellipsis");var g=h.split("-");if(g.length>1&&(o=parseInt(h.split("-")[1]),g.length>2&&"ellipsis"==g[2]&&(a=!0)),!p)return e;if(p=parseFloat(p),s||(s=0),d||(d=0),s||(c="start"),"ellipsis"==h){u.removeChild(u.firstChild),u.textContent=e;for(var m=u.getComputedTextLength(),b=2;m>p;)u.textContent=e.substring(0,e.length-b),u.textContent+="...",m=u.getComputedTextLength(),b++;return b>2?"<title>"+e+"</title>"+u.textContent:e}if(-1!=h.indexOf("multiline")){var v=e.split(" "),y=u.getBBox().height;u.textContent="";var x=document.createElementNS(f,"tspan"),_=document.createTextNode(v[0]);x.setAttributeNS(null,"x",s),x.setAttributeNS(null,"y",d),x.setAttributeNS(null,"text-anchor",c),x.appendChild(_),u.appendChild(x),b=1;for(var w=1,k=1;k<v.length;k++){var S=x.firstChild.data.length;if(x.firstChild.data+=" "+v[k],x.getComputedTextLength()>p){if(x.firstChild.data=x.firstChild.data.slice(0,S),w++,o&&w>o){if(a&&u.children.length==o){var C=u.children[o-1].textContent;u.children[o-1].textContent=C.substring(0,C.length-3)+"..."}break}(x=document.createElementNS(f,"tspan")).setAttributeNS(null,"x",s),x.setAttributeNS(null,"y",d+y*b),x.setAttributeNS(null,"text-anchor",c),_=document.createTextNode(v[k]),x.appendChild(_),u.appendChild(x),b++}}var I="";if(null!=u.innerHTML)I=u.innerHTML,u.innerHTML="";else{var N="";for(k=u.childNodes.length-1;k>=0;k--)N=XMLSerializer().serializeToString(u.childNodes[k])+N,u.removeChild(u.childNodes[k]);I=N}return I}},r._downloadFile=function(e,t,i,n){var r=new Blob([t],{type:e});if(1==n){var o=URL.createObjectURL(r);window.open(o,"_blank").focus()}else if(navigator.msSaveBlob)navigator.msSaveBlob(r,i);else{var a=document.createElement("a");void 0!==a.download&&(o=URL.createObjectURL(r),a.setAttribute("href",o),a.setAttribute("download",i),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a))}},r._getPosition=function(e,t,i,n){var r={x:t.x,y:t.y};if(null!=i&&(r.x=i),null!=n&&(r.y=i),e&&3==e.length){var o=e[0].indexOf(t.id);-1!=o&&null!=e[1][o].transform&&(null==i&&(r.x=e[1][o].transform[4]),null==n&&(r.y=e[1][o].transform[5]))}return r},r._getOpacity=function(e,t){var i=1;if(e&&3==e.length){var n=e[0].indexOf(t.id);-1!=n&&null!=e[1][n].opacity&&(i=e[1][n].opacity)}return i},r.t=function(e,t,i){var n=r.templates[e],o=null;if(null!=i&&n.scaleLessThen){var a=[];for(var l in n.scaleLessThen){var s=parseFloat(l);i<s&&a.push(s)}if(a.length>0){a.sort((function(e,t){return e-t}));var d=n.scaleLessThen[a[0]];for(var c in d)null==o&&(o=Object.assign({},n)),o[c]=d[c]}}return t?null==o?n.min?n.min:n:o.min?o.min:o:null==o?n:o},r.setNodeSize=function(e){var t=r.t(e.templateName,e.min);e.w=t&&t.size?t.size[0]:0,e.h=t&&t.size?t.size[1]:0},r._imgs2base64=function(e,t,i,n){var o=e.getElementsByTagName(t),a=o.length;0==a&&n();for(var l=0;l<a;l++)!function(){var e=l,t=o[e];r._getDataUri(t.getAttribute(i),(function(r){r.success&&t.setAttribute(i,r.result),e==a-1&&n()}))}()},r._getDataUri=function(e,t){if(-1!=e.indexOf("base64"))t({success:!1});else{var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){200===i.status?n.readAsDataURL(i.response):404===i.status&&t({success:!1,result:i.status})};var n=new FileReader;n.onloadend=function(){t({success:!0,result:n.result})},i.send()}},r._convertStringToArray=function(e,t){return-1!=r.ARRAY_FIELDS.indexOf(e)?r.isNEU(t)?[]:t.split(","):t},r._convertArrayToString=function(e){return!r.isNEU(e)&&Array.isArray(e)?e.join():e},r._csvToArray=function(e,t){t=t||r.CSV_DELIMITER;for(var i=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),n=[[]],o=null;o=i.exec(e);){var a,l=o[1];l.length&&l!==t&&n.push([]),a=o[2]?o[2].replace(new RegExp('""',"g"),'"'):o[3],n[n.length-1].push(a)}return n},r._json2xml=function(e){for(var t=document.implementation.createDocument("","",null),i=t.createElement("nodes"),n=0;n<e.length;n++){var o=t.createElement("node"),a=e[n];for(var l in a){var s=a[l];o.setAttribute(l,r._convertArrayToString(s))}i.appendChild(o)}return t.appendChild(i),'<?xml version="1.0" encoding="utf-8" ?>'+(new XMLSerializer).serializeToString(t.documentElement)},r._xml2json=function(e){for(var t=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("node"),i=[],n=0;n<t.length;n++){for(var o=t[n],a={},l=0;l<o.attributes.length;l++){var s=o.attributes[l];a[s.name]=r._convertStringToArray(s.name,s.value)}i.push(a)}return i},r._json2csv=function(e){for(var t=[],i=function(e){for(var i="",n=0;n<t.length;n++){var o;(o="reportsTo"==t[n]?null:null==e[t[n]]?"":e[t[n]])instanceof Date&&(o=o.toLocaleString());var a=(o=null===o?"":o.toString()).replace(/"/g,'""'),l=new RegExp('("|;|\n)',"g");a.search(l)>=0&&(a='"'+a+'"'),n>0&&(i+=r.CSV_DELIMITER),i+=a}return i+"\n"},n="",o=0;o<e.length;o++)for(var a in e[o])r._arrayContains(t,a)||(t.push(a),n+=a+r.CSV_DELIMITER);for(n=n.substring(0,n.length-1),n+="\n",o=0;o<e.length;o++)n+=i(e[o]);return n.substring(0,n.length-1)},r.accentFold=function(e){return(e=e.toString().toLowerCase()).replace(/([àáâãäå])|([ç])|([èéêë])|([ìíîï])|([ñ])|([òóôõöø])|([ß])|([ùúûü])|([ÿ])|([æ])/g,(function(e,t,i,n,r,o,a,l,s,d,c){return t?"a":i?"c":n?"e":r?"i":o?"n":a?"o":l?"s":s?"u":d?"y":c?"ae":void 0}))},r.copy=function(e){if(null===e||"object"!=typeof e||"isActiveClone"in e)return e;if(e instanceof Date)var t=new e.constructor;else t=e.constructor();for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(e.isActiveClone=null,t[i]=r.copy(e[i]),delete e.isActiveClone);return t},r._getScrollSensitivity=function(){var e=r._browser();return e.msie&&r.scroll.ie?r.scroll.ie:e.edge&&r.scroll.edge?r.scroll.edge:e.safari&&r.scroll.safari?r.scroll.safari:e.chrome&&r.scroll.chrome?r.scroll.chrome:e.firefox&&r.scroll.firefox?r.scroll.firefox:e.opera&&r.scroll.opera?r.scroll.opera:{smooth:r.scroll.smooth,speed:r.scroll.speed}},r.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},r.isTrial=function(){return void 0!==r.remote},r.childrenCount=function(e,t,i){null==i&&(i=0);for(var n=0;n<t.childrenIds.length;n++){var o=e.nodes[t.childrenIds[n]];o&&(i++,r.childrenCount(e,o,i))}return i},r.collapsedChildrenCount=function(e,t,i){null==i&&(i=0);for(var n=0;n<t.childrenIds.length;n++){var o=e.nodes[t.childrenIds[n]];o&&(!0===o.collapsed&&i++,r.collapsedChildrenCount(e,o,i))}return i},r._setMinMaxXY=function(e,t){(null==t.minX||null!=e.x&&e.x<t.minX)&&(t.minX=e.x),(null==t.minY||null!=e.y&&e.y<t.minY)&&(t.minY=e.y),(null==t.maxX||null!=e.x&&e.x+e.w>t.maxX)&&(t.maxX=e.x+e.w),(null==t.maxY||null!=e.y&&e.y+e.h>t.maxY)&&(t.maxY=e.y+e.h)},r.getStParentNodes=function(e,t){for(t||(t=[]);e.parent;)e=e.parent;return e.stParent&&(t.push(e.stParent),r.getStParentNodes(e.stParent,t)),t},r.getRootOf=function(e){for(;e&&e.parent;)e=e.parent;return e},r._getViewBox=function(e){var t=null;return e?(t=(t="["+(t=e.getAttribute("viewBox"))+"]").replace(/\ /g,","),t=JSON.parse(t)):null},r.isNEU=function(e){return null==e||""===e},r.gradientCircleForDefs=function(e,t,i,n){function r(e,t,i,n){var r=(n-90)*Math.PI/180;return{x:e+i*Math.cos(r),y:t+i*Math.sin(r)}}function o(e,t,i,n,o){var a=r(e,t,i,o),l=r(e,t,i,n),s=o-n<=180?"0":"1";return["M",a.x,a.y,"A",i,i,0,s,0,l.x,l.y].join(" ")}return Array.isArray(t)||(t=[t,t,t,t,t,t]),`<linearGradient id="${e}_linearColors1" x1="0" y1="0" x2="1" y2="1">\n            <stop offset="0%" stop-color="${t[0]}"></stop>\n            <stop offset="100%" stop-color="${t[1]}"></stop>\n        </linearGradient>\n        <linearGradient id="${e}_linearColors2" x1="0.5" y1="0" x2="0.5" y2="1">\n            <stop offset="0%" stop-color="${t[1]}"></stop>\n            <stop offset="100%" stop-color="${t[2]}"></stop>\n        </linearGradient>\n        <linearGradient id="${e}_linearColors3" x1="1" y1="0" x2="0" y2="1">\n            <stop offset="0%" stop-color="${t[2]}"></stop>\n            <stop offset="100%" stop-color="${t[3]}"></stop>\n        </linearGradient>\n        <linearGradient id="${e}_linearColors4" x1="1" y1="1" x2="0" y2="0">\n            <stop offset="0%" stop-color="${t[3]}"></stop>\n            <stop offset="100%" stop-color="${t[4]}"></stop>\n        </linearGradient>\n        <linearGradient id="${e}_linearColors5" x1="0.5" y1="1" x2="0.5" y2="0">\n            <stop offset="0%" stop-color="${t[4]}"></stop>\n            <stop offset="100%" stop-color="${t[5]}"></stop>\n        </linearGradient>\n        <linearGradient id="${e}_linearColors6" x1="0" y1="1" x2="1" y2="0">\n            <stop offset="0%" stop-color="${t[5]}"></stop>\n            <stop offset="100%" stop-color="${t[0]}"></stop>\n        </linearGradient>        \n        <g id="${e}">\n            <path stroke-width="${n}" fill="none" stroke="url(#${e}_linearColors1)" d="${o(i,i,i,1,60)}"  />\n            <path stroke-width="${n}" fill="none" stroke="url(#${e}_linearColors2)" d="${o(i,i,i,60,120)}"/>\n            <path stroke-width="${n}" fill="none" stroke="url(#${e}_linearColors3)" d="${o(i,i,i,120,180)}" />\n            <path stroke-width="${n}" fill="none" stroke="url(#${e}_linearColors4)" d="${o(i,i,i,180,240)}" />\n            <path stroke-width="${n}" fill="none" stroke="url(#${e}_linearColors5)" d="${o(i,i,i,240,300)}" />\n            <path stroke-width="${n}" fill="none" stroke="url(#${e}_linearColors6)" d="${o(i,i,i,300,1)}"/>\n        </g>`},r._intersectionObserver=function(e,t){"function"==typeof IntersectionObserver?new IntersectionObserver((function(e,i){e.forEach((function(e){t(e.intersectionRatio>0)}))})).observe(e):t(!0)},r.convertCsvToNodes=function(e){for(var t=r._csvToArray(e),i=t[0],n=[],o=1;o<t.length;o++){for(var a={},l=0;l<t[o].length;l++){var s=i[l],d=t[o][l];a[i[l]]=r._convertStringToArray(s,d)}""!=a.id.trim()&&n.push(a)}return n},r._changeRootOption=function(e,t,i){for(var n=[],r=0;r<t.length;r++)for(var o=0;o<i.length;o++)if(i[o].has(t[r])){n=i[o];break}for(r=0;r<n.length;r++){var a=e.indexOf(n[r]);-1!=a&&e.splice(a,1)}t.length&&e.push(t[0])},r._convertStringToArrayOnImport=function(e,t){return"tags"==e||"pids"==e?r.isNEU(t)?[]:t.split(","):t},r.icon={},r.icon.png=function(e,t,i){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 550.801 550.801"><path fill="'+i+'" d="M146.747,276.708c0-13.998-9.711-22.352-26.887-22.352c-6.99,0-11.726,0.675-14.204,1.355v44.927 c2.932,0.676,6.539,0.896,11.52,0.896C135.449,301.546,146.747,292.28,146.747,276.708z"/><path fill="'+i+'" d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694 c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419 c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545 c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M234.344,335.86v45.831h-31.601V229.524h40.184 l31.611,55.759c9.025,16.031,18.064,34.983,24.825,52.154h0.675c-2.257-20.103-2.933-40.643-2.933-63.44v-44.473h31.614v152.167 h-36.117l-32.516-58.703c-9.049-16.253-18.971-35.892-26.438-53.727l-0.665,0.222C233.906,289.58,234.344,311.027,234.344,335.86z M71.556,381.691V231.56c10.613-1.804,25.516-3.159,46.506-3.159c21.215,0,36.353,4.061,46.509,12.192 c9.698,7.673,16.255,20.313,16.255,35.219c0,14.897-4.959,27.549-13.999,36.123c-11.738,11.063-29.123,16.031-49.441,16.031 c-4.522,0-8.593-0.231-11.736-0.675v54.411H71.556V381.691z M453.601,523.353H97.2V419.302h356.4V523.353z M485.652,374.688 c-10.61,3.607-30.713,8.585-50.805,8.585c-27.759,0-47.872-7.003-61.857-20.545c-13.995-13.1-21.684-32.97-21.452-55.318 c0.222-50.569,37.03-79.463,86.917-79.463c19.644,0,34.783,3.829,42.219,7.446l-7.214,27.543c-8.369-3.617-18.752-6.55-35.458-6.55 c-28.656,0-50.341,16.256-50.341,49.22c0,31.382,19.649,49.892,47.872,49.892c7.895,0,14.218-0.901,16.934-2.257v-31.835h-23.493 v-26.869h56.679V374.688z"/></svg>'},r.icon.pdf=function(e,t,i){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 550.801 550.801"><path fill="'+i+'" d="M160.381,282.225c0-14.832-10.299-23.684-28.474-23.684c-7.414,0-12.437,0.715-15.071,1.432V307.6 c3.114,0.707,6.942,0.949,12.192,0.949C148.419,308.549,160.381,298.74,160.381,282.225z"/><path fill="'+i+'" d="M272.875,259.019c-8.145,0-13.397,0.717-16.519,1.435v105.523c3.116,0.729,8.142,0.729,12.69,0.729 c33.017,0.231,54.554-17.946,54.554-56.474C323.842,276.719,304.215,259.019,272.875,259.019z"/><path fill="'+i+'" d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694 c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419 c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545 c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M362.359,309.023c0,30.876-11.243,52.165-26.82,65.333 c-16.971,14.117-42.82,20.814-74.396,20.814c-18.9,0-32.297-1.197-41.401-2.389V234.365c13.399-2.149,30.878-3.346,49.304-3.346 c30.612,0,50.478,5.508,66.039,17.226C351.828,260.69,362.359,280.547,362.359,309.023z M80.7,393.499V234.365 c11.241-1.904,27.042-3.346,49.296-3.346c22.491,0,38.527,4.308,49.291,12.928c10.292,8.131,17.215,21.534,17.215,37.328 c0,15.799-5.25,29.198-14.829,38.285c-12.442,11.728-30.865,16.996-52.407,16.996c-4.778,0-9.1-0.243-12.435-0.723v57.67H80.7 V393.499z M453.601,523.353H97.2V419.302h356.4V523.353z M484.898,262.127h-61.989v36.851h57.913v29.674h-57.913v64.848h-36.593 V232.216h98.582V262.127z"/></svg>'},r.icon.svg=function(e,t,i){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 550.801 550.801"><path fill="'+i+'" d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694 c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419 c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545 c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M338.871,225.672L284.545,386.96h-42.591 l-51.69-161.288h39.967l19.617,68.196c5.508,19.143,10.531,37.567,14.36,57.67h0.717c4.061-19.385,9.089-38.527,14.592-56.953 l20.585-68.918h38.77V225.672z M68.458,379.54l7.415-30.153c9.811,5.021,24.888,10.051,40.439,10.051 c16.751,0,25.607-6.935,25.607-17.465c0-10.052-7.662-15.795-27.05-22.734c-26.8-9.328-44.263-24.168-44.263-47.611 c0-27.524,22.971-48.579,61.014-48.579c18.188,0,31.591,3.823,41.159,8.131l-8.126,29.437c-6.465-3.116-17.945-7.657-33.745-7.657 c-15.791,0-23.454,7.183-23.454,15.552c0,10.296,9.089,14.842,29.917,22.731c28.468,10.536,41.871,25.365,41.871,48.094 c0,27.042-20.812,50.013-65.09,50.013C95.731,389.349,77.538,384.571,68.458,379.54z M453.601,523.353H97.2V419.302h356.4V523.353z M488.911,379.54c-11.243,3.823-32.537,9.103-53.831,9.103c-29.437,0-50.73-7.426-65.57-21.779 c-14.839-13.875-22.971-34.942-22.738-58.625c0.253-53.604,39.255-84.235,92.137-84.235c20.81,0,36.852,4.073,44.74,7.896 l-7.657,29.202c-8.859-3.829-19.849-6.95-37.567-6.95c-30.396,0-53.357,17.233-53.357,52.173c0,33.265,20.81,52.882,50.73,52.882 c8.375,0,15.072-0.96,17.94-2.395v-33.745h-24.875v-28.471h60.049V379.54L488.911,379.54z" /></svg>'},r.icon.csv=function(e,t,i){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 548.29 548.291" ><path fill="'+i+'" d="M486.2,196.121h-13.164V132.59c0-0.399-0.064-0.795-0.116-1.2c-0.021-2.52-0.824-5-2.551-6.96L364.656,3.677 c-0.031-0.034-0.064-0.044-0.085-0.075c-0.629-0.707-1.364-1.292-2.141-1.796c-0.231-0.157-0.462-0.286-0.704-0.419 c-0.672-0.365-1.386-0.672-2.121-0.893c-0.199-0.052-0.377-0.134-0.576-0.188C358.229,0.118,357.4,0,356.562,0H96.757 C84.893,0,75.256,9.649,75.256,21.502v174.613H62.093c-16.972,0-30.733,13.756-30.733,30.73v159.81 c0,16.966,13.761,30.736,30.733,30.736h13.163V526.79c0,11.854,9.637,21.501,21.501,21.501h354.777 c11.853,0,21.502-9.647,21.502-21.501V417.392H486.2c16.966,0,30.729-13.764,30.729-30.731v-159.81 C516.93,209.872,503.166,196.121,486.2,196.121z M96.757,21.502h249.053v110.006c0,5.94,4.818,10.751,10.751,10.751h94.973v53.861 H96.757V21.502z M258.618,313.18c-26.68-9.291-44.063-24.053-44.063-47.389c0-27.404,22.861-48.368,60.733-48.368 c18.107,0,31.447,3.811,40.968,8.107l-8.09,29.3c-6.43-3.107-17.862-7.632-33.59-7.632c-15.717,0-23.339,7.149-23.339,15.485 c0,10.247,9.047,14.769,29.78,22.632c28.341,10.479,41.681,25.239,41.681,47.874c0,26.909-20.721,49.786-64.792,49.786 c-18.338,0-36.449-4.776-45.497-9.77l7.38-30.016c9.772,5.014,24.775,10.006,40.264,10.006c16.671,0,25.488-6.908,25.488-17.396 C285.536,325.789,277.909,320.078,258.618,313.18z M69.474,302.692c0-54.781,39.074-85.269,87.654-85.269 c18.822,0,33.113,3.811,39.549,7.149l-7.392,28.816c-7.38-3.084-17.632-5.939-30.491-5.939c-28.822,0-51.206,17.375-51.206,53.099 c0,32.158,19.051,52.4,51.456,52.4c10.947,0,23.097-2.378,30.241-5.238l5.483,28.346c-6.672,3.34-21.674,6.919-41.208,6.919 C98.06,382.976,69.474,348.424,69.474,302.692z M451.534,520.962H96.757v-103.57h354.777V520.962z M427.518,380.583h-42.399 l-51.45-160.536h39.787l19.526,67.894c5.479,19.046,10.479,37.386,14.299,57.397h0.709c4.048-19.298,9.045-38.352,14.526-56.693 l20.487-68.598h38.599L427.518,380.583z" /></svg>'},r.icon.json=function(e,t,i){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 32 32" ><polygon fill="'+i+'"  points="31 11 31 21 29 21 27 15 27 21 25 21 25 11 27 11 29 17 29 11 31 11"/><path fill="'+i+'"  d="M21.3335,21h-2.667A1.6684,1.6684,0,0,1,17,19.3335v-6.667A1.6684,1.6684,0,0,1,18.6665,11h2.667A1.6684,1.6684,0,0,1,23,12.6665v6.667A1.6684,1.6684,0,0,1,21.3335,21ZM19,19h2V13H19Z"/><path fill="'+i+'"  d="M13.3335,21H9V19h4V17H11a2.002,2.002,0,0,1-2-2V12.6665A1.6684,1.6684,0,0,1,10.6665,11H15v2H11v2h2a2.002,2.002,0,0,1,2,2v2.3335A1.6684,1.6684,0,0,1,13.3335,21Z"/><path fill="'+i+'"  d="M5.3335,21H2.6665A1.6684,1.6684,0,0,1,1,19.3335V17H3v2H5V11H7v8.3335A1.6684,1.6684,0,0,1,5.3335,21Z"/><rect fill="'+i+'"  id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" style="fill: none;" width="32" height="32"/></svg>'},r.icon.excel=function(e,t,i){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 512 512"><path fill="#ECEFF1" d="M496,432.011H272c-8.832,0-16-7.168-16-16s0-311.168,0-320s7.168-16,16-16h224 c8.832,0,16,7.168,16,16v320C512,424.843,504.832,432.011,496,432.011z" /><path fill="'+i+'" d="M336,176.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,176.011,336,176.011z" /><path fill="'+i+'" d="M336,240.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,240.011,336,240.011z" /><path fill="'+i+'" d="M336,304.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,304.011,336,304.011z" /><path fill="'+i+'" d="M336,368.011h-64c-8.832,0-16-7.168-16-16s7.168-16,16-16h64c8.832,0,16,7.168,16,16 S344.832,368.011,336,368.011z" /><path fill="'+i+'" d="M432,176.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,176.011,432,176.011z" /><path fill="'+i+'" d="M432,240.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,240.011,432,240.011z" /><path fill="'+i+'" d="M432,304.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,304.011,432,304.011z" /><path fill="'+i+'" d="M432,368.011h-32c-8.832,0-16-7.168-16-16s7.168-16,16-16h32c8.832,0,16,7.168,16,16 S440.832,368.011,432,368.011z" /><path fill="'+i+'"  d="M282.208,19.691c-3.648-3.04-8.544-4.352-13.152-3.392l-256,48C5.472,65.707,0,72.299,0,80.011v352 c0,7.68,5.472,14.304,13.056,15.712l256,48c0.96,0.192,1.952,0.288,2.944,0.288c3.712,0,7.328-1.28,10.208-3.68 c3.68-3.04,5.792-7.584,5.792-12.32v-448C288,27.243,285.888,22.731,282.208,19.691z" /><path fill="#FAFAFA" d="M220.032,309.483l-50.592-57.824l51.168-65.792c5.44-6.976,4.16-17.024-2.784-22.464 c-6.944-5.44-16.992-4.16-22.464,2.784l-47.392,60.928l-39.936-45.632c-5.856-6.72-15.968-7.328-22.56-1.504 c-6.656,5.824-7.328,15.936-1.504,22.56l44,50.304L83.36,310.187c-5.44,6.976-4.16,17.024,2.784,22.464 c2.944,2.272,6.432,3.36,9.856,3.36c4.768,0,9.472-2.112,12.64-6.176l40.8-52.48l46.528,53.152 c3.168,3.648,7.584,5.504,12.032,5.504c3.744,0,7.488-1.312,10.528-3.968C225.184,326.219,225.856,316.107,220.032,309.483z" /></svg>'},r.icon.edit=function(e,t,i){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 528.899 528.899"><path fill="'+i+'" d="M328.883,89.125l107.59,107.589l-272.34,272.34L56.604,361.465L328.883,89.125z M518.113,63.177l-47.981-47.981 c-18.543-18.543-48.653-18.543-67.259,0l-45.961,45.961l107.59,107.59l53.611-53.611 C532.495,100.753,532.495,77.559,518.113,63.177z M0.3,512.69c-1.958,8.812,5.998,16.708,14.811,14.565l119.891-29.069 L27.473,390.597L0.3,512.69z" /></svg>'},r.icon.details=function(e,t,i){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 512 512"><path fill="'+i+'" d="M447.933,103.629c-0.034-3.076-1.224-6.09-3.485-8.352L352.683,3.511c-0.004-0.004-0.007-0.005-0.011-0.008 C350.505,1.338,347.511,0,344.206,0H89.278C75.361,0,64.04,11.32,64.04,25.237v461.525c0,13.916,11.32,25.237,25.237,25.237 h333.444c13.916,0,25.237-11.32,25.237-25.237V103.753C447.96,103.709,447.937,103.672,447.933,103.629z M356.194,40.931 l50.834,50.834h-49.572c-0.695,0-1.262-0.567-1.262-1.262V40.931z M423.983,486.763c0,0.695-0.566,1.261-1.261,1.261H89.278 c-0.695,0-1.261-0.566-1.261-1.261V25.237c0-0.695,0.566-1.261,1.261-1.261h242.94v66.527c0,13.916,11.322,25.239,25.239,25.239 h66.527V486.763z"/><path fill="'+i+'" d="M362.088,164.014H149.912c-6.62,0-11.988,5.367-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175 c6.62,0,11.988-5.368,11.988-11.988C374.076,169.381,368.707,164.014,362.088,164.014z"/><path fill="'+i+'" d="M362.088,236.353H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175 c6.62,0,11.988-5.368,11.988-11.988C374.076,241.721,368.707,236.353,362.088,236.353z"/><path fill="'+i+'" d="M362.088,308.691H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988h212.175 c6.62,0,11.988-5.367,11.988-11.988C374.076,314.06,368.707,308.691,362.088,308.691z"/><path fill="'+i+'" d="M256,381.031H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988H256 c6.62,0,11.988-5.367,11.988-11.988C267.988,386.398,262.62,381.031,256,381.031z"/></svg>'},r.icon.remove=function(e,t,i){return'<svg width="'+e+'" height="'+t+'"  viewBox="0 0 900.5 900.5"><path fill="'+i+'" d="M176.415,880.5c0,11.046,8.954,20,20,20h507.67c11.046,0,20-8.954,20-20V232.487h-547.67V880.5L176.415,880.5z M562.75,342.766h75v436.029h-75V342.766z M412.75,342.766h75v436.029h-75V342.766z M262.75,342.766h75v436.029h-75V342.766z"/><path fill="'+i+'" d="M618.825,91.911V20c0-11.046-8.954-20-20-20h-297.15c-11.046,0-20,8.954-20,20v71.911v12.5v12.5H141.874 c-11.046,0-20,8.954-20,20v50.576c0,11.045,8.954,20,20,20h34.541h547.67h34.541c11.046,0,20-8.955,20-20v-50.576 c0-11.046-8.954-20-20-20H618.825v-12.5V91.911z M543.825,112.799h-187.15v-8.389v-12.5V75h187.15v16.911v12.5V112.799z"/></svg>'},r.icon.add=function(e,t,i){return'<svg width="'+e+'" height="'+t+'"   viewBox="0 0 922 922"><path fill="'+i+'" d="M922,453V81c0-11.046-8.954-20-20-20H410c-11.045,0-20,8.954-20,20v149h318c24.812,0,45,20.187,45,45v198h149 C913.046,473.001,922,464.046,922,453z" /><path fill="'+i+'" d="M557,667.001h151c11.046,0,20-8.954,20-20v-174v-198c0-11.046-8.954-20-20-20H390H216c-11.045,0-20,8.954-20,20v149h194 h122c24.812,0,45,20.187,45,45v4V667.001z" /><path fill="'+i+'" d="M0,469v372c0,11.046,8.955,20,20,20h492c11.046,0,20-8.954,20-20V692v-12.501V667V473v-4c0-11.046-8.954-20-20-20H390H196 h-12.5H171H20C8.955,449,0,457.955,0,469z" /></svg>'},r.icon.search=function(e,t,i){return'<svg width="'+e+'" height="'+t+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 485.213 485.213"><path fill="'+i+'" d="M471.882,407.567L360.567,296.243c-16.586,25.795-38.536,47.734-64.331,64.321l111.324,111.324 c17.772,17.768,46.587,17.768,64.321,0C489.654,454.149,489.654,425.334,471.882,407.567z" /><path fill="'+i+'" d="M363.909,181.955C363.909,81.473,282.44,0,181.956,0C81.474,0,0.001,81.473,0.001,181.955s81.473,181.951,181.955,181.951 C282.44,363.906,363.909,282.437,363.909,181.955z M181.956,318.416c-75.252,0-136.465-61.208-136.465-136.46 c0-75.252,61.213-136.465,136.465-136.465c75.25,0,136.468,61.213,136.468,136.465 C318.424,257.208,257.206,318.416,181.956,318.416z" /><path fill="'+i+'" d="M75.817,181.955h30.322c0-41.803,34.014-75.814,75.816-75.814V75.816C123.438,75.816,75.817,123.437,75.817,181.955z" /></svg>'},r.icon.xml=function(e,t,i){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 550.801 550.801"><path fill="'+i+'"  d="M488.426,197.019H475.2v-63.816c0-0.401-0.063-0.799-0.116-1.205c-0.021-2.534-0.827-5.023-2.562-6.992L366.325,3.691 c-0.032-0.031-0.063-0.042-0.085-0.073c-0.633-0.707-1.371-1.298-2.151-1.804c-0.231-0.158-0.464-0.287-0.706-0.422 c-0.676-0.366-1.393-0.675-2.131-0.896c-0.2-0.053-0.38-0.135-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.87v160.542 c0,17.044,13.824,30.876,30.873,30.876h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87V227.89C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.51c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M369.531,374.53h-32.058l-2.156-55.519 c-0.644-17.434-1.298-38.518-1.298-59.611h-0.633c-4.514,18.516-10.547,39.166-16.137,56.162l-17.645,56.601h-25.618 l-15.494-56.157c-4.725-16.996-9.671-37.658-13.123-56.6h-0.43c-0.854,19.585-1.508,41.961-2.586,60.038l-2.576,55.086h-30.343 l9.26-145.035h43.677l14.207,48.421c4.517,16.774,9.041,34.847,12.258,51.843h0.654c4.081-16.77,9.038-35.923,13.774-52.064 l15.493-48.199h42.82L369.531,374.53z M69.992,374.53l41.955-73.385l-40.444-71.65h37.655l12.688,26.465 c4.316,8.828,7.533,15.928,10.99,24.092h0.422c3.438-9.242,6.23-15.694,9.893-24.092l12.274-26.465h37.434l-40.89,70.796 l43.044,74.239h-37.866l-13.134-26.257c-5.376-10.108-8.817-17.639-12.909-26.04h-0.433c-3.009,8.401-6.674,15.932-11.19,26.04 l-12.042,26.257H69.992z M453.601,523.353H97.2V419.302h356.4V523.353z M485.325,374.53h-90.608V229.495h32.933v117.497h57.682 v27.538H485.325z"/></svg>'},r.icon.link=function(e,t,i){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 512.092 512.092"  ><path fill="'+i+'" d="M312.453,199.601c-6.066-6.102-12.792-11.511-20.053-16.128c-19.232-12.315-41.59-18.859-64.427-18.859 c-31.697-0.059-62.106,12.535-84.48,34.987L34.949,308.23c-22.336,22.379-34.89,52.7-34.91,84.318 c-0.042,65.98,53.41,119.501,119.39,119.543c31.648,0.11,62.029-12.424,84.395-34.816l89.6-89.6 c1.628-1.614,2.537-3.816,2.524-6.108c-0.027-4.713-3.87-8.511-8.583-8.484h-3.413c-18.72,0.066-37.273-3.529-54.613-10.581 c-3.195-1.315-6.867-0.573-9.301,1.877l-64.427,64.512c-20.006,20.006-52.442,20.006-72.448,0 c-20.006-20.006-20.006-52.442,0-72.448l108.971-108.885c19.99-19.965,52.373-19.965,72.363,0 c13.472,12.679,34.486,12.679,47.957,0c5.796-5.801,9.31-13.495,9.899-21.675C322.976,216.108,319.371,206.535,312.453,199.601z" /><path fill="'+i+'" d="M477.061,34.993c-46.657-46.657-122.303-46.657-168.96,0l-89.515,89.429c-2.458,2.47-3.167,6.185-1.792,9.387 c1.359,3.211,4.535,5.272,8.021,5.205h3.157c18.698-0.034,37.221,3.589,54.528,10.667c3.195,1.315,6.867,0.573,9.301-1.877 l64.256-64.171c20.006-20.006,52.442-20.006,72.448,0c20.006,20.006,20.006,52.442,0,72.448l-80.043,79.957l-0.683,0.768 l-27.989,27.819c-19.99,19.965-52.373,19.965-72.363,0c-13.472-12.679-34.486-12.679-47.957,0 c-5.833,5.845-9.35,13.606-9.899,21.845c-0.624,9.775,2.981,19.348,9.899,26.283c9.877,9.919,21.433,18.008,34.133,23.893 c1.792,0.853,3.584,1.536,5.376,2.304c1.792,0.768,3.669,1.365,5.461,2.048c1.792,0.683,3.669,1.28,5.461,1.792l5.035,1.365 c3.413,0.853,6.827,1.536,10.325,2.133c4.214,0.626,8.458,1.025,12.715,1.195h5.973h0.512l5.12-0.597 c1.877-0.085,3.84-0.512,6.059-0.512h2.901l5.888-0.853l2.731-0.512l4.949-1.024h0.939c20.961-5.265,40.101-16.118,55.381-31.403 l108.629-108.629C523.718,157.296,523.718,81.65,477.061,34.993z" /></svg>'},r.icon.happy=function(e,t,i){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 512 512"><path fill="'+i+'" d="M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M256,480 C132.288,480,32,379.712,32,256S132.288,32,256,32s224,100.288,224,224S379.712,480,256,480z"/><path fill="'+i+'" d="M176,176c17.673,0,32,14.327,32,32h32c0-35.346-28.654-64-64-64c-35.346,0-64,28.654-64,64h32 C144,190.327,158.327,176,176,176z"/><path fill="'+i+'" d="M336,144c-35.346,0-64,28.654-64,64h32c0-17.673,14.327-32,32-32c17.673,0,32,14.327,32,32h32 C400,172.654,371.346,144,336,144z"/><path fill="'+i+'" d="M256,368c-53.019,0-96-42.981-96-96h-32c0,70.692,57.308,128,128,128s128-57.308,128-128h-32 C352,325.019,309.019,368,256,368z"/></svg>'},r.icon.sad=function(e,t,i){return'<svg width="'+e+'" height="'+t+'" viewBox="0 0 512 512"><path fill="'+i+'" d="M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M256,480 C132.288,480,32,379.712,32,256S132.288,32,256,32s224,100.288,224,224S379.712,480,256,480z"/><path fill="'+i+'" d="M336,192c-17.673,0-32-14.327-32-32h-32c0,35.346,28.654,64,64,64c35.346,0,64-28.654,64-64h-32 C368,177.673,353.673,192,336,192z"/><path fill="'+i+'" d="M176,224c35.346,0,64-28.654,64-64h-32c0,17.673-14.327,32-32,32s-32-14.327-32-32h-32C112,195.346,140.654,224,176,224z "/><path fill="'+i+'" d="M256,256c-70.692,0-128,57.308-128,128h32c0-53.019,42.981-96,96-96s96,42.981,96,96h32C384,313.308,326.692,256,256,256 z"/></svg>'},r.icon.share=function(e,t,i,n,o){return r.isNEU(n)&&(n=0),r.isNEU(o)&&(o=0),`<svg width="${e}" height="${t}" x="${n}" y="${o}" viewBox="0 0 512 512">\n                <path fill="${i}" d="M406,332c-29.641,0-55.761,14.581-72.167,36.755L191.99,296.124c2.355-8.027,4.01-16.346,4.01-25.124\n                    c0-11.906-2.441-23.225-6.658-33.636l148.445-89.328C354.307,167.424,378.589,180,406,180c49.629,0,90-40.371,90-90\n                    c0-49.629-40.371-90-90-90c-49.629,0-90,40.371-90,90c0,11.437,2.355,22.286,6.262,32.358l-148.887,89.59\n                    C156.869,193.136,132.937,181,106,181c-49.629,0-90,40.371-90,90c0,49.629,40.371,90,90,90c30.13,0,56.691-15.009,73.035-37.806\n                    l141.376,72.395C317.807,403.995,316,412.75,316,422c0,49.629,40.371,90,90,90c49.629,0,90-40.371,90-90\n                    C496,372.371,455.629,332,406,332z"/>\n                </svg>`},r.icon.user=function(e,t,i,n,o){return r.isNEU(n)&&(n=0),r.isNEU(o)&&(o=0),`<svg width="${e}" height="${t}" x="${n}" y="${o}" viewBox="0 0 24 24">\n                <path fill="${i}" d="M12 11.796C14.7189 11.796 16.9231 9.60308 16.9231 6.89801C16.9231 4.19294 14.7189 2.00005 12 2.00005C9.28106 2.00005 7.07692 4.19294 7.07692 6.89801C7.07692 9.60308 9.28106 11.796 12 11.796Z" fill="#030D45"/>\n                <path fill="${i}" d="M14.5641 13.8369H9.4359C6.46154 13.8369 4 16.2859 4 19.245C4 19.9593 4.30769 20.5716 4.92308 20.8777C5.84615 21.3879 7.89744 22.0001 12 22.0001C16.1026 22.0001 18.1538 21.3879 19.0769 20.8777C19.5897 20.5716 20 19.9593 20 19.245C20 16.1838 17.5385 13.8369 14.5641 13.8369Z" fill="#030D45"/>\n            </svg>`},r.icon.ft=function(e,t,i,n,r){return`<svg width="${e}" height="${t}" x="${n}" y="${r}" viewBox="0 0 512 512"  >\n                <path fill="${i}" d="m336.061 377.731c-5.086-6.54-14.511-7.717-21.049-2.631l-44.012 34.231v-200.331c0-8.284-6.716-15-15-15s-15 6.716-15 15v200.331l-44.011-34.231c-6.538-5.086-15.962-3.908-21.049 2.631-5.086 6.539-3.908 15.963 2.631 21.049l62.429 48.556v49.664c0 8.284 6.716 15 15 15s15-6.716 15-15v-49.664l62.429-48.556c6.54-5.086 7.717-14.51 2.632-21.049z" />\n                <path fill="${i}" d="m271 497v-49.664l62.429-48.556c6.54-5.086 7.717-14.51 2.631-21.049-5.086-6.54-14.511-7.717-21.049-2.631l-44.011 34.231v-200.331c0-8.284-6.716-15-15-15v318c8.284 0 15-6.716 15-15z" />\n                <path fill="${i}" d="m320 512h-128c-8.284 0-15-6.716-15-15s6.716-15 15-15h128c8.284 0 15 6.716 15 15s-6.716 15-15 15z" />\n                <path fill="${i}" d="m320 482h-64v30h64c8.284 0 15-6.716 15-15s-6.716-15-15-15z" />\n                <path fill="${i}" d="m400 439c-61.206 0-111-49.794-111-111s49.794-111 111-111 111 49.794 111 111-49.794 111-111 111z" />\n                <path fill="${i}" d="m112 439c-61.206 0-111-49.794-111-111s49.794-111 111-111 111 49.794 111 111-49.794 111-111 111z" />\n                <path fill="${i}" d="m256 222c-61.206 0-111-49.794-111-111s49.794-111 111-111 111 49.794 111 111-49.794 111-111 111z" />\n                <path fill="${i}" d="m367 111c0-61.206-49.794-111-111-111v222c61.206 0 111-49.794 111-111z" />\n            </svg>`},r.icon.addUser=function(e,t,i,n,o){return r.isNEU(n)&&(n=0),r.isNEU(o)&&(o=0),`<svg width="${e}" height="${t}" x="${n}" y="${o}" viewBox="0 0 512 512" >\n                <path fill="${i}" d="M300.434,257.599c-25.945,27.304-60.622,43.875-98.602,43.875c-37.979,0-72.656-16.571-98.602-43.875 c-45.617,28.738-77.826,76.818-85.092,132.736c-1.659,12.77,8.291,24.107,21.201,24.107h225.846 c0-53.371,32.011-99.402,77.838-119.914C330.812,280.165,316.452,267.69,300.434,257.599z"/>\n                <ellipse fill="${i}" cx="201.828" cy="133.868" rx="112.229" ry="133.868"/>\n                <path fill="${i}" d="M396.486,316.885c-53.794,0-97.558,43.764-97.558,97.558S342.693,512,396.486,512c53.792,0,97.557-43.764,97.557-97.558 S450.279,316.885,396.486,316.885z M435.199,431.315h-21.841v21.841c0,9.318-7.554,16.872-16.872,16.872 c-9.318,0-16.872-7.554-16.872-16.872v-21.841h-21.842c-9.318,0-16.872-7.554-16.872-16.872c0-9.319,7.554-16.872,16.872-16.872 h21.842v-21.841c0-9.318,7.554-16.872,16.872-16.872c9.318,0,16.872,7.554,16.872,16.872v21.841h21.841 c9.318,0,16.872,7.554,16.872,16.872C452.072,423.761,444.518,431.315,435.199,431.315z"/>\n            </svg>`},r.icon.close=function(e,t,i,n,o){return r.isNEU(n)&&(n=0),r.isNEU(o)&&(o=0),`<svg width="${e}" height="${t}" x="${n}" y="${o}" viewBox="0 0 512 512">\n    <path fill="${i}" d="m256 0c-141.49 0-256 114.5-256 256 0 141.49 114.5 256 256 256 141.49 0 256-114.5 256-256 0-141.49-114.5-256-256-256zm-12.284 317.397-58.121 58.132c-6.565 6.553-15.283 10.166-24.557 10.166-19.196 0-34.734-15.526-34.734-34.734 0-9.274 3.612-17.992 10.166-24.557l58.132-58.121c6.785-6.784 6.785-17.783 0-24.568l-58.132-58.121c-6.553-6.565-10.166-15.283-10.166-24.557 0-19.196 15.526-34.734 34.734-34.734 9.274 0 17.992 3.613 24.557 10.166l58.121 58.132c6.785 6.773 17.784 6.773 24.568 0l58.121-58.132c6.565-6.553 15.283-10.166 24.557-10.166 19.196 0 34.734 15.526 34.734 34.734 0 9.274-3.612 17.992-10.166 24.557l-58.132 58.121c-6.785 6.784-6.785 17.783 0 24.568l58.132 58.121c6.553 6.565 10.166 15.283 10.166 24.557 0 19.196-15.526 34.734-34.734 34.734-9.274 0-17.992-3.613-24.557-10.166l-58.121-58.132c-6.784-6.784-17.784-6.773-24.568 0z"/>\n    </svg>`},r.icon.daughter=function(e,t,i,n,o){return r.isNEU(n)&&(n=0),r.isNEU(o)&&(o=0),`<svg width="${e}" height="${t}" x="${n}" y="${o}" viewBox="0 0 512.879 512.879">\n                <path fill="${i}" d="M213.773,238.933c4.71,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.181-2.176,5.803-7.33,3.627-11.511 c-2.534-4.872-10.581-13.124-24.636-13.124c-14.054,0-22.101,8.252-24.636,13.124c-2.125,4.087-0.555,8.969,3.456,11.23 c4.011,2.287,9.156,0.811,11.563-3.123c0.077-0.128,0.495-0.623,1.084-1.195v5.564 C205.239,235.11,209.062,238.933,213.773,238.933z"/>\n                <path fill="${i}" d="M256.439,332.8c20.028,0,30.507-9.907,31.633-11.034c3.294-3.294,3.285-8.568,0.043-11.913 c-3.234-3.354-8.61-3.439-12.015-0.247c-0.265,0.247-6.699,6.127-19.661,6.127c-12.774,0-19.209-5.709-19.652-6.118 c-3.336-3.251-8.678-3.217-11.981,0.085c-3.337,3.337-3.337,8.73,0,12.066C225.933,322.893,236.412,332.8,256.439,332.8z"/>\n                <path fill="${i}" d="M365.666,293.547c-49.826-66.441-75.093-133.623-75.093-199.68c0-4.71-3.823-8.533-8.533-8.533s-8.533,3.823-8.533,8.533 c0,68.369,25.31,137.489,75.255,205.542c-12.228,21.623-50.483,76.058-92.322,76.058c-45.218,0-86.255-63.59-94.763-80.614 c-8.388-16.768-24.704-66.765-24.704-98.586v-25.754c20.378-0.572,73.404-3.405,121.813-17.246 c4.531-1.289,7.151-6.016,5.854-10.547c-1.289-4.531-6.008-7.159-10.547-5.854C196.254,153.387,129.114,153.6,128.439,153.6 c-4.71,0-8.533,3.823-8.533,8.533v34.133c0,34.935,17.254,87.723,26.496,106.214c0.452,0.905,46.797,90.052,110.037,90.052 s109.585-89.148,110.037-90.052C367.919,299.588,367.603,296.132,365.666,293.547z"/>\n                <path fill="${i}" d="M316.173,392.533c-4.71,0-8.533,3.823-8.533,8.533v17.067c0,0.06,0.034,0.111,0.034,0.171 c0,0.051-0.034,0.094-0.034,0.154c-0.034,5.205-1.749,50.876-51.2,50.876s-51.166-45.986-51.2-51.2v-17.067 c0-4.71-3.823-8.533-8.533-8.533s-8.533,3.823-8.533,8.533v8.687c-116.028,1.638-168.917,35.9-178.765,65.417l-8.533,25.6 c-1.493,4.471,0.93,9.301,5.402,10.795C7.172,511.863,8.085,512,8.973,512c3.575,0,6.903-2.261,8.098-5.837l8.533-25.6 c6.076-18.227,48.034-52.335,163.132-53.845c3.106,24.422,19.721,59.682,67.704,59.682c53.999,0,68.267-44.425,68.267-67.917 c0-0.06-0.034-0.111-0.034-0.171c0-0.068,0.034-0.119,0.034-0.179v-17.067C324.706,396.356,320.883,392.533,316.173,392.533z"/>\n                <path fill="${i}" d="M256.695,273.067h-0.085c-4.71,0-8.491,3.823-8.491,8.533c0,4.71,3.866,8.533,8.576,8.533 c4.719,0,8.533-3.823,8.533-8.533C265.229,276.89,261.414,273.067,256.695,273.067z"/>\n                <path fill="${i}" d="M512.004,501.641l-8.533-25.591c-4.659-13.978-22.34-28.228-49.792-40.141c-4.318-1.877-9.352,0.102-11.23,4.429 c-1.869,4.318,0.111,9.353,4.437,11.221c26.266,11.401,38.178,23.219,40.388,29.884l8.533,25.6 c1.195,3.575,4.523,5.837,8.098,5.837c0.887,0,1.801-0.145,2.697-0.444C511.074,510.942,513.498,506.112,512.004,501.641z"/>\n                <path fill="${i}" d="M256.439,0c-115.558,0-179.2,63.642-179.2,179.2V256c0,66.039-24.909,141.611-25.165,142.37 c-1.485,4.471,0.93,9.301,5.402,10.795c4.48,1.476,9.301-0.93,10.795-5.402c1.058-3.191,26.035-78.908,26.035-147.763v-76.8 c0-134.008,88.175-162.133,162.133-162.133c100.454,0,162.133,94.43,162.133,162.133v17.067 c0,34.458-21.111,74.163-41.532,112.572c-18.133,34.116-35.268,66.338-35.268,92.228c0,54.11,35.14,89.873,36.634,91.366 c1.596,1.604,3.772,2.5,6.033,2.5c2.261,0,4.437-0.896,6.033-2.5c1.493-1.493,36.634-37.257,36.634-91.366 c0-53.197-17.562-72.303-19.567-74.3c-3.285-3.285-8.559-3.285-11.904-0.051c-3.354,3.234-3.439,8.61-0.265,12.015 c0.145,0.154,14.669,16.256,14.669,62.336c0,33.937-16.444,60.16-25.617,72.149c-9.19-11.947-25.583-38.05-25.583-72.149 c0-21.632,16.162-52.036,33.271-84.215c21.402-40.252,43.529-81.869,43.529-120.585V179.2C435.639,94.438,362.04,0,256.439,0z"/>\n            </svg>`},r.icon.son=function(e,t,i,n,o){return r.isNEU(n)&&(n=0),r.isNEU(o)&&(o=0),`<svg width="${e}" height="${t}" x="${n}" y="${o}"  viewBox="0 0 512.002 512.002">\n                <path fill="${i}" d="M238.934,213.334c0-4.71-3.823-8.533-8.533-8.533h-34.133c-4.71,0-8.533,3.823-8.533,8.533 c0,4.71,3.823,8.533,8.533,8.533h8.533c0,4.71,3.823,8.533,8.533,8.533c4.71,0,8.533-3.823,8.533-8.533h8.533 C235.111,221.867,238.934,218.044,238.934,213.334z"/>\n                <path fill="${i}" d="M121.601,255.19c4.565,13.466,17.178,49.98,24.371,64.358c13.551,27.11,51.977,72.986,110.029,72.986 s96.478-45.875,110.037-72.986c7.185-14.379,19.797-50.893,24.371-64.358c11.025-2.85,19.191-12.885,19.191-24.789v-34.133 c0-11.127-7.134-20.617-17.067-24.141v-44.126c0-33.69-17.741-95.923-83.354-101.931c-0.137-4.028-1.476-7.27-2.953-9.668 c-8.38-13.559-31.94-16.401-50.227-16.401c-151.842,0-153.6,143.616-153.6,145.067c0,4.71,3.814,8.525,8.525,8.525h0.009 c4.702,0,8.525-3.806,8.533-8.516c0.017-5.222,1.937-128.009,136.533-128.009c24.132,0,33.801,5.222,35.703,8.311 c0.282,0.435,0.998,1.604-0.666,4.941c-1.323,2.645-1.178,5.786,0.375,8.303c1.553,2.509,4.301,4.045,7.253,4.045 c75.656,0,76.791,81.86,76.8,85.333v51.2c0,4.71,3.823,8.533,8.533,8.533c4.702,0,8.533,3.831,8.533,8.533v34.133 c0,4.702-3.831,8.533-8.533,8.533c-3.669,0-6.929,2.347-8.098,5.837c-0.162,0.503-16.964,50.816-25.131,67.149 c-1.297,2.594-32.495,63.548-94.771,63.548s-93.466-60.954-94.763-63.548c-8.166-16.333-24.977-66.645-25.139-67.149 c-1.161-3.49-4.42-5.837-8.098-5.837c-4.702,0-8.533-3.831-8.533-8.533v-34.133c0-2.313,0.93-4.412,2.423-5.948 c3.396,7.62,10.607,14.481,23.177,14.481c3.234,0,6.187-1.826,7.637-4.719c7.535-15.061,15.283-30.575,17.399-46.652 c43.665-1.758,108.979-17.323,139.742-41.105c8.201,29.764,32.742,54.596,33.988,55.842c3.337,3.337,8.738,3.337,12.066,0 c3.337-3.336,3.337-8.73,0-12.066c-0.316-0.316-31.633-31.983-31.633-62.234c0-3.831-2.56-7.202-6.255-8.226 c-3.703-1.024-7.62,0.546-9.591,3.831c-14.549,24.243-94.746,47.061-146.287,47.061c-4.71,0-8.533,3.823-8.533,8.533 c0,13.295-6.127,27.102-13.286,41.6c-2.901-1.604-3.703-4.753-3.78-7.467c0-4.71-3.823-8.533-8.533-8.533 c-14.114,0-25.6,11.486-25.6,25.6v34.133C102.401,242.305,110.576,252.34,121.601,255.19z"/>\n                <path fill="${i}" d="M256.001,332.801c20.028,0,30.507-9.907,31.633-11.034c3.294-3.294,3.285-8.567,0.051-11.913 c-3.243-3.354-8.619-3.439-12.023-0.247c-0.265,0.247-6.699,6.127-19.661,6.127c-12.774,0-19.209-5.709-19.652-6.118 c-3.336-3.251-8.678-3.217-11.981,0.085c-3.328,3.337-3.328,8.73,0,12.066C225.503,322.893,235.982,332.801,256.001,332.801z"/>\n                <path fill="${i}" d="M264.79,281.601c0-4.71-3.814-8.533-8.533-8.533h-0.085c-4.71,0-8.491,3.823-8.491,8.533c0,4.71,3.866,8.533,8.576,8.533 C260.976,290.134,264.79,286.311,264.79,281.601z"/>\n                <path fill="${i}" d="M511.745,501.394l-8.713-34.756c-4.386-13.158-30.285-55.484-178.765-56.636v-8.934c0-4.71-3.823-8.533-8.533-8.533 s-8.533,3.823-8.533,8.533v17.067c0,0.06,0.034,0.111,0.034,0.171c0,0.051-0.034,0.094-0.034,0.154 c-0.034,5.205-1.749,50.876-51.2,50.876s-51.166-45.986-51.2-51.2v-17.067c0-4.71-3.823-8.533-8.533-8.533 s-8.533,3.823-8.533,8.533v8.619C77.168,410.556,21.786,428.203,8.79,467.26l-8.533,34.133 c-1.143,4.574,1.638,9.207,6.212,10.351c4.557,1.143,9.199-1.638,10.342-6.204l8.354-33.51 c9.916-29.739,63.309-44.595,163.132-45.338c3.098,24.431,19.712,59.708,67.704,59.708c47.983,0,64.597-35.063,67.703-59.366 c116.958,0.862,157.628,28.467,162.953,44.373l8.533,34.133c0.973,3.874,4.446,6.46,8.269,6.46c0.691,0,1.382-0.077,2.082-0.256 C510.115,510.601,512.888,505.968,511.745,501.394z"/>\n                <path fill="${i}" d="M298.668,230.401c4.71,0,8.533-3.823,8.533-8.533h8.533c4.71,0,8.533-3.823,8.533-8.533c0-4.71-3.823-8.533-8.533-8.533 h-34.133c-4.71,0-8.533,3.823-8.533,8.533c0,4.71,3.823,8.533,8.533,8.533h8.533 C290.134,226.578,293.957,230.401,298.668,230.401z"/>\n            </svg>`},r.icon.wife=function(e,t,i,n,o){return r.isNEU(n)&&(n=0),r.isNEU(o)&&(o=0),`<svg width="${e}" height="${t}" x="${n}" y="${o}" viewBox="0 0 512 512" >\n                <path fill="${i}" d="M128,307.2c4.719,0,8.533-3.823,8.533-8.533V281.6c0-4.71-3.814-8.533-8.533-8.533c-4.719,0-8.533,3.823-8.533,8.533 v17.067C119.467,303.377,123.281,307.2,128,307.2z"/>\n                <path fill="${i}" d="M384,273.067c-4.719,0-8.533,3.823-8.533,8.533v17.067c0,4.71,3.814,8.533,8.533,8.533c4.719,0,8.533-3.823,8.533-8.533 V281.6C392.533,276.89,388.719,273.067,384,273.067z"/>\n                <path fill="${i}" d="M392.183,433.109c-0.162-0.606-0.418-1.152-0.7-1.715c-0.162-0.299-0.196-0.64-0.384-0.93 c-0.094-0.128-0.23-0.196-0.324-0.324c-0.358-0.469-0.802-0.845-1.254-1.246c-0.418-0.375-0.819-0.742-1.306-1.016 c-0.145-0.094-0.23-0.23-0.392-0.316l-34.133-17.067c-2.748-1.357-6.008-1.161-8.55,0.538l-51.209,34.133 c-2.372,1.587-3.797,4.25-3.797,7.1v30.259c-5.077,4.062-17.545,12.407-34.133,12.407c-16.427,0-29.013-8.388-34.133-12.433 v-30.234c0-2.85-1.425-5.513-3.797-7.1l-51.2-34.133c-2.543-1.698-5.803-1.894-8.55-0.538l-34.133,17.067 c-0.154,0.077-0.239,0.213-0.375,0.299c-0.512,0.29-0.939,0.674-1.374,1.075c-0.435,0.384-0.853,0.734-1.186,1.178 c-0.102,0.137-0.256,0.213-0.35,0.35c-0.205,0.307-0.239,0.657-0.401,0.99c-0.265,0.529-0.521,1.05-0.674,1.63 c-0.137,0.529-0.179,1.05-0.205,1.596c-0.034,0.538-0.06,1.058,0.008,1.604c0.068,0.597,0.265,1.143,0.461,1.707 c0.119,0.341,0.111,0.7,0.273,1.024c0.077,0.154,0.222,0.247,0.307,0.393c0.282,0.495,0.666,0.913,1.058,1.348 c0.384,0.427,0.742,0.853,1.186,1.195c0.137,0.102,0.213,0.256,0.35,0.35l51.2,34.133c1.459,0.973,3.106,1.434,4.727,1.434 c2.756,0,5.47-1.331,7.108-3.797c2.62-3.925,1.562-9.225-2.364-11.836l-38.972-25.975l16.555-8.277l43.281,28.851V486.4 c0,2.261,0.896,4.437,2.5,6.033C208.102,493.235,227.2,512,256,512s47.898-18.765,48.7-19.567c1.604-1.596,2.5-3.772,2.5-6.033 v-29.568l43.29-28.851l16.546,8.277l-38.972,25.975c-3.925,2.611-4.983,7.91-2.364,11.836c1.638,2.466,4.352,3.797,7.108,3.797 c1.621,0,3.268-0.461,4.727-1.434l51.2-34.133c0.137-0.094,0.205-0.239,0.333-0.341c0.478-0.35,0.853-0.794,1.254-1.246 c0.358-0.427,0.725-0.811,0.998-1.289c0.085-0.154,0.239-0.247,0.324-0.41c0.171-0.35,0.171-0.725,0.29-1.084 c0.179-0.538,0.367-1.05,0.435-1.613c0.077-0.58,0.051-1.126,0.009-1.698C392.354,434.108,392.32,433.613,392.183,433.109z"/>\n                <path fill="${i}" d="M57.037,409.165c0.896,0.29,1.809,0.435,2.697,0.435c3.575,0,6.903-2.261,8.09-5.837 C68.89,400.572,93.867,324.855,93.867,256v-76.8C93.867,45.193,182.033,17.067,256,17.067c25.199,0,77.636,0,85.649,11.128 c0.333,0.452,0.828,1.135,0.128,3.243c-0.956,2.842-0.341,5.965,1.604,8.235c1.946,2.278,4.932,3.362,7.885,2.876 c10.863-1.792,20.412,0.93,29.184,8.354c22.895,19.396,37.683,69.76,37.683,128.299V256c0,77.457,25.071,145.22,26.138,148.062 c1.656,4.412,6.571,6.639,10.991,5.001c4.412-1.655,6.647-6.571,5.001-10.991C460.006,397.406,435.2,330.257,435.2,256v-76.8 c0-50.415-11.486-114.014-43.716-141.321c-9.745-8.243-20.932-12.621-32.836-12.902c-0.683-2.773-1.903-5.035-3.149-6.767 C343.356,1.374,303.258,0,256,0C140.442,0,76.8,63.642,76.8,179.2V256c0,66.039-24.909,141.611-25.156,142.37 C50.15,402.842,52.565,407.672,57.037,409.165z"/>\n                <path fill="${i}" d="M91.802,426.923C19.814,444.919,1.195,498.492,0.444,500.77c-1.493,4.471,0.922,9.301,5.393,10.795 C6.733,511.864,7.646,512,8.533,512c3.576,0,6.904-2.261,8.09-5.837c0.162-0.469,16.316-46.942,79.309-62.686 c4.574-1.143,7.356-5.777,6.212-10.351C101.001,428.561,96.367,425.771,91.802,426.923z"/>\n                <path fill="${i}" d="M213.333,238.933c4.719,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.173-2.176,5.803-7.33,3.627-11.511 c-2.534-4.873-10.59-13.124-24.636-13.124c-14.046,0-22.101,8.252-24.636,13.124c-2.125,4.087-0.546,8.969,3.456,11.23 c3.985,2.261,9.148,0.819,11.554-3.123c0.085-0.128,0.503-0.623,1.092-1.195v5.564C204.8,235.11,208.614,238.933,213.333,238.933 z"/>\n                <path fill="${i}" d="M511.556,500.77c-0.751-2.278-19.371-55.851-91.358-73.847c-4.574-1.161-9.199,1.638-10.342,6.204 c-1.143,4.574,1.638,9.207,6.212,10.351c62.524,15.633,78.66,60.809,79.309,62.686c1.186,3.576,4.514,5.837,8.09,5.837 c0.888,0,1.801-0.137,2.697-0.435C510.635,510.071,513.05,505.242,511.556,500.77z"/>\n                <path fill="${i}" d="M256,332.8c20.028,0,30.507-9.907,31.633-11.034c3.294-3.294,3.285-8.567,0.051-11.913 c-3.251-3.345-8.61-3.439-12.015-0.247c-0.273,0.247-6.707,6.127-19.669,6.127c-12.774,0-19.208-5.709-19.652-6.118 c-3.32-3.251-8.67-3.226-11.981,0.085c-3.337,3.337-3.337,8.73,0,12.066C225.493,322.893,235.972,332.8,256,332.8z"/>\n                <path fill="${i}" d="M298.667,238.933c4.719,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.173-2.176,5.803-7.33,3.627-11.511 c-2.534-4.873-10.59-13.124-24.636-13.124c-14.046,0-22.101,8.252-24.636,13.124c-2.125,4.087-0.546,8.969,3.456,11.23 c3.994,2.261,9.156,0.819,11.554-3.123c0.085-0.128,0.503-0.623,1.092-1.195v5.564 C290.133,235.11,293.948,238.933,298.667,238.933z"/>\n                <path fill="${i}" d="M389.129,189.449c-8.542-6.443-30.729-26.957-30.729-44.382c0-4.71-3.814-8.533-8.533-8.533s-8.533,3.823-8.533,8.533 c0,24.678,24.354,47.249,34.014,55.228c-1.835,33.476-24.917,95.223-33.118,111.625c-7.654,15.317-48.154,63.548-86.229,63.548 s-78.575-48.23-86.229-63.548c-8.542-17.084-33.237-83.379-33.237-115.652v-25.728c33.835-0.802,157.321-6.929,218.453-52.779 c3.772-2.825,4.54-8.175,1.707-11.947c-2.825-3.772-8.175-4.54-11.947-1.707C279.561,152.994,129.51,153.6,128,153.6 c-4.719,0-8.533,3.823-8.533,8.533v34.133c0,36.625,26.871,106.965,35.029,123.281c10.385,20.77,55.834,72.986,101.504,72.986 s91.119-52.216,101.504-72.986c8.158-16.316,35.029-86.656,35.029-123.281C392.533,193.587,391.27,191.061,389.129,189.449z"/>\n            </svg>`},r.icon.husband=function(e,t,i,n,o){return r.isNEU(n)&&(n=0),r.isNEU(o)&&(o=0),`<svg width="${e}" height="${t}" x="${n}" y="${o}" viewBox="0 0 512.007 512.007" >\n                <path fill="${i}" d="M121.835,255.249c6.229,16.196,26.803,68.42,41.737,90.82l1.348,2.039c10.957,16.614,29.295,44.425,91.085,44.425 c61.79,0,80.128-27.81,91.085-44.425l1.348-2.039c14.933-22.4,35.507-74.624,41.737-90.82c11.145-2.773,19.43-12.86,19.43-24.849 v-34.133c0-11.127-7.134-20.617-17.067-24.141V128c0-33.69-17.741-95.923-83.362-101.931c-0.128-4.028-1.459-7.27-2.944-9.668 C297.844,2.85,274.292,0,256.005,0c-151.842,0-153.6,143.616-153.6,145.067c0,4.71,3.814,8.525,8.516,8.525h0.017 c4.702,0,8.516-3.806,8.533-8.508c0.017-5.231,1.937-128.017,136.533-128.017c24.132,0,33.801,5.222,35.712,8.311 c0.265,0.435,0.99,1.604-0.683,4.941c-1.323,2.645-1.178,5.786,0.375,8.303c1.562,2.509,4.301,4.045,7.262,4.045 c75.657,0,76.791,81.86,76.8,85.333v51.2c0,4.71,3.814,8.533,8.533,8.533c4.71,0,8.533,3.831,8.533,8.533V230.4 c0,4.702-3.823,8.533-8.533,8.533c-3.558,0-6.741,2.21-7.996,5.538c-0.247,0.674-25.446,67.644-41.771,92.126l-1.399,2.116 c-10.223,15.514-24.235,36.753-76.834,36.753c-52.599,0-66.611-21.239-76.834-36.753l-1.399-2.116 c-16.324-24.482-41.523-91.452-41.771-92.126c-1.254-3.328-4.437-5.538-7.996-5.538c-4.71,0-8.533-3.831-8.533-8.533v-34.133 c0-2.313,0.922-4.412,2.423-5.948c3.089,6.955,9.421,13.21,20.053,14.268l29.193,21.897c2.27,16.623,16.418,29.517,33.664,29.517 h17.067c18.825,0,34.133-15.309,34.133-34.133c0,18.825,15.309,34.133,34.133,34.133h17.067 c17.237,0,31.394-12.894,33.664-29.517l31.189-23.39c3.772-2.825,4.54-8.175,1.707-11.947c-2.825-3.772-8.175-4.548-11.947-1.707 l-21.751,16.316c-3.251-10.402-12.86-18.022-24.329-18.022h-34.133c-14.114,0-25.6,11.486-25.6,25.6 c0-14.114-11.486-25.6-25.6-25.6h-34.133c-11.469,0-21.077,7.62-24.328,18.022l-16.282-12.211 c6.716-16.23,12.8-40.235,14.524-57.088c26.897-0.478,104.713-3.763,139.332-25.37c7.851,30.31,33.058,55.817,34.321,57.08 c3.336,3.336,8.73,3.336,12.066,0c3.336-3.337,3.336-8.73,0-12.066c-0.316-0.316-31.633-31.983-31.633-62.234 c0-3.831-2.56-7.202-6.255-8.226c-3.661-1.016-7.629,0.546-9.591,3.831c-12.425,20.693-93.022,29.995-146.287,29.995 c-4.719,0-8.533,3.823-8.533,8.533c0,13.858-6.554,41.515-13.508,58.539c-2.722-1.638-3.49-4.693-3.558-7.339 c0-4.71-3.814-8.533-8.533-8.533c-14.114,0-25.6,11.486-25.6,25.6V230.4C102.405,242.389,110.691,252.476,121.835,255.249z M273.071,213.333c0-4.702,3.823-8.533,8.533-8.533h34.133c4.71,0,8.533,3.831,8.533,8.533v8.533 c0,9.412-7.654,17.067-17.067,17.067h-17.067c-9.412,0-17.067-7.654-17.067-17.067V213.333z M187.738,213.333 c0-4.702,3.823-8.533,8.533-8.533h34.133c4.71,0,8.533,3.831,8.533,8.533v8.533c0,9.412-7.654,17.067-17.067,17.067h-17.067 c-9.412,0-17.067-7.654-17.067-17.067V213.333z"/>\n                <path fill="${i}" d="M298.663,307.226c0.009-4.702-3.797-8.533-8.499-8.559c-0.162,0-15.42-0.171-30.345-7.629 c-2.398-1.203-5.231-1.203-7.629,0c-14.925,7.458-30.182,7.629-30.319,7.629c-4.719,0-8.533,3.823-8.533,8.533 s3.814,8.533,8.533,8.533c0.725,0,16.853-0.094,34.133-7.646c17.28,7.552,33.408,7.646,34.133,7.646 C294.84,315.733,298.646,311.927,298.663,307.226z"/>\n                <path fill="${i}" d="M247.471,324.267c-4.719,0-8.533,3.823-8.533,8.533c0,4.71,3.814,8.533,8.533,8.533h17.067 c4.719,0,8.533-3.823,8.533-8.533c0-4.71-3.814-8.533-8.533-8.533H247.471z"/>\n                <path fill="${i}" d="M511.749,501.393l-8.721-34.756c-12.706-38.135-73.114-56.687-184.67-56.687c-0.879,0-1.758,0-2.645,0.009 c-4.053,0.009-7.544,2.867-8.337,6.852l-17.067,84.975c-0.93,4.625,2.065,9.122,6.682,10.052 c4.608,0.896,9.114-2.074,10.044-6.69l15.693-78.114c97.724,0.452,154.436,15.957,163.934,44.373l8.533,34.133 c0.973,3.874,4.446,6.468,8.269,6.46c0.683,0,1.382-0.077,2.074-0.256C510.11,510.601,512.892,505.976,511.749,501.393z"/>\n                <path fill="${i}" d="M204.634,416.461c-0.794-3.994-4.292-6.861-8.363-6.861c-116.386,0-174.148,17.596-187.477,57.66l-8.533,34.133 c-1.152,4.582,1.638,9.207,6.212,10.351C7.164,511.923,7.864,512,8.547,512c3.823,0,7.296-2.586,8.269-6.46l8.346-33.51 c9.95-29.841,63.667-44.689,164.122-45.338l15.693,78.447c0.913,4.617,5.367,7.629,10.035,6.699 c4.617-0.93,7.62-5.427,6.69-10.044L204.634,416.461z"/>\n                <path fill="${i}" d="M256.005,409.6c-14.114,0-25.6,11.486-25.6,25.6c0,11.11,7.159,20.489,17.067,24.021v44.245 c0,4.71,3.814,8.533,8.533,8.533c4.719,0,8.533-3.823,8.533-8.533V459.23c9.907-3.541,17.067-12.919,17.067-24.03 C281.605,421.086,270.119,409.6,256.005,409.6z M256.005,443.733c-4.71,0-8.533-3.831-8.533-8.533 c0-4.702,3.823-8.533,8.533-8.533c4.71,0,8.533,3.831,8.533,8.533C264.538,439.902,260.715,443.733,256.005,443.733z"/>\n            </svg>`},r.icon.father=function(e,t,i,n,o){return r.isNEU(n)&&(n=0),r.isNEU(o)&&(o=0),`<svg width="${e}" height="${t}" x="${n}" y="${o}" viewBox="0 0 512.002 512.002" >\n                <path fill="${i}" d="M366.934,128.001c0-4.71-3.814-8.533-8.533-8.533c-2.091,0-51.2-0.683-51.2-59.733c0-4.71-3.814-8.533-8.533-8.533 s-8.533,3.823-8.533,8.533c0,75.921,67.584,76.8,68.267,76.8C363.12,136.534,366.934,132.711,366.934,128.001z"/>\n                <path fill="${i}" d="M256.001,196.268c0-14.114-11.486-25.6-25.6-25.6h-34.133c-11.46,0-21.069,7.62-24.329,18.022l-21.751-16.316 c-3.772-2.825-9.114-2.048-11.947,1.707c-2.825,3.772-2.065,9.122,1.707,11.947l31.189,23.39 c2.278,16.623,16.418,29.517,33.664,29.517h17.067c18.825,0,34.133-15.309,34.133-34.133c0,18.825,15.309,34.133,34.133,34.133 h17.067c17.237,0,31.394-12.894,33.664-29.517l31.189-23.39c3.772-2.825,4.54-8.175,1.707-11.947 c-2.825-3.772-8.175-4.548-11.947-1.707l-21.751,16.316c-3.251-10.402-12.86-18.022-24.329-18.022h-34.133 C267.487,170.668,256.001,182.153,256.001,196.268z M238.934,204.801c0,9.412-7.654,17.067-17.067,17.067h-17.067 c-9.412,0-17.067-7.654-17.067-17.067v-8.533c0-4.702,3.831-8.533,8.533-8.533h34.133c4.702,0,8.533,3.831,8.533,8.533V204.801z M324.268,196.268v8.533c0,9.412-7.654,17.067-17.067,17.067h-17.067c-9.412,0-17.067-7.654-17.067-17.067v-8.533 c0-4.702,3.823-8.533,8.533-8.533h34.133C320.445,187.734,324.268,191.566,324.268,196.268z"/>\n                <path fill="${i}" d="M298.659,307.226c0.009-4.702-3.797-8.533-8.499-8.559c-0.162,0-15.42-0.171-30.345-7.629 c-2.398-1.203-5.231-1.203-7.629,0c-14.925,7.458-30.191,7.629-30.319,7.629c-4.71,0-8.533,3.823-8.533,8.533 s3.823,8.533,8.533,8.533c0.725,0,16.845-0.094,34.133-7.646c17.28,7.552,33.408,7.646,34.133,7.646 C294.836,315.734,298.642,311.928,298.659,307.226z"/>\n                <path fill="${i}" d="M120.986,237.953c4.378,18.611,18.91,76.877,34.048,99.584c10.974,16.452,36.668,54.997,100.966,54.997 s89.993-38.545,100.966-54.997c15.138-22.707,29.67-80.973,34.048-99.584c10.718-3.055,18.586-12.937,18.586-24.619v-34.133 c0-11.127-7.134-20.617-17.067-24.141v-44.126c0-1.109-1.562-110.933-136.533-110.933c-151.842,0-153.6,126.72-153.6,128 c0,4.702,3.806,8.516,8.516,8.525h0.017c4.693,0,8.516-3.806,8.533-8.499c0.017-4.54,2.048-110.959,136.533-110.959 c117.581,0,119.441,90.061,119.467,93.867v51.2c0,4.71,3.814,8.533,8.533,8.533c4.71,0,8.533,3.831,8.533,8.533v34.133 c0,4.702-3.823,8.533-8.533,8.533c-4.002,0-7.458,2.782-8.337,6.682c-0.162,0.751-16.896,75.52-32.896,99.516 c-10.257,15.386-31.599,47.403-86.767,47.403s-76.51-32.017-86.767-47.403c-15.992-23.979-32.734-98.765-32.905-99.516 c-0.87-3.9-4.326-6.682-8.329-6.682c-4.702,0-8.533-3.831-8.533-8.533v-34.133c0-4.702,3.831-8.533,8.533-8.533 c1.323,0,2.637-0.307,3.814-0.896c2.978-1.493,72.986-37.333,72.986-110.037c0-4.71-3.823-8.533-8.533-8.533 s-8.533,3.823-8.533,8.533c0,56.678-52.523,88.636-62.08,93.978c-13.022,1.186-23.253,12.169-23.253,25.489v34.133 C102.401,225.016,110.269,234.898,120.986,237.953z"/>\n                <path fill="${i}" d="M196.097,416.462c-0.794-3.994-4.292-6.861-8.363-6.861c-140.399,0-168.892,27.409-178.944,57.66l-8.533,34.133 c-1.143,4.582,1.638,9.207,6.204,10.351c0.7,0.179,1.391,0.256,2.082,0.256c3.823,0,7.296-2.586,8.269-6.46l8.354-33.51 c7.339-22.025,31.718-44.527,155.58-45.338l15.693,78.447c0.913,4.617,5.393,7.603,10.035,6.699 c4.625-0.93,7.62-5.427,6.69-10.044L196.097,416.462z"/>\n                <path fill="${i}" d="M511.745,501.394l-8.721-34.756c-7.117-21.342-39.689-57.216-178.782-56.678c-4.062,0.009-7.544,2.867-8.337,6.852 l-17.067,84.975c-0.93,4.625,2.065,9.122,6.682,10.052c4.591,0.896,9.114-2.074,10.044-6.69l15.693-78.114 c103.714,0.674,148.412,23.484,155.401,44.373l8.533,34.133c0.973,3.874,4.446,6.468,8.269,6.46c0.683,0,1.382-0.077,2.074-0.256 C510.106,510.601,512.888,505.976,511.745,501.394z"/>\n                <path fill="${i}" d="M256.257,426.668h-0.085c-4.71,0-8.491,3.823-8.491,8.533s3.866,8.533,8.576,8.533c4.71,0,8.533-3.823,8.533-8.533 S260.967,426.668,256.257,426.668z"/>\n                <path fill="${i}" d="M256.257,494.934h-0.085c-4.71,0-8.491,3.823-8.491,8.533s3.866,8.533,8.576,8.533c4.71,0,8.533-3.823,8.533-8.533 S260.967,494.934,256.257,494.934z"/>\n                <path fill="${i}" d="M247.468,324.268c-4.71,0-8.533,3.823-8.533,8.533c0,4.71,3.823,8.533,8.533,8.533h17.067 c4.719,0,8.533-3.823,8.533-8.533c0-4.71-3.814-8.533-8.533-8.533H247.468z"/>\n                <path fill="${i}" d="M256.257,460.801h-0.085c-4.71,0-8.491,3.823-8.491,8.533c0,4.71,3.866,8.533,8.576,8.533 c4.71,0,8.533-3.823,8.533-8.533C264.79,464.624,260.967,460.801,256.257,460.801z"/>\n            </svg>`},r.icon.mother=function(e,t,i,n,o){return r.isNEU(n)&&(n=0),r.isNEU(o)&&(o=0),`<svg width="${e}" height="${t}" x="${n}" y="${o}" viewBox="0 0 512.011 512.011" >\n                <path fill="${i}" d="M299.355,445.356c-1.621,1.536-2.56,3.755-2.56,5.973c0,2.304,0.939,4.437,2.56,6.059 c1.536,1.621,3.755,2.475,5.973,2.475c2.304,0,4.523-0.853,6.059-2.475c1.621-1.536,2.475-3.755,2.475-6.059 c0-2.219-0.853-4.437-2.475-5.973C308.23,442.113,302.512,442.199,299.355,445.356z"/>\n                <path fill="${i}" d="M276.23,458.668c-1.621,1.621-2.475,3.755-2.475,6.059c0,2.219,0.939,4.437,2.475,5.973 c1.621,1.621,3.84,2.56,6.059,2.56c2.219,0,4.437-0.939,5.973-2.56c1.621-1.536,2.56-3.755,2.56-5.973 c0-2.304-0.939-4.437-2.56-6.059C285.104,455.511,279.387,455.511,276.23,458.668z"/>\n                <path fill="${i}" d="M392.539,196.268c0-2.68-1.263-5.205-3.405-6.818c-8.55-6.443-30.729-26.957-30.729-44.382 c0-4.71-3.823-8.533-8.533-8.533s-8.533,3.823-8.533,8.533c0,24.678,24.354,47.249,34.014,55.228 c-1.835,33.476-24.917,95.223-33.118,111.625c-7.654,15.317-48.154,63.548-86.229,63.548s-78.575-48.23-86.229-63.548 c-8.542-17.084-33.237-83.379-33.237-115.652V170.54c33.835-0.802,157.321-6.929,218.453-52.779 c3.772-2.825,4.531-8.175,1.707-11.947c-2.825-3.763-8.166-4.531-11.947-1.707c-65.186,48.887-215.236,49.493-216.747,49.493 c-4.71,0-8.533,3.823-8.533,8.533v34.133c0,36.625,26.871,106.965,35.029,123.281c10.394,20.77,55.834,72.986,101.504,72.986 s91.11-52.215,101.504-72.986C365.668,303.233,392.539,232.893,392.539,196.268z"/>\n                <path fill="${i}" d="M249.947,463.276c-1.536,1.621-2.475,3.84-2.475,6.059c0,2.219,0.939,4.437,2.475,6.059 c1.621,1.536,3.84,2.475,6.059,2.475s4.437-0.939,6.059-2.475c1.536-1.621,2.475-3.84,2.475-6.059 c0-2.219-0.939-4.437-2.475-6.059C258.907,460.119,253.104,460.119,249.947,463.276z"/>\n                <path fill="${i}" d="M34.139,230.401c0,18.85,6.75,36.659,19.098,50.688c-1.348,5.76-2.031,11.648-2.031,17.579 c0,42.342,34.458,76.8,76.8,76.8c6.494,0,12.954-0.819,19.191-2.432c4.565-1.178,7.305-5.828,6.127-10.394 c-1.178-4.565-5.828-7.305-10.394-6.127c-4.847,1.254-9.865,1.886-14.925,1.886c-32.939,0-59.733-26.795-59.733-59.733 c0-5.922,0.879-11.793,2.603-17.459c0.922-3.021,0.102-6.298-2.133-8.525c-11.307-11.298-17.536-26.308-17.536-42.283 c0-19.251,9.421-37.453,25.199-48.674c3.78-2.688,4.719-7.893,2.116-11.742c-6.707-9.89-10.249-21.461-10.249-33.451 c0-28.843,20.591-53.53,48.947-58.701c2.432-0.452,4.557-1.929,5.811-4.053c18.987-32.137,40.892-56.713,133.888-56.713 c71.714,0,128.947,23.484,142.413,58.436c0.888,2.304,2.731,4.105,5.052,4.949c23.535,8.559,39.356,31.095,39.356,56.081 c0,11.989-3.541,23.561-10.249,33.451c-2.603,3.849-1.664,9.054,2.116,11.742c15.778,11.221,25.199,29.423,25.199,48.674 c0,15.974-6.229,30.984-17.536,42.283c-2.236,2.227-3.055,5.504-2.133,8.525c1.724,5.666,2.603,11.537,2.603,17.459 c0,32.939-26.795,59.733-59.733,59.733c-5.018,0-10.001-0.623-14.814-1.852c-4.574-1.186-9.207,1.579-10.377,6.144 c-1.169,4.574,1.587,9.216,6.153,10.385c6.195,1.587,12.595,2.389,19.038,2.389c42.342,0,76.8-34.458,76.8-76.8 c0-5.931-0.683-11.819-2.031-17.579c12.348-14.029,19.098-31.838,19.098-50.688c0-22.11-9.643-43.128-26.138-57.643 c5.956-11.102,9.071-23.475,9.071-36.224c0-30.865-18.748-58.82-47.044-70.733C395.475,25.704,334.598,0.001,256.919,0.001 c-90.172,0-121.984,21.7-146.62,61.85c-34.475,8.115-59.093,38.921-59.093,74.684c0,12.749,3.115,25.122,9.071,36.224 C43.782,187.274,34.139,208.291,34.139,230.401z"/>\n                <path fill="${i}" d="M316.507,424.876c-1.621,1.621-2.475,3.84-2.475,6.059c0,2.304,0.853,4.437,2.475,6.059 c1.621,1.536,3.755,2.475,5.973,2.475c2.304,0,4.437-0.939,6.059-2.475c1.621-1.621,2.475-3.755,2.475-6.059 c0-2.219-0.853-4.437-2.475-6.059C325.382,421.719,319.664,421.719,316.507,424.876z"/>\n                <path fill="${i}" d="M223.664,458.668c-1.536,1.621-2.475,3.755-2.475,6.059c0,2.219,0.939,4.437,2.475,6.059 c1.621,1.536,3.84,2.475,6.059,2.475c2.304,0,4.437-0.939,6.059-2.475c1.621-1.621,2.475-3.84,2.475-6.059 c0-2.219-0.853-4.437-2.475-6.059C232.624,455.511,226.907,455.511,223.664,458.668z"/>\n                <path fill="${i}" d="M337.67,411.905c1.621-1.621,2.475-3.755,2.475-6.059c0-2.219-0.853-4.437-2.475-6.059 c-3.157-3.157-8.875-3.072-12.032,0.085c-1.621,1.536-2.56,3.755-2.56,5.973c0,2.304,0.939,4.437,2.56,6.059 c1.536,1.621,3.755,2.475,5.973,2.475C333.915,414.38,336.048,413.527,337.67,411.905z"/>\n                <path fill="${i}" d="M213.339,238.935c4.71,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.181-2.176,5.803-7.33,3.627-11.511 c-2.534-4.873-10.581-13.124-24.636-13.124c-14.054,0-22.101,8.252-24.636,13.124c-2.125,4.087-0.555,8.969,3.456,11.23 c4.011,2.287,9.156,0.811,11.563-3.123c0.077-0.128,0.495-0.623,1.084-1.195v5.564 C204.806,235.112,208.629,238.935,213.339,238.935z"/>\n                <path fill="${i}" d="M256.006,332.801c20.028,0,30.507-9.907,31.633-11.034c3.294-3.294,3.285-8.567,0.043-11.913 c-3.234-3.345-8.61-3.439-12.015-0.247c-0.265,0.247-6.699,6.127-19.661,6.127c-12.774,0-19.208-5.709-19.652-6.118 c-3.336-3.251-8.678-3.217-11.981,0.085c-3.337,3.336-3.337,8.73,0,12.066C225.499,322.894,235.978,332.801,256.006,332.801z"/>\n                <path fill="${i}" d="M298.672,238.935c4.71,0,8.533-3.823,8.533-8.533v-5.615c0.546,0.529,0.922,0.964,0.964,1.024 c1.519,2.918,4.497,4.591,7.578,4.591c1.323,0,2.671-0.307,3.934-0.964c4.181-2.176,5.803-7.33,3.627-11.511 c-2.534-4.873-10.581-13.124-24.636-13.124s-22.101,8.252-24.636,13.124c-2.125,4.087-0.555,8.969,3.456,11.23 c4.011,2.287,9.165,0.811,11.563-3.123c0.077-0.128,0.495-0.623,1.084-1.195v5.564 C290.139,235.112,293.962,238.935,298.672,238.935z"/>\n                <path fill="${i}" d="M511.571,500.771l-8.533-25.6c-8.883-26.658-62.464-65.212-136.098-65.212c-3.482,0-6.613,2.116-7.919,5.333 c-0.316,0.802-33.015,79.642-103.014,79.642c-69.99,0-102.69-79.181-103.014-79.983c-1.306-3.226-4.437-5.35-7.919-5.35 c-106.001,0-130.97,50.185-136.098,65.57l-8.533,25.6c-1.493,4.471,0.93,9.301,5.402,10.795c4.48,1.502,9.301-0.93,10.795-5.402 l8.533-25.6c8.465-25.412,42.974-52.514,114.381-53.845c9.293,19.703,45.577,85.282,116.454,85.282 c70.827,0,107.102-65.229,116.437-84.898c64.051,1.835,108.339,35.294,114.398,53.461l8.533,25.6 c1.195,3.576,4.523,5.837,8.098,5.837c0.887,0,1.801-0.137,2.697-0.435C510.64,510.073,513.064,505.243,511.571,500.771z"/>\n                <path fill="${i}" d="M375.472,281.601v17.067c0,4.71,3.823,8.533,8.533,8.533c4.71,0,8.533-3.823,8.533-8.533v-17.067 c0-4.71-3.823-8.533-8.533-8.533C379.295,273.068,375.472,276.891,375.472,281.601z"/>\n                <path fill="${i}" d="M188.934,405.847c0-2.219-0.939-4.437-2.56-5.973c-3.157-3.243-8.875-3.243-12.032,0 c-1.621,1.536-2.475,3.755-2.475,5.973c0,2.304,0.853,4.437,2.475,6.059s3.755,2.475,6.059,2.475 c2.219,0,4.437-0.853,5.973-2.475C187.995,410.284,188.934,408.151,188.934,405.847z"/>\n                <path fill="${i}" d="M189.531,439.468c2.219,0,4.437-0.939,5.973-2.475c1.621-1.621,2.475-3.755,2.475-6.059c0-2.219-0.853-4.437-2.475-6.059 c-3.157-3.157-8.875-3.157-12.032,0c-1.621,1.621-2.475,3.84-2.475,6.059c0,2.304,0.853,4.437,2.475,6.059 C185.008,438.529,187.227,439.468,189.531,439.468z"/>\n                <path fill="${i}" d="M200.624,445.356c-1.621,1.621-2.56,3.755-2.56,6.059c0,2.219,0.939,4.437,2.56,5.973c1.621,1.621,3.755,2.56,6.059,2.56 c2.219,0,4.437-0.939,5.973-2.56c1.621-1.536,2.475-3.755,2.475-5.973c0-2.304-0.853-4.523-2.475-6.059 C209.499,442.199,203.782,442.199,200.624,445.356z"/>\n                <path fill="${i}" d="M119.472,281.601v17.067c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533v-17.067 c0-4.71-3.823-8.533-8.533-8.533S119.472,276.891,119.472,281.601z"/>\n            </svg>`},r.icon.teddy=function(e,t,i,n,o){return r.isNEU(n)&&(n=0),r.isNEU(o)&&(o=0),`<svg width="${e}" height="${t}" x="${n}" y="${o}" viewBox="0 0 512 512">\n                <path fill="${i}" d="M234.513,246.613c9.378-1.929,16.555-9.02,21.487-15.863c4.932,6.844,12.109,13.935,21.487,15.863 c1.459,0.299,3.089,0.486,4.873,0.486c6.118,0,13.978-2.304,22.34-10.667c3.337-3.337,3.337-8.73,0-12.066s-8.73-3.337-12.066,0 c-4.361,4.369-8.337,6.212-11.699,5.53c-6.912-1.408-13.611-12.203-16.401-18.364c9.523-3.866,17.067-13.577,17.067-23.799 c0-9.353-9.566-14.933-25.6-14.933c-16.026,0-25.6,5.581-25.6,14.933c0,10.223,7.535,19.934,17.067,23.799 c-2.807,6.178-9.498,16.956-16.401,18.364c-3.405,0.666-7.339-1.178-11.699-5.53c-3.336-3.337-8.73-3.337-12.066,0 s-3.337,8.73,0,12.066C218.104,247.236,228.062,247.91,234.513,246.613z M263.748,190.669c-1.502,2.944-4.873,5.598-7.748,5.598\ts-6.246-2.654-7.748-5.598C251.793,189.833,260.207,189.833,263.748,190.669z"/>\n                <path fill="${i}" d="M390.033,53.7c1.621,1.613,2.5,3.755,2.5,6.033s-0.879,4.42-2.5,6.025c-3.337,3.337-3.337,8.738,0,12.075 c1.664,1.664,3.849,2.5,6.033,2.5s4.369-0.836,6.033-2.492c4.838-4.838,7.501-11.273,7.501-18.108s-2.662-13.269-7.501-18.099 c-9.984-9.984-26.214-9.984-36.198,0c-3.337,3.328-3.337,8.73,0,12.066s8.73,3.337,12.066,0 C381.303,50.372,386.697,50.372,390.033,53.7z"/>\n                <path fill="${i}" d="M311.467,136.533c7.057,0,12.8-5.743,12.8-12.8c0-7.057-5.743-12.8-12.8-12.8s-12.8,5.743-12.8,12.8 C298.667,130.79,304.41,136.533,311.467,136.533z"/>\n                <path fill="${i}" d="M200.533,136.533c7.057,0,12.8-5.743,12.8-12.8c0-7.057-5.743-12.8-12.8-12.8s-12.8,5.743-12.8,12.8 C187.733,130.79,193.476,136.533,200.533,136.533z"/>\n                <path fill="${i}" d="M115.934,80.333c2.185,0,4.369-0.836,6.042-2.5c3.328-3.337,3.328-8.738-0.009-12.075c-1.613-1.604-2.5-3.746-2.5-6.025 s0.887-4.42,2.509-6.033c3.209-3.226,8.841-3.226,12.058,0c3.328,3.337,8.738,3.328,12.066,0 c3.337-3.328,3.337-8.738,0.009-12.066c-9.677-9.677-26.539-9.668-36.207-0.009c-4.838,4.838-7.501,11.273-7.501,18.108 s2.662,13.269,7.501,18.108C111.565,79.497,113.749,80.333,115.934,80.333z"/>\n                <path fill="${i}" d="M498.552,286.191c-28.262-23.945-91.742-14.2-98.884-13.005c-4.651,0.768-7.791,5.171-7.014,9.813 c0.777,4.651,5.171,7.799,9.813,7.014c17.246-2.867,66.133-6.827,85.052,9.199c5.06,4.284,7.415,9.54,7.415,16.521 c0,3.977-1.476,6.946-4.779,9.626c-24.098,19.567-114.33,5.982-147.063-0.913c-3.703-0.776-7.441,0.981-9.242,4.275 c-1.801,3.311-1.212,7.424,1.434,10.095c0.12,0.119,8.499,8.755,12.493,19.951c-2.125-0.222-4.267-0.367-6.443-0.367 c-37.641,0-68.267,34.458-68.267,76.8c0,7.629,1.024,14.993,2.884,21.956c-3.823,1.715-10.197,3.644-19.951,3.644 c-10.052,0-16.367-2.082-19.908-3.814c1.826-6.912,2.842-14.217,2.842-21.786c0-42.342-30.626-76.8-68.267-76.8 c-2.176,0-4.318,0.145-6.443,0.367c3.994-11.196,12.373-19.831,12.476-19.934c2.671-2.671,3.268-6.775,1.468-10.095 c-1.792-3.319-5.521-5.069-9.259-4.292c-32.725,6.895-122.974,20.48-147.063,0.913c-3.302-2.68-4.779-5.649-4.779-9.626 c0-6.98,2.355-12.228,7.407-16.512c18.867-15.991,67.806-12.066,85.06-9.208c4.651,0.794,9.045-2.364,9.813-7.014 c0.776-4.651-2.364-9.045-7.006-9.813c-7.151-1.195-70.613-10.957-98.884,13.005C4.651,293.649,0,303.863,0,315.733 c0,9.079,3.831,16.998,11.093,22.886c27.179,22.05,102.818,12.783,140.535,6.426c-2.825,5.47-5.188,11.896-6.11,18.825 c-25.216,11.29-43.119,38.98-43.119,71.33c0,42.342,30.626,76.8,68.267,76.8c25.446,0,47.642-15.778,59.383-39.057 c5.743,2.56,14.174,4.924,25.95,4.924c11.674,0,20.164-2.287,26.035-4.77C293.794,496.29,315.938,512,341.333,512 c37.641,0,68.267-34.458,68.267-76.8c0-32.35-17.903-60.041-43.119-71.33c-0.922-6.929-3.277-13.355-6.101-18.825 c37.717,6.357,113.365,15.633,140.527-6.426c7.262-5.888,11.093-13.807,11.093-22.886 C512,303.863,507.349,293.649,498.552,286.191z M170.667,494.933c-28.237,0-51.2-26.795-51.2-59.733s22.963-59.733,51.2-59.733 s51.2,26.795,51.2,59.733S198.904,494.933,170.667,494.933z M392.533,435.2c0,32.939-22.963,59.733-51.2,59.733 c-20.983,0-39.04-14.814-46.942-35.942c-0.145-0.614-0.324-1.186-0.606-1.766c-2.338-6.818-3.652-14.242-3.652-22.025 c0-32.939,22.963-59.733,51.2-59.733C369.57,375.467,392.533,402.261,392.533,435.2z"/>\n                <path fill="${i}" d="M307.2,443.733c0,18.825,15.309,34.133,34.133,34.133c18.825,0,34.133-15.309,34.133-34.133 c0-18.825-15.309-34.133-34.133-34.133C322.509,409.6,307.2,424.909,307.2,443.733z M358.4,443.733 c0,9.412-7.654,17.067-17.067,17.067c-9.404,0-17.067-7.654-17.067-17.067c0-9.412,7.663-17.067,17.067-17.067 C350.746,426.667,358.4,434.321,358.4,443.733z"/>\n                <path fill="${i}" d="M115.541,118.161c-8.619,21.709-13.141,45.525-13.141,69.572c0,67.849,52.762,136.533,153.6,136.533 s153.6-68.685,153.6-136.533c0-24.491-4.412-47.846-13.107-69.581c26.957-5.76,47.24-29.764,47.24-58.419 C443.733,26.795,416.93,0,384,0c-24.67,0-46.14,14.916-55.108,36.745C307.115,23.859,282.368,17.067,256,17.067 c-26.615,0-51.2,6.716-73.259,19.925C174.08,14.754,153.088,0,128,0C95.061,0,68.267,26.795,68.267,59.733 C68.267,88.397,88.559,112.41,115.541,118.161z M128,17.067c19.226,0,35.021,12.177,40.115,30.054 c-11.085,8.61-21.163,18.816-29.901,30.592c-2.807,3.789-2.014,9.131,1.775,11.938c3.789,2.816,9.139,2.022,11.938-1.766 c8.9-12.006,19.26-22.281,30.788-30.507C204.288,41.95,228.949,34.133,256,34.133c41.429,0,78.396,19.098,104.098,53.786 c1.681,2.253,4.25,3.447,6.869,3.447c1.766,0,3.55-0.546,5.077-1.681c3.78-2.799,4.574-8.149,1.775-11.938 c-8.969-12.092-19.157-22.485-30.345-31.104c5.427-17.374,21.632-29.577,40.525-29.577c23.526,0,42.667,19.14,42.667,42.667 S407.526,102.4,384,102.4c-2.935,0-5.658,1.502-7.228,3.985c-1.553,2.483-1.732,5.589-0.461,8.243 c10.761,22.443,16.222,47.044,16.222,73.105C392.533,247.1,345.634,307.2,256,307.2s-136.533-60.1-136.533-119.467 c0-25.617,5.615-50.901,16.23-73.122c1.263-2.637,1.084-5.751-0.478-8.226c-1.562-2.483-4.292-3.985-7.219-3.985 c-23.526,0-42.667-19.14-42.667-42.667S104.474,17.067,128,17.067z"/>\n                <path fill="${i}" d="M256,290.133c47.053,0,85.333-30.626,85.333-68.267c0-36.258-36.489-76.8-85.333-76.8s-85.333,40.542-85.333,76.8 C170.667,259.507,208.947,290.133,256,290.133z M256,162.133c38.451,0,68.267,32.111,68.267,59.733 c0,28.237-30.626,51.2-68.267,51.2c-37.641,0-68.267-22.963-68.267-51.2C187.733,194.244,217.557,162.133,256,162.133z"/>\n                <path fill="${i}" d="M170.667,409.6c-18.825,0-34.133,15.309-34.133,34.133c0,18.825,15.309,34.133,34.133,34.133 s34.133-15.309,34.133-34.133C204.8,424.909,189.491,409.6,170.667,409.6z M170.667,460.8c-9.412,0-17.067-7.654-17.067-17.067 c0-9.412,7.654-17.067,17.067-17.067c9.412,0,17.067,7.654,17.067,17.067C187.733,453.146,180.079,460.8,170.667,460.8z"/>\n            </svg>`},r.prototype.exportPDFProfile=function(e,t){e=this._defaultExportProfileOptions(e,"pdf"),this._exportProfile(e,t)},r.prototype.exportPDFPreview=function(e){r.pdfPrevUI.show(this,e)},r.prototype.exportPNGProfile=function(e,t){e=this._defaultExportProfileOptions(e,"png"),this._exportProfile(e,t)},r.prototype.shareProfile=function(e){var t;"object"==typeof e?e=(t=e).focusId:t=this.editUI.content(e,!0,!0,"100%",!0);var i=new URL(window.location.href);i.searchParams.append("nodeId",e);var n={title:t.title,text:t.shareText,url:i.href};try{navigator.share(n)}catch(e){console.error("error: "+e)}},r.prototype.exportPDF=function(e,t){e=this._defaultExportOptions(e,"pdf"),this._export(e,t)},r.prototype.exportPNG=function(e,t){e=this._defaultExportOptions(e,"png"),this._export(e,t)},r.prototype.exportSVG=function(e,t){e=this._defaultExportOptions(e,"svg"),this._export(e,t)},r.prototype._defaultExportOptions=function(e,t){return null==e&&(e={}),"svg"==t?(e.ext="svg",e.mime="image/svg+xml"):"pdf"==t?(e.mime="application/pdf",e.ext="pdf"):"png"==t&&(e.mime="image/png",e.ext="png"),null==e.margin&&(e.margin=[50,40,50,40]),null==e.padding&&(e.padding=0),null==e.landscape&&(e.landscape=!1),null==e.filename&&(e.filename="FamilyTree."+e.ext),null==e.scale&&(e.scale="fit"),null==e.format&&(e.format="fit"),null==e.header&&(e.header=""),"pdf"==t&&null==e.footer?e.footer="Page {current-page} of {total-pages}":null==e.footer&&(e.footer=""),null==e.openInNewTab&&(e.openInNewTab=!1),null==e.mode&&(e.mode="bft-"+this.config.mode),e},r.prototype._export=function(e,t){var i=this,n={id:e.nodeId,expandChildren:e.expandChildren};e.margin&&e.margin[0]<2&&(e.margin[0]=2),e.margin&&e.margin[1]<2&&(e.margin[1]=2),e.margin&&e.margin[2]<2&&(e.margin[2]=2),e.margin&&e.margin[3]<2&&(e.margin[3]=2),this._draw(!1,r.action.exporting,n,(function(n){var o=document.createElement("div");if(o.innerHTML=n,e.padding>0){var a=o.querySelector("svg"),l=r._getViewBox(a);l[0]-=e.padding,l[1]-=e.padding,l[2]+=2*e.padding,l[3]+=2*e.padding,a.setAttribute("viewBox",l.join()),a.setAttribute("width",l[2]),a.setAttribute("height",l[3])}if("svg"==e.ext)if(t)t(e,o.innerHTML);else{(a=o.querySelector("svg")).classList.add("bft-"+i.config.mode);var s={content:o.innerHTML,options:e,styles:""},d=r.events.publish("exportstart",[i,s]),c=i.element.querySelector("[data-bft-styles]");if(c&&(s.styles+=c.outerHTML),s.styles&&(o.childNodes[0].insertAdjacentHTML("afterbegin",s.styles),s.content=o.innerHTML),!1===d)return!1;if(!1===(d=r.events.publish("exportend",[i,s])))return!1;r._downloadFile(e.mime,s.content,s.options.filename,s.options.openInNewTab)}else i._pages(e,o.querySelector("svg"),(function(n){var a={content:o.innerHTML,options:e,pages:n,styles:""},l=r.events.publish("exportstart",[i,a]),s=i.element.querySelector("[data-bft-styles]");if(s&&(a.styles+=s.outerHTML),!1===l)return!1;t||r.loading.show(i),t?t(i,a,o.querySelector("svg")):(a=JSON.stringify(a),r._ajax(i.config.exportUrl+"/v3","POST",a,"arraybuffer",(function(t){var n=r.events.publish("exportend",[i,t]);if(r.loading.hide(i),!1===n)return!1;r._downloadFile(e.mime,t,e.filename,e.openInNewTab)})))}))}))},r.prototype.exportCSV=function(e){e||(e="FamilyTree.csv");var t={ext:"csv",filename:e,nodes:JSON.parse(JSON.stringify(this.config.nodes))};if(!1===r.events.publish("exportstart",[this,t]))return!1;var i=r._json2csv(t.nodes),n={ext:t.ext,filename:t.filename,nodes:t.nodes,content:i};if(!1===r.events.publish("exportend",[this,n]))return!1;r._downloadFile("text/csv;charset=utf-8;","\ufeff"+n.content,n.filename,n.openInNewTab)},r.prototype.exportXML=function(e){e||(e="FamilyTree.xml");var t={ext:"xml",filename:e,nodes:JSON.parse(JSON.stringify(this.config.nodes))};if(!1===r.events.publish("exportstart",[this,t]))return!1;var i=r._json2xml(t.nodes),n={ext:t.ext,filename:t.filename,nodes:t.nodes,content:i};if(!1===r.events.publish("exportend",[this,n]))return!1;r._downloadFile("application/xml",n.content,n.filename,n.openInNewTab)},r.prototype.exportJSON=function(e){e||(e="FamilyTree.json");var t={ext:"json",filename:e,nodes:JSON.parse(JSON.stringify(this.config.nodes))};if(!1===r.events.publish("exportstart",[this,t]))return!1;var i={ext:t.ext,filename:t.filename,nodes:t.nodes,content:JSON.stringify(t.nodes)};if(!1===r.events.publish("exportend",[this,i]))return!1;r._downloadFile("application/json",i.content,i.filename,i.openInNewTab)},r.prototype._pages=function(e,t,i){"A5"==e.format&&"fit"!=e.scale||"A4"==e.format&&"fit"!=e.scale||"A3"==e.format&&"fit"!=e.scale||"A2"==e.format&&"fit"!=e.scale||"A1"==e.format&&"fit"!=e.scale||"Letter"==e.format&&"fit"!=e.scale||"Legal"==e.format&&"fit"!=e.scale?i(this._pagesA100(e,t,e.scale)):"A5"==e.format&&"fit"==e.scale||"A4"==e.format&&"fit"==e.scale||"A3"==e.format&&"fit"==e.scale||"A2"==e.format&&"fit"==e.scale||"A1"==e.format&&"fit"==e.scale||"Letter"==e.format&&"fit"==e.scale||"Legal"==e.format&&"fit"==e.scale?i(this._pagesAfit(e,t)):"fit"==e.format&&i(this._pagesFit(e,t))},r.prototype._pagesFit=function(e,t){var i=t.getAttribute("width"),n=t.getAttribute("height"),o=r._getViewBox(t),a={w:parseFloat(i),h:parseFloat(n)};return[{vb:o,size:{w:a.w+(e.margin[1]+e.margin[3]),h:a.h+(e.margin[0]+e.margin[2])},innerSize:a}]},r.prototype._pagesAfit=function(e,t){var i=t.getAttribute("width"),n=0,o=0;switch(e.format){case"A5":n=r.A5w,o=r.A5h;break;case"A4":n=r.A4w,o=r.A4h;break;case"A3":n=r.A3w,o=r.A3h;break;case"A2":n=r.A2w,o=r.A2h;break;case"A1":n=r.A1w,o=r.A1h;break;case"Letter":n=r.Letterw,o=r.Letterh;break;case"Legal":n=r.Legalw,o=r.Legalh}var a=e.landscape?o-(e.margin[1]+e.margin[3]):n-(e.margin[1]+e.margin[3]),l=(e.landscape,e.margin[0],e.margin[2],a/i);return this._pagesA100(e,t,100*l)},r.prototype._pagesA100=function(e,t,i){var n=r._getViewBox(t),o=0,a=0;switch(e.format){case"A5":o=r.A5w,a=r.A5h;break;case"A4":o=r.A4w,a=r.A4h;break;case"A3":o=r.A3w,a=r.A3h;break;case"A2":o=r.A2w,a=r.A2h;break;case"A1":o=r.A1w,a=r.A1h;break;case"Letter":o=r.Letterw,a=r.Letterh;break;case"Legal":o=r.Legalw,a=r.Legalh}var l=n[0],s=n[1],d=n[2],c=n[3],p={w:e.landscape?a-(e.margin[1]+e.margin[3]):o-(e.margin[1]+e.margin[3]),h:e.landscape?o-(e.margin[0]+e.margin[2]):a-(e.margin[0]+e.margin[2])},h={w:e.landscape?a:o,h:e.landscape?o:a};t.setAttribute("preserveAspectRatio","xMinYMin slice"),t.setAttribute("width",p.w),t.setAttribute("height",p.h);for(var f=p.w*(100/i),u=p.h*(100/i),g=l,m=s,b=[];g<d+l;){for(;m<c+s;){var v=[g,m,f,u];v=v.join(),b.push({vb:v,innerSize:p,size:h}),m+=u}g+=f,m=s}return b},r.prototype._defaultExportProfileOptions=function(e,t){return(r.isNEU(e)||r.isNEU(e.id))&&console.error("options.id is not defilned"),"svg"==t?(e.ext="svg",e.mime="image/svg+xml"):"pdf"==t?(e.mime="application/pdf",e.ext="pdf"):"png"==t&&(e.mime="image/png",e.ext="png"),null==e.margin&&(e.margin=[50,40,50,40]),null==e.padding&&(e.padding=0),null==e.landscape&&(e.landscape=!1),null==e.filename&&(e.filename="Profile."+e.ext),null==e.scale&&(e.scale="fit"),null==e.format&&(e.format="A4"),null==e.header&&(e.header=""),null==e.footer&&(e.footer=""),null==e.openInNewTab&&(e.openInNewTab=!1),null==e.mode&&(e.mode="bft-"+this.config.mode),e},r.prototype._exportProfile=function(e,t){var i=this,n=0,o=0;switch(e.format){case"A5":n=r.A5w,o=r.A5h;break;case"A4":n=r.A4w,o=r.A4h;break;case"A3":n=r.A3w,o=r.A3h;break;case"A2":n=r.A2w,o=r.A2h;break;case"A1":n=r.A1w,o=r.A1h;break;case"Letter":n=r.Letterw,o=r.Letterh;break;case"Legal":n=r.Legalw,o=r.Legalh}var a={w:e.landscape?o-(e.margin[1]+e.margin[3]):n-(e.margin[1]+e.margin[3]),h:e.landscape?n-(e.margin[0]+e.margin[2]):o-(e.margin[0]+e.margin[2])},l={w:e.landscape?o:n,h:e.landscape?n:o},s=this.editUI.content(e.id,!0,!0,"100%",!0).element;r.input.init(s);var d={content:s.outerHTML,options:e,pages:[{vb:"",innerSize:a,size:l}],styles:""};if(!t){if(!1===r.events.publish("exportstart",[i,d]))return!1;r.loading.show(i)}var c=this.element.querySelector("[data-bft-styles]");c&&(d.styles+=c.outerHTML);var p=this.getSvg().querySelector("defs");if(p)for(var h=0;h<p.children.length;h++)"style"==p.children[h].nodeName.toLowerCase()&&(d.styles+=p.children[h].outerHTML);d=JSON.stringify(d),r._ajax(this.config.exportUrl+"/v3","POST",d,"arraybuffer",(function(n){if(t)t(i,n);else{var o=r.events.publish("exportend",[i,n]);if(r.loading.hide(i),!1===o)return!1;r._downloadFile(e.mime,n,e.filename,e.openInNewTab)}}))},void 0===r&&(r={}),r.events=(n={},{on:function(e,t,i){Array.isArray(n[e])||(n[e]=[]),n[e].push({listener:t,event_id:i})},removeAll:function(e){Array.isArray(n[e])||(n[e]=[]),n[e]=[]},has:function(e,t){if(n[e]&&Array.isArray(n[e])&&n[e].length>0){if(r.isNEU(t))return!0;for(var i=0;i<n[e].length;i++)if(n[e][i].event_id==t)return!0}return!1},removeForEventId:function(e){for(var t in n)if(Array.isArray(n[t]))for(var i=n[t].length-1;i>=0;i--)n[t][i].event_id==e&&n[t].splice(i,1)},publish:function(e,t){if(n[e]){for(var i=[],r=0;r<n[e].length;r++){var o=n[e][r];null!=o.event_id&&o.event_id!=t[0]._event_id||i.push(o.listener)}if(i.length>0){var a=!0;for(r=0;r<i.length&&(1==t.length?a=i[r](t[0])&&a:2==t.length?a=i[r](t[0],t[1])&&a:3==t.length?a=i[r](t[0],t[1],t[2])&&a:4==t.length?a=i[r](t[0],t[1],t[2],t[3])&&a:5==t.length&&(a=i[r](t[0],t[1],t[2],t[3],t[4])&&a),!1!==a);r++);return a}}}}),r.prototype.importCSV=function(){var e=this,t=document.createElement("INPUT");t.setAttribute("type","file"),t.setAttribute("accept",".csv"),t.style.display="none",t.onchange=function(t){var i=t.target,n=new FileReader;n.onload=function(){var t=n.result,i=r._csvToArray(t),o=[],a=i[0];r._importSetColumnNames(a,(function(t){for(var n=1;n<i.length;n++){for(var a={},l=0;l<i[n].length;l++){var s=t[l],d=i[n][l];a[s]=r._convertStringToArray(s,d)}""!=a.id.trim()&&o.push(a)}var c={nodes:o,columnNames:i[0]};0!=r.events.publish("import",[e,c])&&(e.config.nodes=c.nodes,e.draw())}))},n.readAsText(i.files[0])},t.click()},r._importSetColumnNames=function(e,t){if(-1==e.indexOf("id")||-1==e.indexOf("pid")){var i=document.createElement("DIV"),n=document.createElement("P");n.style.padding="5px",n.style.color="rgb(122, 122, 122)",n.innerHTML=r.IMPORT_MESSAGE,i.appendChild(n);var o=document.createElement("div"),a=document.createElement("div"),l=document.createElement("div"),s=document.createElement("span");o.setAttribute("id","bft-sampleDialog"),o.style.height="260px",o.style.width="400px",o.style.background="white",o.style.border="0.5px solid grey",o.style.position="fixed",o.style.overflow="hidden",o.style.zIndex="99",a.setAttribute("id","title"),a.style.backgroundColor="#e5e5e5",a.style.fontWeight="bold",a.style.color="rgb(122, 122, 122)",a.style.height="20px",a.style.padding="3px 0 0 7px",s.setAttribute("id","close"),s.style.cursor="pointer",s.style.position="absolute",s.style.color="rgb(122, 122, 122)",s.style.fontWeight="bold",s.style.top="2px",s.style.zIndex=100,l.setAttribute("id","content"),l.style.padding="2px",a.innerHTML="Import Organizational Chart Data",s.innerHTML="&times;";var d=document.createElement("HR");d.style.height="0.1px",d.style.backgroundColor="#aeaeae",d.style.border="none",d.style.margin="0",o.appendChild(a),o.appendChild(d),l.appendChild(i),o.appendChild(l),o.appendChild(s),document.body.appendChild(o),r._importCenter(o),s.style.left=o.offsetWidth-20+"px";var c=document.createElement("div");c.setAttribute("id","overlay"),c.style.width="100%",c.style.height="100%",c.style.left=0,c.style.top=0,c.style.position="fixed",c.style.background="grey",c.style.opacity="0.5",c.style.zIndex=98,document.body.appendChild(c),o._overlay=c;var p=document.createElement("LABEL"),h=document.createTextNode("Name:");p.setAttribute("for","bft-id-select"),p.appendChild(h),p.style.fontSize="16px",p.style.color="rgb(122, 122, 122)",p.style.padding="5px",p.style.margin="5px",p.style.width="30%",p.style.textAlign="right",p.style.display="inline-block",i.appendChild(p);var f=document.createElement("SELECT");f.id="bft-id-select",f.style.fontSize="16px",f.style.color="rgb(122, 122, 122)",f.style.padding="5px",f.style.margin="5px",f.style.width="60%",f.style.border="1px solid #aeaeae",i.appendChild(f);var u=document.createElement("BR");i.appendChild(u);for(var g=0;g<e.length;g++){(x=document.createElement("option")).setAttribute("value",e[g]);var m=document.createTextNode(e[g]);x.appendChild(m),f.appendChild(x)}var b=document.createElement("LABEL"),v=document.createTextNode("Reports to:");b.setAttribute("for","pid-select"),b.appendChild(v),b.style.fontSize="16px",b.style.color="rgb(122, 122, 122)",b.style.padding="5px",b.style.margin="5px",b.style.width="30%",b.style.textAlign="right",b.style.display="inline-block",i.appendChild(b);var y=document.createElement("SELECT");for(y.id="pid-select",y.style.fontSize="16px",y.style.color="rgb(122, 122, 122)",y.style.padding="5px",y.style.margin="5px",y.style.width="60%",y.style.border="1px solid #aeaeae",i.appendChild(y),g=0;g<e.length;g++){var x;(x=document.createElement("option")).setAttribute("value",e[g]),m=document.createTextNode(e[g]),x.appendChild(m),y.appendChild(x)}var _=document.createElement("BUTTON");_.innerHTML="Import",_.style.fontSize="16px",_.style.color="rgb(122, 122, 122)",_.style.padding="5px 20px",_.style.margin="20px auto",_.style.display="block",_.onclick=function(){o.style.display="none",o._overlay&&o._overlay.parentNode.removeChild(o._overlay);var i=f.options[f.selectedIndex].value,n=e.indexOf(i);e[n]="id";var r=y.options[y.selectedIndex].value,a=e.indexOf(r);e[a]="pid",t(e)};var w=document.createElement("DIV");return w.appendChild(_),i.appendChild(w),s.onclick=function(e){o._overlay&&o._overlay.parentNode.removeChild(o._overlay),o.parentNode.removeChild(o),e.stopPropagation()},a.onmousedown=function(e){e=e||window.event,o._dragging=!0,o._originalLeft=o.offsetLeft,o._originalTop=o.offsetTop,o._mouseLeft=e.clientX,o._mouseTop=e.clientY},document.onmousemove=function(e){e=e||window.event,o._dragging&&(o.style.left=o._originalLeft+e.clientX-o._mouseLeft+"px",o.style.top=o._originalTop+e.clientY-o._mouseTop+"px")},document.onmouseup=function(e){e=e||window.event,o._dragging&&(o.style.left=o._originalLeft+e.clientX-o._mouseLeft+"px",o.style.top=o._originalTop+e.clientY-o._mouseTop+"px",o._dragging=!1)},o}t(e)},r._importCenter=function(e){e&&(e.style.left=(window.innerWidth-e.offsetWidth)/2+"px",e.style.top=(window.innerHeight-e.offsetHeight)/2+"px")},r.prototype.importXML=function(){var e=this,t=document.createElement("INPUT");t.setAttribute("type","file"),t.setAttribute("accept",".xml"),t.style.display="none",t.onchange=function(t){var i=t.target,n=new FileReader;n.onload=function(){var t=n.result,i=r._xml2json(t);0!=r.events.publish("import",[e,i])&&(e.config.nodes=i,e.draw())},n.readAsText(i.files[0])},t.click()},r.prototype.importJSON=function(){var e=this,t=document.createElement("INPUT");t.setAttribute("type","file"),t.setAttribute("accept",".json"),t.style.display="none",t.onchange=function(t){var i=t.target,n=new FileReader;n.onload=function(){var t=n.result,i=JSON.parse(t);0!=r.events.publish("import",[e,i])&&(e.config.nodes=i,e.draw())},n.readAsText(i.files[0])},t.click()},r._importSetColumnNames=function(e,t){t(e)},r.prototype.expand=function(e,t,i){var n={id:e,ids:t};this._draw(!1,r.action.expand,n,i)},r.prototype.collapse=function(e,t,i){var n={id:e,ids:t};this._draw(!1,r.action.collapse,n,i)},r.prototype.expandCollapse=function(e,t,i,n){Array.isArray(t)||(t=[]),Array.isArray(i)||(i=[]);var o={id:e,expandIds:t,collapseIds:i,ids:t.concat(i)};this._draw(!1,r.action.collapse,o,n)},r.prototype.changeRoots=function(e,t,i){this.config.roots=t;var n={id:e};this._draw(!1,r.action.update,n,i)},r.prototype.expandCollapseToLevel=function(e,t,i,n){this.config.collapse=t,null==i&&(i={}),this.config.expand=i;var o={id:e,method:"expandCollapseToLevel"};this._draw(!1,r.action.collapse,o,n)},r.prototype.maximize=function(e,t,i,n){var o=this,a={id:e,options:{}};r.isNEU(a.id)&&(a.id=this.roots[0].id,a.all=!0),a.options.horizontal=!1,a.options.vertical=!1,t&&(a.options.horizontal=t),i&&(a.options.vertical=i),this._draw(!1,r.action.maximize,a,(function(){o.ripple(e),n&&n()}))},r.prototype.minimize=function(e,t){var i=this,n={id:e};r.isNEU(n.id)&&(n.id=this.roots[0].id,n.all=!0),this._draw(!1,r.action.minimize,n,(function(){i.ripple(e),t&&t()}))},r.prototype._expCollHandler=function(e){this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var t=this.getNode(e),i=this.getCollapsedIds(t);if(i.length){if(!1===r.events.publish("expcollclick",[this,!1,e,i]))return!1;this.expand(e,i,!1)}else{if(!1===r.events.publish("expcollclick",[this,!0,e,t.childrenIds]))return!1;this.collapse(e,t.childrenIds,!1)}},r.prototype._upHandler=function(e){this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var t=this._upHandlerCreateArgs(e);if(!1===r.events.publish("up-click",[this,t]))return!1;this.changeRoots(t.id,t.roots,!1)},r.prototype._upHandlerCreateArgs=function(e){var t,i=this.getNode(e),n=Object.assign([],this.config.roots),r=this.getNode(i.pid);if(r&&(t=r),t){if(Array.isArray(n)){var o=n.indexOf(i.id);-1!=o&&n.splice(o,1)}else n=[];n.push(t.id)}return{id:i.id,roots:n}},r.prototype._upHandlerCreateArgs=function(e){var t=this.getNode(e),i=Object.assign([],this.config.roots),n=this.getRecentRootsByNodeId(e);return Array.isArray(i)||(i=[]),r._changeRootOption(i,n,this.manager.rootList),{id:t.id,roots:i}},String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)}),String.prototype.endsWith||(String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)}),String.prototype.splice||(String.prototype.splice=function(e,t,i){return this.slice(0,e)+i+this.slice(e+Math.abs(t))}),String.prototype.insert||(String.prototype.insert=function(e,t){return e>0?this.substring(0,e)+t+this.substr(e):t+this}),Array.prototype.unique||Object.defineProperty(Array.prototype,"unique",{value:function(){for(var e=this.concat(),t=0;t<e.length;++t)for(var i=t+1;i<e.length;++i)e[t]===e[i]&&e.splice(i--,1);return e},writable:!0,configurable:!0,enumerable:!1}),Array.prototype.has||Object.defineProperty(Array.prototype,"has",{value:function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return!0;return!1},writable:!0,configurable:!0,enumerable:!1}),Object.assign||Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},writable:!0,configurable:!0}),r.prototype._globalMouseDownHandler=function(e,t){var i={move:"mousemove",up:"mouseup",leave:"mouseleave"};if(-1!=t.type.indexOf("touch")&&(1==t.touches.length?this._touch={x:t.touches[0].clientX,y:t.touches[0].clientY}:this._touch=null,i={move:"touchmove",up:"touchend",touchstart:"touchstart"}),e==t.target)return t.stopPropagation(),t.preventDefault(),void this._mouseDownHandler(e,t,i);if(this.config.nodeMouseClick==r.action.pan){for(var n=t.target;n!=e&&!n.hasAttribute(r.attr.control_expcoll_id)&&!n.hasAttribute(r.attr.control_up_id);)n=n.parentNode;if(!n.hasAttribute(r.attr.control_expcoll_id)&&!n.hasAttribute(r.attr.control_up_id))return t.stopPropagation(),t.preventDefault(),void this._mouseDownHandler(e,t,i)}for(var o=t.target;o!=e;){if(o.hasAttribute(r.attr.node_id))return void this._nodeMouseDownHandler(o,t,i);if(o.hasAttribute(r.attr.control_node_circle_menu_name))return t.stopPropagation(),t.preventDefault(),void this._nodeCircleNodeMenuItemMouseDownHandler(o,t,i);o=o.parentNode}},r.prototype._globalClickHandler=function(e,t){if(-1!=t.type.indexOf("touch")&&this._touch&&1==t.changedTouches.length){if(t.changedTouches.length){var i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY},n=r.t(this.config.template,!1,this.getScale()).size,o=this.getScale(),a=Math.abs(i.x-this._touch.x)/o,l=Math.abs(i.y-this._touch.y)/o;if(this._touch=null,a>n[0]/10)return;if(l>n[1]/10)return}}else if(-1!=t.type.indexOf("touch")&&null==this._touch)return;for(var s=t.target;s!=e;){if(s.hasAttribute(r.attr.control_expcoll_id)){var d=s.getAttribute(r.attr.control_expcoll_id),c=this.getNode(d);return void this._expCollHandler(c.id)}if(s.hasAttribute(r.attr.node_id))return d=s.getAttribute(r.attr.node_id),c=this.getNode(d),void this._nodeClickHandler(c.id,t);if(s.hasAttribute(r.attr.control_node_menu_id))return t.stopPropagation(),t.preventDefault(),d=s.getAttribute(r.attr.control_node_menu_id),c=this.getNode(d),void this._nodeMenuClickHandler(c.id,s,t);if(s.hasAttribute(r.attr.control_node_circle_menu_id))return t.stopPropagation(),t.preventDefault(),d=s.getAttribute(r.attr.control_node_circle_menu_id),void this._nodeCircleMenuClickHandler(d);if(s.hasAttribute(r.attr.control_node_circle_menu_name))return t.stopPropagation(),t.preventDefault(),void this._nodeCircleMenuItemClickHandler(s,t);if(s.hasAttribute(r.attr.control_add))return void this._lonelyButtonHandler();if(s.hasAttribute(r.attr.control_up_id))return d=s.getAttribute(r.attr.control_up_id),t.stopPropagation(),t.preventDefault(),void this._upHandler(d);if(s.hasAttribute(r.attr.c_link_from))return void r.events.publish("clink-click",[this,{from:s.getAttribute(r.attr.c_link_from),to:s.getAttribute(r.attr.c_link_to),event:t}]);if(s.hasAttribute(r.attr.s_link_from))return void r.events.publish("slink-click",[this,{from:s.getAttribute(r.attr.s_link_from),to:s.getAttribute(r.attr.s_link_to),event:t}]);s=s.parentNode}},r.prototype._globalContextHandler=function(e,t){for(var i=t.target;i!=e;){if(i.hasAttribute(r.attr.node_id)){var n=i.getAttribute(r.attr.node_id),o=this.getNode(n);return void this._nodeContextHandler(o.id,t)}i=i.parentNode}},r.prototype._nodeContextHandler=function(e,t){t.preventDefault(),this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var i=this.get(e),n=null;if(null!=i&&Array.isArray(i.tags))for(var r=0;r<i.tags.length;r++){var o=i.tags[r];this.config.tags[o]&&this.config.tags[o].nodeContextMenu&&(n=this.config.tags[o].nodeContextMenu)}this.nodeContextMenuUI.show(t.pageX,t.pageY,e,null,n)},r.prototype._globalDbClickHandler=function(e,t){for(var i=t.target;i!=e;){if(i.hasAttribute(r.attr.node_id)){var n=i.getAttribute(r.attr.node_id),o=this.getNode(n);return void this._nodeDbClickHandler(o.id,t)}i=i.parentNode}},r.prototype._mouseScrollHandler=function(e,t){if(this.config.mouseScrool!=r.action.ctrlZoom||t.ctrlKey){var i=this,n=!1,o=this.config.zoom.speed,a=this.config.zoom.smooth,l=0,s=this.getScale(),d=r._centerPointInPercent(i.getSvg(),t.pageX,t.pageY),c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,20)};t.preventDefault();var p=t.delta||t.wheelDelta;void 0===p&&(p=-t.detail),p=Math.max(-1,Math.min(1,p)),l+=-p*o,n||function e(){n=!0;var t=(l-s)/a;t>0?t++:t--,s+=t,i.zoom(1-t/12/50,d),parseInt(s)==parseInt(l)?n=!1:c(e)}()}},r.prototype._nodeCircleNodeMenuItemMouseDownHandler=function(e,t,i){var n=e.parentNode.getAttribute(r.attr.control_node_circle_menu_wrraper_id),o=e.getAttribute(r.attr.control_node_circle_menu_name),a=this.nodeCircleMenuUI._menu[o];if(a.draggable){var l=this,s=r._getClientXY(t),d=this.getNode(n);e._dragEventFired=!1;var c=l.getScale(),p=null,h=null;this._gragStartedId=n,document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none";var f=this.getSvg(),u={x:s.x,y:s.y},g=e.cloneNode(!0);f.insertBefore(g,f.firstChild);var m=r._getTransform(g),b=m[4],v=m[5],y=function(e){for(;e&&!e.hasAttribute(r.attr.control_node_circle_menu_wrraper_id);)e=e.parentNode;if(e){var t=r._getTransform(e);return{x:t[4],y:t[5]}}console.error("cannot find parent"+r.attr.control_node_circle_menu_wrraper_id)}(e);g.setAttribute("transform","matrix(1,0,0,1,"+(b+y.x)+","+(v+y.y)+")"),g.style.opacity=.7;var x=function(e,t){if(null!=e){t.classList.remove("bft-drag-over");for(var i=r.getStParentNodes(l.getNode(p)),n=0;n<i.length;n++){var o=l.getNodeElement(i[n].id);o&&(o.style.opacity=1)}}},_=function(t){if(u){var i=r._getClientXY(t),n=t.target;r.isMobile()&&(n=document.elementFromPoint(i.x,i.y)),i.x+=y.x*c,i.y+=y.y*c;var s=r._getOffsetXY(l.element,t),d={left:l.width()-(s.x+l.config.padding)<0,right:s.x-l.config.padding<0,down:l.height()-(s.y+l.config.padding)<0,up:s.y-l.config.padding<0};if(d.left||d.right||d.up||d.down){f.classList&&(f.classList.remove("bft-cursor-grab"),f.classList.add("bft-cursor-move"),f.classList.remove("bft-cursor-nodrop"),f.classList.remove("bft-cursor-copy"));var _=m[4],k=m[5],S=u.x,C=u.y,I=i.x,N=i.y;l.startMove(d,(function(e){m[4]=_+e.x,m[5]=k+e.y,u.x=S-e.xWithoutScale,u.y=C-e.yWithoutScale,i.x=I-e.xWithoutScale,i.y=N-e.yWithoutScale,g.setAttribute("transform","matrix("+m.toString()+")")}))}else{for(l.stopMove(),f.classList&&(f.classList.add("bft-cursor-grab"),f.classList.remove("bft-cursor-move"),f.classList.remove("bft-cursor-nodrop"),f.classList.remove("bft-cursor-copy")),x(p,h),p=null,h=null;null!=n&&n!=f;){if(n.hasAttribute&&n.hasAttribute(r.attr.node_id)){var A=n.getAttribute(r.attr.node_id);p=A,h=n;break}n=n.parentNode}if(null!=p){h.classList.add("bft-drag-over");for(var M=l.getNode(p),E=r.getStParentNodes(M),L=0;L<E.length;L++){var T=l.getNodeElement(E[L].id);T&&(T.style.opacity=.1)}f.classList.remove("bft-cursor-grab"),f.classList.remove("bft-cursor-move"),f.classList.add("bft-cursor-copy"),f.classList.remove("bft-cursor-nodrop")}var U=(i.x-u.x)/c,O=(i.y-u.y)/c;m[4]=b+U,m[5]=v+O,!e._dragEventFired&&(Math.abs(i.x-u.x)>r.FIRE_DRAG_NOT_CLICK_IF_MOVE||Math.abs(i.y-u.y)>r.FIRE_DRAG_NOT_CLICK_IF_MOVE)&&(!1===r.events.publish("drag",[l.nodeCircleMenuUI,{from:A,menuItem:a,menuItemName:o}])&&w(),e._dragEventFired=!0),g.setAttribute("transform","matrix("+m.toString()+")")}}},w=function(t){if(l.stopMove(),f.classList&&(f.classList.remove("bft-cursor-grab"),f.classList.remove("bft-cursor-move"),f.classList.remove("bft-cursor-nodrop"),f.classList.remove("bft-cursor-copy")),f.removeEventListener(i.move,_),f.removeEventListener(i.up,w),i.leave&&f.removeEventListener(i.leave,w),d.id==p||null==p)return f.removeChild(g),l._gragStartedId=null,void(e._dragEventFired&&r.events.publish("drop",[l.nodeCircleMenuUI,{from:d.id,menuItemName:o,menuItem:a}]));var n=l.getNode(p);r.events.publish("drop",[l.nodeCircleMenuUI,{from:d.id,to:n.id,menuItem:a,menuItemName:o}]),x(p,h),f.removeChild(g),l._gragStartedId=null};f.addEventListener(i.move,_),f.addEventListener(i.up,w),i.leave&&f.addEventListener(i.leave,w)}},r.prototype._nodeMouseDownHandler=function(e,t,i){if(this.config.enableDragDrop){var n=r._getClientXY(t),o=e.getAttribute(r.attr.node_id),a=this.getNode(o);e._dragEventFired=!1;var l=null,s=null;this._gragStartedId=o,document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none";var d=this,c=this.getSvg(),p={x:n.x,y:n.y},h=r._getTransform(e),f=h[4],u=h[5],g=d.getScale(),m=e.cloneNode(!0);c.insertBefore(m,c.firstChild),m.style.opacity=.7;var b=function(e,t){if(null!=e){t.classList.remove("bft-drag-over");for(var i=d.getNode(l),n=r.getStParentNodes(i),o=0;o<n.length;o++){var a=d.getNodeElement(n[o].id);a&&(a.style.opacity=1)}}},v=function(t){if(p){var i=r._getClientXY(t),n=t.target;r.isMobile()&&(n=document.elementFromPoint(i.x,i.y));var o=r._getOffsetXY(d.element,t),v={left:d.width()-(o.x+d.config.padding)<0,right:o.x-d.config.padding<0,down:d.height()-(o.y+d.config.padding)<0,up:o.y-d.config.padding<0};if(v.left||v.right||v.up||v.down){c.classList&&(c.classList.remove("bft-cursor-grab"),c.classList.add("bft-cursor-move"),c.classList.remove("bft-cursor-nodrop"),c.classList.remove("bft-cursor-copy"));var x=h[4],_=h[5],w=p.x,k=p.y,S=i.x,C=i.y;d.startMove(v,(function(e){h[4]=x+e.x,h[5]=_+e.y,p.x=w-e.xWithoutScale,p.y=k-e.yWithoutScale,i.x=S-e.xWithoutScale,i.y=C-e.yWithoutScale,m.setAttribute("transform","matrix("+h.toString()+")")}))}else{if(d.stopMove(),c.classList&&(c.classList.add("bft-cursor-grab"),c.classList.remove("bft-cursor-move"),c.classList.remove("bft-cursor-nodrop"),c.classList.remove("bft-cursor-copy")),b(l,s),l=null,s=null,d.config.enableDragDrop)for(;null!=n&&n!=c;){if(n.hasAttribute&&n.hasAttribute(r.attr.node_id)){var I=n.getAttribute(r.attr.node_id);if(d._gragStartedId&&I!=d._gragStartedId){l=I,s=n;break}}n=n.parentNode}if(null!=l){s.classList.add("bft-drag-over");for(var N=d.getNode(l),A=r.getStParentNodes(N),M=0;M<A.length;M++){var E=d.getNodeElement(A[M].id);E&&(E.style.opacity=.1)}!d.canUpdateLink(a.id,l)&&c.classList?(c.classList.remove("bft-cursor-grab"),c.classList.remove("bft-cursor-move"),c.classList.remove("bft-cursor-copy"),c.classList.add("bft-cursor-nodrop")):c.classList&&(c.classList.remove("bft-cursor-grab"),c.classList.remove("bft-cursor-move"),c.classList.add("bft-cursor-copy"),c.classList.remove("bft-cursor-nodrop"))}var L=(i.x-p.x)/g,T=(i.y-p.y)/g;h[4]=f+L,h[5]=u+T,!e._dragEventFired&&(Math.abs(i.x-p.x)>r.FIRE_DRAG_NOT_CLICK_IF_MOVE||Math.abs(i.y-p.y)>r.FIRE_DRAG_NOT_CLICK_IF_MOVE)&&(!1===r.events.publish("drag",[d,I,t])&&y(),e._dragEventFired=!0),m.setAttribute("transform","matrix("+h.toString()+")")}}},y=function(t){if(d.stopMove(),c.classList&&(c.classList.remove("bft-cursor-grab"),c.classList.remove("bft-cursor-move"),c.classList.remove("bft-cursor-nodrop"),c.classList.remove("bft-cursor-copy")),c.removeEventListener(i.move,v),c.removeEventListener(i.up,y),i.leave&&c.removeEventListener(i.leave,y),a.id==l||null==l)return c.removeChild(m),d._gragStartedId=null,void(e._dragEventFired&&r.events.publish("drop",[d,a.id]));var n=d.getNode(l);if(!1===r.events.publish("drop",[d,a.id,n.id]))return b(l,s),c.removeChild(m),void(d._gragStartedId=null);if(d.canUpdateLink(a.id,l)){var o=d.get(a.id);o.pid=l,o.stpid=null,d.updateNode(o,null,!0)}else c.removeChild(m),b(l,s);d._gragStartedId=null};c.addEventListener(i.move,v),c.addEventListener(i.up,y),i.leave&&c.addEventListener(i.leave,y)}},r.prototype._resizeHandler=function(e,t){if(this.isVisible){var i=this.getViewBox(),n=this.getSvg(),o=n.getAttribute("width"),a=n.getAttribute("height"),l=o/i[2],s=a/i[3],d=l>s?s:l;n.setAttribute("width",this.width()),n.setAttribute("height",this.height()),i[2]=this.width()/d,i[3]=this.height()/d,this.setViewBox(i),this.xScrollUI.create(this.width()),this.yScrollUI.create(this.height()),this._draw(!1,r.action.resize)}},r.prototype._nodeDbClickHandler=function(e,t){if(!1===r.events.publish("dbclick",[this,this.get(e)]))return!1;this._commonClickHandler(e,t,this.config.nodeMouseDbClick)},r.prototype._nodeClickHandler=function(e,t){var i=this.getNodeElement(e);if(i&&i._dragEventFired)i._dragEventFired=!1;else{if(!1===r.events.publish("click",[this,{node:this.getNode(e),event:t}]))return!1;this._commonClickHandler(e,t,this.config.nodeMouseClick)}},r.prototype._nodeCircleMenuItemClickHandler=function(e,t){var i=e.parentNode.getAttribute(r.attr.control_node_circle_menu_wrraper_id),n=e.getAttribute(r.attr.control_node_circle_menu_name),o=this.nodeCircleMenuUI._menu[n];r.events.publish("click",[this.nodeCircleMenuUI,{nodeId:i,menuItemName:n,menuItem:o,event:t}])},r.prototype._nodeCircleMenuClickHandler=function(e){this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide();var t=this.getNode(e),i=null;if(Array.isArray(t.tags))for(var n=0;n<t.tags.length;n++){var r=t.tags[n];this.config.tags[r]&&this.config.tags[r].nodeCircleMenu&&(i=this.config.tags[r].nodeCircleMenu)}this.nodeCircleMenuUI.show(e,i)},r.prototype._commonClickHandler=function(e,t,i){var n;this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide(),i==r.action.expandCollapse&&this.toggleExpandCollapse(e,t),i==r.action.edit&&(n=this.getNode(e))&&(this.editUI.show(n.id),this.ripple(n.id,t.clientX,t.clientY)),i==r.action.details&&(n=this.getNode(e))&&(this.editUI.show(n.id,!0),this.ripple(n.id,t.clientX,t.clientY))},r.prototype._menuHandlerMouseDownHandler=function(e,t){t.stopPropagation(),t.preventDefault()},r.prototype._nodeMenuClickHandler=function(e,t,i){this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var n=this.getNode(e),r=null;if(Array.isArray(n.tags))for(var o=0;o<n.tags.length;o++){var a=n.tags[o];this.config.tags[a]&&this.config.tags[a].nodeMenu&&(r=this.config.tags[a].nodeMenu)}this.nodeMenuUI.showStickIn(t,e,null,r)},r.prototype._menuClickHandler=function(e,t){t.stopPropagation(),t.preventDefault(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.show(e.offsetLeft,e.offsetTop)},r.prototype._lonelyButtonHandler=function(){var e={id:this.generateId()};!1!==this.addNode(e,null,!0)&&this.center(e.id)},r.prototype.toggleExpandCollapse=function(e,t){var i=this.getNode(e),n=this.getCollapsedIds(i);if(n.length){if(!1===r.events.publish("expcollclick",[this,!1,e,n]))return!1;this.expand(e,n,!1)}else{if(!1===r.events.publish("expcollclick",[this,!0,e,i.childrenIds]))return!1;this.collapse(e,i.childrenIds,!1)}t&&this.ripple(i.id,t.clientX,t.clientY)},r.prototype._move=function(e,t,i){i[0]=t,i[1]=e,this.setViewBox(i),this.xScrollUI.setPosition(),this.yScrollUI.setPosition()},r.prototype.startMove=function(e,t){if(e){if(this._movePosition=e,!this._moveInterval){var i=this,n=this.getViewBox().slice(0),o=this.getScale(),a=0,l=0;this._moveInterval=setInterval((function(){var e={x:0,y:0,xWithoutScale:0,yWithoutScale:0};i._movePosition.left&&(a++,e.x=a*r.MOVE_STEP/o,e.xWithoutScale=a*r.MOVE_STEP),i._movePosition.right&&(a++,e.x=-a*r.MOVE_STEP/o,e.xWithoutScale=-a*r.MOVE_STEP),i._movePosition.up&&(l++,e.y=-l*r.MOVE_STEP/o,e.yWithoutScale=-l*r.MOVE_STEP),i._movePosition.down&&(l++,e.y=l*r.MOVE_STEP/o,e.yWithoutScale=l*r.MOVE_STEP),i.setViewBox([n[0]+e.x,n[1]+e.y,n[2],n[3]]),i.xScrollUI.setPosition(),i.yScrollUI.setPosition(),t&&t(e)}),r.MOVE_INTERVAL)}}else console.error("movePosition parameter not defined")},r.prototype.stopMove=function(){this._moveInterval&&(clearInterval(this._moveInterval),this._moveInterval=null,this._movePosition=null)},void 0===r&&(r={}),r.node=function(e,t,i,n){this.templateName=n,this.id=e,this.pid=t,this.children=[],this.childrenIds=[],this.parent=null,this.stpid=null,this.stParent=null,this.stChildren=[],this.stChildrenIds=[],this.tags=i,this.tags||(this.tags=[])},r.prototype._mouseDownHandler=function(e,t,i){var n=this;r.HIDE_EDIT_FORM_ON_PAN&&this.editUI.hide(),this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var o=this.getViewBox(),a=this.getScale(),l=r._getClientTouchesXY(t,0),s=r._getClientTouchesXY(t,1),d={diffX:0,diffY:0,x0:l.x,y0:l.y,type:"pan",viewBoxLeft:o[0],viewBoxTop:o[1]};t.touches&&t.touches.length>1&&(d.type="pinch",d.dist=Math.sqrt((l.x-s.x)*(l.x-s.x)+(l.y-s.y)*(l.y-s.y)));var c=this.getPointerElement();if("pan"==d.type){this._hideBeforeAnimation();var p=r._getOffsetXY(this.element,t),h=p.x/a+o[0]-16/a,f=p.y/a+o[1]-16/a;c.style.display="inherit",c.setAttribute("transform","matrix(0,0,0,0,"+h+","+f+")"),r.animate(c,{transform:[0,0,0,0,h,f],opacity:0},{transform:[1/a,0,0,1/a,h,f],opacity:1},300,r.anim.outBack)}var u=function(e){var t=r._getClientTouchesXY(e,0);if(d&&"pan"==d.type){n._hideBeforeAnimation(),d.diffX=t.x-d.x0,d.diffY=t.y-d.y0;var i=-d.diffY/a+d.viewBoxTop,l=-d.diffX/a+d.viewBoxLeft;n._move(i,l,o)}else if(d&&"pinch"==d.type){var s=r._getClientTouchesXY(e,1),c=Math.sqrt((t.x-s.x)*(t.x-s.x)+(t.y-s.y)*(t.y-s.y)),p=1+(c-d.dist)/(d.dist/100)/100;d.dist=c;var h=r._pinchMiddlePointInPercent(n.element,n.width(),n.height(),e);n.zoom(p,h)}},g=function(){"pan"==d.type&&n.config.sticky?setTimeout((function(){r._moveToBoundaryArea(e,n.getViewBox(),n.response.boundary,(function(){n._draw(!0,r.action.pan)}))}),0):"pan"!=d.type||n.config.sticky||setTimeout((function(){n._draw(!0,r.action.pan)}),0),d=null,c.style.display="none",e.removeEventListener(i.move,u),e.removeEventListener(i.up,g),i.leave&&e.removeEventListener(i.leave,g),i.touchstart&&e.removeEventListener(i.touchstart,g)};e.addEventListener(i.move,u),e.addEventListener(i.up,g),i.leave&&e.addEventListener(i.leave,g),i.touchstart&&e.addEventListener(i.touchstart,g)},r.searchUI=function(){},r.searchUI.prototype.init=function(e){this.obj=e;var t=this,i=document.createElement("div");i.classList.add("bft-search"),i.style.right=this.obj.config.padding-10+"px",i.style.top=this.obj.config.padding-10+"px";var n=r.elements.textbox({},{label:r.SEARCH_PLACEHOLDER},"320px");i.innerHTML+=n.html,this.searchTableWrapper=document.createElement("div"),i.appendChild(this.searchTableWrapper);var o=e.getSvg().nextSibling;this.obj.element.insertBefore(i,o),r.input.init(i),this.input=document.getElementById(n.id),this.input.addEventListener("keypress",(function(e){"Enter"==e.key&&e.preventDefault()})),this.input.addEventListener("keyup",(function(e){"ArrowDown"==e.key?(e.preventDefault(),a()):"ArrowUp"==e.key?(e.preventDefault(),e.stopPropagation(),l()):"Enter"==e.key?(e.preventDefault(),s()):"Escape"==e.key?(e.preventDefault(),t.hide()):t._serverSearch(this.value)}));var a=function(){var e=t.obj.element.querySelectorAll("[data-search-item-id]"),i=t.obj.element.querySelector('[data-selected="yes"]');null==i&&e.length>0?e[0].setAttribute("data-selected","yes"):e.length>0&&i.nextSibling&&i.nextSibling.setAttribute&&(i.removeAttribute("data-selected"),i.nextSibling.setAttribute("data-selected","yes"))},l=function(){var e=t.obj.element.querySelectorAll("[data-search-item-id]"),i=t.obj.element.querySelector('[data-selected="yes"]');null==i&&e.length>0?e[e.length-1].setAttribute("data-selected","yes"):e.length>0&&i.previousSibling&&i.previousSibling.setAttribute&&(i.removeAttribute("data-selected"),i.previousSibling.setAttribute("data-selected","yes"))},s=function(){var e=t.obj.element.querySelector('[data-selected="yes"]');if(e){var i=e.getAttribute("data-search-item-id");0!=r.events.publish("searchclick",[t.obj,i])&&t.obj.center(i)}}},r.searchUI.prototype.hide=function(){this.searchTableWrapper&&(this.searchTableWrapper.innerHTML=""),this.input&&(this.input.value="",this.input.focus(),this.input.blur())},r.searchUI.prototype.find=function(e){this.input&&(this.input.value=e,this._serverSearch(e),this.input.focus())},r.searchUI.prototype._serverSearch=function(e){var t=this,i=r._search.search(this.obj.config.nodes,e,this.obj.config.searchFields,this.obj.config.searchFields,this.obj.config.searchDisplayField,this.obj.config.searchFieldsWeight),n=r._getFistImgField(this.obj.config),o=`<table border="0" cellspacing="0" cellpadding="0">\n                    <tbody>\n                        ${function(){for(var e="",o=0;o<i.length&&!(o>=r.SEARCH_RESULT_LIMIT);o++){var a=i[o],l="";if(n){var s=t.obj._get(a.id);"function"==typeof n?l=n(t.obj,t.obj.getNode(a.id),s):s[n]&&(l=s[n])}var d="",c="";t.obj.config.searchDisplayField==a.__searchField?d=a.__searchMarks:t.obj.config.searchDisplayField?(d=a[t.obj.config.searchDisplayField],r.isNEU(d)&&(d=""),c=a.__searchMarks):d=a.__searchMarks,e+=r.searchUI.createItem(l,a.id,d,c)}return e}()}  \n                    </tbody>\n                </table>`;this.searchTableWrapper.innerHTML=o;for(var a=this.obj.element.querySelectorAll("[data-search-item-id]"),l=0;l<a.length;l++)a[l].addEventListener("click",(function(){if(!1!==r.events.publish("searchclick",[t.obj,this.getAttribute("data-search-item-id")])){t.obj.center(this.getAttribute("data-search-item-id"));var e=t.obj.element.querySelector('[data-selected="yes"]');e&&e.removeAttribute("data-selected"),this.setAttribute("data-selected","yes"),t.input.focus()}}))},r.searchUI.createItem=function(e,t,i,n){return i&&(i="<b>"+i+"</b>"),`<tr data-search-item-id="${t}">\n                <td class="bft-search-image-td">\n                    ${e=e?`<div class="bft-search-photo" style="background-image: url(${e})"></div>`:`<div class="bft-search-photo">${r.icon.user(32,32,"#aeaeae")}</div>`}\n                </td>\n                <td class="bft-search-text-td">${i} <br/>${n}</td>\n            </tr>`},void 0===r&&(r={}),r.manager=function(e){this.config=e.config,this.layoutConfigs=e._layoutConfigs,this.visibleNodeIds=[],this.viewBox=null,this.action=null,this.actionParams=null,this.nodes={},this.oldNodes={},this.maxX=null,this.maxY=null,this.minX=null,this.minY=null,this.bordersByRootIdAndLevel=null,this.roots=null,this.state=null,this.vbIsInitializedFromState=!1,this.rootList=[],this.instance=e},r.manager.prototype.read=function(e,t,i,n,o,a,l,s){var d=this;r.state._get(this.config.state,t,i,(function(c){d.state=c,d.action=o,d.actionParams=a,o!=r.action.init||!d.state||a&&a.method&&"fit"==a.method?(d.viewBox=n,d.vbIsInitializedFromState=!1):(d.viewBox=d.state.vb,d.vbIsInitializedFromState=!0);var p=d.maxX,h=d.maxY,f=d.minX,u=d.minY,g=d.bordersByRootIdAndLevel,m=d.roots,b=d.nodes;if(e){var v=r.manager._getResponse(t,i,d.visibleNodeIds,d.config,p,h,f,u,d.viewBox,m,d.action,d.actionParams,b,d.oldNodes,d.vbIsInitializedFromState);o!=r.action.exporting&&(d.maxX=p,d.maxY=h,d.minX=f,d.minY=u,d.roots=m,d.nodes=b,d.visibleNodeIds=v.visibleNodeIds),v.bordersByRootIdAndLevel=g,v.roots=m,v.adjustify={x:0,y:0},d.state&&(v.adjustify=d.state.adjustify),l(v)}else d.oldNodes=b||null,d._read((function(e){p=e.maxX,h=e.maxY,f=e.minX,u=e.minY,g=e.bordersByRootIdAndLevel,m=e.roots,b=e.nodes;var n=r.manager._getResponse(t,i,d.visibleNodeIds,d.config,p,h,f,u,d.viewBox,m,d.action,d.actionParams,b,d.oldNodes,d.vbIsInitializedFromState);n.notif=e.limit,n.roots=m,n.bordersByRootIdAndLevel=g,n.adjustify=e.adjustify,o!=r.action.exporting&&(d.maxX=p,d.maxY=h,d.minX=f,d.minY=u,d.roots=m,d.nodes=b,d.visibleNodeIds=n.visibleNodeIds,d.bordersByRootIdAndLevel=g,d.rootList=e.rootList),l(n)}),s)}))},r.manager.prototype._read=function(e,t){var i=this,n=r.manager._createNodes(this.instance);t(n);var o=n.nodes,a=n.roots,l=r.remote;null==l&&(l=r.local),l._setPositions(a,i.layoutConfigs,(function(t){var l=r.manager._doNotChangePositionOfClickedNodeIfAny(a,o,i.action,i.actionParams,i.oldNodes,i.config.orientation);i.state&&i.action==r.action.init&&(l=i.state.adjustify);for(var s={minX:null,minY:null,maxX:null,maxY:null},d={},c=0;c<a.length;c++)r.manager._setMinMaxXYAdjustifyIterate(a[c],a[c],s,0,d,l,i.config.orientation);e({minX:s.minX,minY:s.minY,maxX:s.maxX,maxY:s.maxY,bordersByRootIdAndLevel:d,nodes:o,roots:a,rootList:n.rootList,limit:t,adjustify:l})}),o)},void 0===r&&(r={}),r.manager._initDinamicNode=function(e,t,i){t&&(e.lcn=t),i&&(e.isAssistant=!0);var n=r.t(e.templateName);e.w=n&&n.size?n.size[0]:0,e.h=n&&n.size?n.size[1]:0,e.isSplit="split"==e.templateName},r.manager._setCollpasedProperty=function(e,t,i,n,o,a,l){null==e.collapsed&&t.collapse&&t.collapse.allChildren?e.collapsed=!0:null==e.collapsed&&(e.collapsed=!1),o==r.action.expand&&-1!=i.ids.indexOf(e.id)&&(e.collapsed=!1),o==r.action.collapse&&(i.expandIds||i.collapseIds)?i.expandIds&&-1!=i.expandIds.indexOf(e.id)?e.collapsed=!1:i.collapseIds&&-1!=i.collapseIds.indexOf(e.id)&&(e.collapsed=!0):o==r.action.collapse&&-1!=i.ids.indexOf(e.id)&&(e.collapsed=!0),o==r.action.expand&&"all"==i.ids&&(e.collapsed=!1),o==r.action.exporting&&i.expandChildren&&(e.collapsed=!1),o==r.action.init&&null!=l?e.collapsed=!l.exp.has(e.id):o==r.action.init?e.collapsed=t.collapse&&a>=t.collapse.level-1&&-1==n.indexOf(e.id):o!=r.action.centerNode&&o!=r.action.insert&&o!=r.action.expand&&o!=r.action.collapse||n.has(e.id)&&(e.collapsed=!1)},r.manager._initNode=function(e,t,i,n,o,a,l){var s=l.manager.config,d=l.manager.layoutConfigs,c=l.manager.action,p=l.manager.actionParams,h=l.manager.state,f=d[i||"base"];null==e.parent&&r.manager._setCollpasedProperty(e,f,p,o,c,n-1,h);for(var u=0;u<e.childrenIds.length;u++){var g=t[e.childrenIds[u]];if(r.manager._setCollpasedProperty(g,f,p,o,c,n,h),!g.collapsed){if(g.parent=e,null!=g.ppid){var m=t[g.ppid];m&&(g.parentPartner=m)}(-1!=g.tags.indexOf("left-partner")||-1!=g.tags.indexOf("right-partner")||-1!=g.tags.indexOf("partner")||g.parentPartner)&&-1==a.indexOf(e.id)&&a.push(e.id),e.children.push(g)}}if(e.min||c!=r.action.minimize||(p.all||p.id==e.id)&&(e.min=!0),!0===e.min&&c==r.action.maximize&&(p.all||p.id==e.id)&&(e.min=!1),c==r.action.init&&null!=h&&(e.min=h.min.has(e.id)),!e.min)for(u=0;u<e.stChildrenIds.length;u++)(g=t[e.stChildrenIds[u]]).stParent=e,e.stChildren.push(g);null!=n&&(e.level=n),i&&(e.lcn=i);var b=r._getSubLevels(e.tags,s.tags);b>0&&(e.subLevels=b),-1!=e.tags.indexOf("assistant")&&null!=e.parent&&(e.isAssistant=!0);var v=r.t(e.templateName,e.min);e.w=v&&v.size?v.size[0]:0,e.h=v&&v.size?v.size[1]:0,e.padding=v&&v.padding?v.padding:[0,0,0,0];var y={node:e};r.events.publish("node-initialized",[l,y]),r.events.publish("node-created",[e])},r.manager._iterate=function(e,t,i,n,o,a,l,s,d,c,p,h){var f=h.manager.layoutConfigs;if(r.manager._initNode(t,i,d,n,c,p,h),t.isAssistant&&(a[t.pid]||(a[t.pid]=[]),a[t.pid].push(t.id)),t.subLevels>0&&l.push(t.id),r.MIXED_LAYOUT_FOR_NODES_WITH_COLLAPSED_CHILDREN&&!t.isAssistant&&t.parent){if(t.parent&&t.parent.children.length&&t.parent.children[t.parent.children.length-1]==t){for(var u=[],g=0,m=0,b=0;b<t.parent.children.length;b++)-1==(v=t.parent.children[b]).tags.indexOf("partner")&&-1==v.tags.indexOf("left-partner")&&-1==v.tags.indexOf("right-partner")&&-1==v.tags.indexOf("assistant")&&0==v.children.length?u.push(v.id):-1!=v.tags.indexOf("assistant")?g++:-1==v.tags.indexOf("partner")&&-1==v.tags.indexOf("left-partner")&&-1==v.tags.indexOf("right-partner")||m++;(r.MIXED_LAYOUT_ALL_NODES&&u.length>1&&u.length==t.parent.children.length-g-m||!r.MIXED_LAYOUT_ALL_NODES&&u.length>1)&&(s[t.pid]=u)}}else if(!t.isAssistant&&0==t.childrenIds.length&&t.parent&&!s[t.pid]){for(u=[],g=0,m=0,b=0;b<t.parent.children.length;b++){var v;-1==(v=t.parent.children[b]).tags.indexOf("partner")&&-1==v.tags.indexOf("left-partner")&&-1==v.tags.indexOf("right-partner")&&-1==v.tags.indexOf("assistant")&&0==v.childrenIds.length?u.push(v.id):-1!=v.tags.indexOf("assistant")?g++:-1==v.tags.indexOf("partner")&&-1==v.tags.indexOf("left-partner")&&-1==v.tags.indexOf("right-partner")||m++}(r.MIXED_LAYOUT_ALL_NODES&&u.length>1&&u.length==t.parent.childrenIds.length-g-m||!r.MIXED_LAYOUT_ALL_NODES&&u.length>1)&&(s[t.pid]=u)}t.stChildren.length&&(e.stContainerNodes||(e.stContainerNodes=[]),e.stContainerNodes.push(t));for(var y=0;y<t.stChildren.length;y++){var x="";for(b=0;b<t.tags.length;b++)if(f[t.tags[b]]){x=t.tags[b];break}o.push(t.stChildren[y].id),r.manager._iterate(e,t.stChildren[y],i,0,o,a,l,s,x,c,p,h)}for(n++,y=0;y<t.children.length;y++)r.manager._iterate(e,t.children[y],i,n,o,a,l,s,d,c,p,h)},r.manager.__createNodes=function(e,t,i,n,o,a,l,s){for(var d=i.nodes,c=[],p=0;p<d.length;p++){var h,f=d[p];h=r.STRING_TAGS?f.tags?f.tags.split(","):[]:Array.isArray(f.tags)?f.tags.slice(0):[],s.filterUI.addFilterTag(f)&&h.push("filter");var u=r._getTemplate(h,i.tags,i.template),g=new r.node(f.id,f.pid,h,u);r.isNEU(f.ppid)||(g.ppid=f.ppid),r.isNEU(f.stpid)||(g.stpid=f.stpid),null!=i.orderBy&&(g.order=r.manager._getOrderFieldValue(f,i.orderBy)),e[f.id]=g,c.push(f.id)}for(null!=i.orderBy&&c.sort((function(t,n){var r=e[t].order,o=e[n].order;return"number"==typeof r||"number"==typeof o?(null==r&&(r=-1),null==o&&(o=-1),i.orderBy.desc?o-r:r-o):"string"==typeof r||"string"==typeof o?(null==r&&(r=""),null==o&&(o=""),i.orderBy.desc?o.localeCompare(r):r.localeCompare(o)):void 0})),p=0;p<c.length;p++){var m=c[p],b=(g=e[m],a?a[m]:null),v=e[g.stpid],y=e[g.pid];if(v||(g.stpid=null),y||(g.pid=null),v){var x=a?a[v.id]:null;x&&(v.min=x.min),v.stChildrenIds.push(g.id)}else y?(b&&(g.collapsed=b.collapsed,g.min=b.min),y.childrenIds.push(g.id)):(b&&(g.collapsed=b.collapsed,g.min=b.min),t.push(g),l.push(g.id));n==r.action.init&&(g.min=r._getMin(g,i))}},r.manager._createNodes=function(e){var t=e.manager.config,i=e.manager.layoutConfigs,n=e.manager.action,o=e.manager.actionParams,a=e.manager.oldNodes,l=e.manager.state,s={},d=[],c=[];if(r.manager.__createNodes(s,d,t,n,o,a,c,e),null!=t.roots){d=[];for(var p=0;p<t.roots.length;p++){var h=s[t.roots[p]];if(h&&n==r.action.centerNode){for(var f=h;null!=f.pid||null!=f.stpid;)f=null==f.pid&&null!=f.stpid?s[f.stpid]:s[f.pid];for(var u=s[o.id];null!=u.pid||null!=u.stpid;)u=null==u.pid&&null!=u.stpid?s[u.stpid]:s[u.pid];f==u&&(h=f)}if(h){for(var g=!1,m=0;m<d.length;m++)if(d[m].id==h.id){g=!0;break}g||(r.isNEU(h.pid)||(H=(x=s[h.pid]).childrenIds.indexOf(h.id))>-1&&x.childrenIds.splice(H,1),d.push(h))}}for(t.roots=[],p=0;p<d.length;p++)t.roots.push(d[p].id)}n==r.action.exporting&&null!=o.id&&(v=s[o.id])&&(v.pid=null,d=[v]);var b=[];if(n==r.action.init&&t.expand&&t.expand.nodes&&null==l)for(p=0;p<t.expand.nodes.length;p++){var v=s[t.expand.nodes[p]];for(!0===t.expand.allChildren&&r.manager._addExpandedNodeIdsIterate(v,s,b);v;)b.push(v.id),null==v.pid&&null!=v.stpid?(v=s[v.stpid]).min=!1:v=s[v.pid]}else if(n==r.action.expand&&o.ids&&"all"!=o.ids||n==r.action.collapse&&o&&o.expandIds){var y;for(y=n==r.action.expand?o.ids:o.expandIds,p=0;p<y.length;p++)for(var x=s[(v=s[y[p]]).pid];x;)b.push(x.id),null==x.pid&&null!=x.stpid?(x=s[x.stpid]).min=!1:x=s[x.pid]}else if(n==r.action.centerNode){for(var _=s[o.id];_;){if(b.push(_.id),o.options.parentState===r.COLLAPSE_PARENT_NEIGHBORS&&_)for(p=0;p<_.childrenIds.length;p++)(j=s[_.childrenIds[p]]).collapsed=!0;null==_.pid&&null!=_.stpid?(_=s[_.stpid]).min=!1:_=s[_.pid]}if(_=s[o.id],o.options.childrenState===r.COLLAPSE_SUB_CHILDRENS)for(p=0;p<_.childrenIds.length;p++){(k=s[_.childrenIds[p]]).collapsed=!1;for(var w=0;w<k.childrenIds.length;w++)s[k.childrenIds[w]].collapsed=!0}if(o.options.parentState===r.COLLAPSE_PARENT_SUB_CHILDREN_EXCEPT_CLICKED&&(x=s[_.pid]))for(p=0;p<x.childrenIds.length;p++){var k;if((k=s[x.childrenIds[p]])!=_)for(k.collapsed=!1,w=0;w<k.childrenIds.length;w++)s[k.childrenIds[w]].collapsed=!0}}else if(n==r.action.insert)for(v=s[o.insertedNodeId];v;)b.push(v.id),null==v.pid&&null!=v.stpid?(v=s[v.stpid]).min=!1:v=s[v.pid];var S=[],C={},I=[],N={},A=[];for(p=0;p<d.length;p++)r.manager._iterate(d[p],d[p],s,0,S,C,I,N,"",b,A,e);for(p=d.length-1;p>=0;p--)d[p].collapsed&&d.splice(p,1);for(p=0;p<A.length;p++){v=s[A[p]];var M=[],E=[],L=[],T={},U=0,O=0,B=0,P=[],z=[];for(w=0;w<v.children.length;w++)(j=v.children[w]).isAssistant?M.push(j.id):-1!=j.tags.indexOf("right-partner")?(j.isPartner=1,j.children=[],E.push(j.id)):-1!=j.tags.indexOf("left-partner")?(j.isPartner=2,j.children=[],L.push(j.id)):-1==j.tags.indexOf("partner")||U%2?-1!=j.tags.indexOf("partner")&&U%2?(j.isPartner=2,j.children=[],L.push(j.id),U++):j.parentPartner?(T[j.parentPartner.id]||(T[j.parentPartner.id]=[]),T[j.parentPartner.id].push(j.id)):M.push(j.id):(j.isPartner=1,j.children=[],E.push(j.id),U++);v.children=[];var D=[];for(w=0;w<E.length;w++){T[(j=s[E[w]]).id]?v.children.push(j):v.children.splice(0,0,j);for(var F=0;F<j.childrenIds.length;F++)D.push(j.childrenIds[F])}var R=[];for(w=0;w<L.length;w++)for(T[(j=s[L[w]]).id]?v.children.push(j):v.children.splice(0,0,j),F=0;F<j.childrenIds.length;F++)R.push(j.childrenIds[F]);for(w=0;w<R.length;w++)(j=s[R[w]]).collapsed||(j.parentPartner=j.parent,j.parent=v,j.isChildOfPartner=!0,v.children.push(j));for(w=L.length-1;w>=0;w--)if(T[L[w]])for(m=0;m<T[L[w]].length;m++)v.children.push(s[T[L[w]][m]]),O++,-1==z.indexOf(L[w])&&z.push(L[w]);for(w=0;w<M.length;w++){var j=s[M[w]];v.children.push(j)}for(w=0;w<E.length;w++)if(T[E[w]])for(m=0;m<T[E[w]].length;m++)v.children.push(s[T[E[w]][m]]),B++,-1==P.indexOf(E[w])&&P.push(E[w]);for(w=0;w<D.length;w++)(j=s[D[w]]).collapsed||(j.parentPartner=j.parent,j.parent=v,j.isChildOfPartner=!0,v.children.push(j));v.partnerSeparation=Math.max(z.length,P.length)*t.partnerChildrenSplitSeparation+t.minPartnerSeparation,M.length||!O||B?M.length||O||!B?M.length||1!=O||1!=B?M.length||O||B?!M.length||O||B?M.length&&(O||B)?v.hasPartners=7:v.hasPartners=1:v.hasPartners=6:v.hasPartners=5:v.hasPartners=4:v.hasPartners=3:v.hasPartners=2}for(p=0;p<I.length;p++)if((re=i[(v=s[I[p]]).lcn?v.lcn:"base"]).layout==r.normal||!N[v.pid])for(w=0;w<v.subLevels;w++){var H,$=new r.node(v.id+"_sub_level_index_"+w,v.pid,[],"subLevel");r.manager._initDinamicNode($,v.lcn),(x=v.parent)&&((H=x.children.indexOf(v))>-1&&(x.children.splice(H,1),x.children.splice(H,0,$)),$.children.push(v),$.parent=x,v.parent=$,s[$.id]=$)}for(var q in C){(x=s[q]).hasAssistants=!0,$=new r.node(x.id+"_split_assitant_0",x.id,["assistant"],"split"),r.manager._initDinamicNode($,x.lcn,!0),s[$.id]=$;var Y=[];for(w=x.children.length-1;w>=0;w--)(j=x.children[w]).isAssistant?(j.parent=null,x.children.splice(w,1),Y.splice(0,0,j.id)):j.isPartner||(j.parent&&N[j.parent.id]&&$&&j.parent.id!=$.id&&(Object.defineProperty(N,$.id,Object.getOwnPropertyDescriptor(N,j.parent.id)),delete N[j.parent.id]),j.parent=$,$.children.unshift(j),x.children.splice(w,1));if(Y.length%2){var X=s[Y[Y.length-1]],V=new r.node(X.id+"_mirror",X.pid,[],"mirror");r.manager._initDinamicNode(V,X.lcn,!0),X._m=V.id,V.isAssistant=!0,V.w=X.w,V.h=X.h,s[V.id]=V,Y.splice(Y.length-1,0,V.id)}var W=1;for(w=Y.length-1;w>=0;w--)if(w%2&&w!=Y.length-1){var G=new r.node(x.id+"_split_assitant_"+W,null,[],"split");r.manager._initDinamicNode(G,x.lcn,!0),s[G.id]=G,Y.splice(w,0,G.id),W++}else w%2&&Y.splice(w,0,$.id);for(w=0;w<Y.length;w+=3){var K=null;K=0==w?x:s[Y[w-2]];var J=s[Y[w]],Z=s[Y[w+1]],Q=s[Y[w+2]];J.parent=K,Z.parent=K,Q.parent=K,K.children.push(J),K.children.push(Z),K.children.push(Q)}}var ee=!1;for(var te in i)if((re=i[te]).layout==r.mixed||re.layout==r.tree||re.layout==r.treeRightOffset||re.layout==r.treeLeftOffset){ee=!0;break}var ie=r.events.has("node-layout",e._event_id);if(ee||ie){var ne={nodes:s,config:t,action:n,actionParams:o};for(var q in N){var re;if((re=i[(x=s[q]).lcn?x.lcn:"base"]).layout==r.mixed||re.layout==r.tree||re.layout==r.treeRightOffset||re.layout==r.treeLeftOffset||ie)if(ne.pnode=x,ne.layout=re.layout,ne.childrenIds=N[q],ne.lastChildrenPidIds=N,r.events.publish("node-layout",[e,ne]),r.events.publish("layout",[ne]),ne.layout==r.mixed){var oe=ne.childrenIds;for(p=oe.length-1;p>=0;p--){for(x=(j=s[oe[p]]).parent,j.layout=r.mixed,w=x.children.length-1;w>=0;w--)if(j.id==x.children[w].id){x.children.splice(w,1);break}if(p>0){var ae=s[oe[p-1]];j.parent=ae,j.layout=r.mixed,ae.children.push(j)}else x.children.push(j)}}else if(ne.layout==r.tree||ne.layout==r.treeRightOffset||ne.layout==r.treeLeftOffset){$=new r.node(x.id+"_split_0",x.id,[],"split"),r.manager._initDinamicNode($,x.lcn),s[$.id]=$,$.layout=r.tree;var le=[];for(p=ne.childrenIds.length-1;p>=0;p--){for(j=s[ne.childrenIds[p]],w=0;w<x.children.length;w++)x.children[w].id==j.id&&x.children.splice(w,1);if(j.parent=null,j.layout=r.tree,ne.layout==r.treeRightOffset&&le.splice(0,0,j.id),ne.layout==r.treeLeftOffset||ne.layout==r.treeRightOffset){var se=new r.node(j.id+"_mirror",null,[],"mirror");r.manager._initDinamicNode(se,j.lcn),se.layout=r.tree,s[se.id]=se,le.splice(0,0,se.id)}ne.layout!=r.treeRightOffset&&le.splice(0,0,j.id)}for(W=1,w=le.length-1;w>=0;w--)w%2&&w!=le.length-1?(G=new r.node(x.id+"_split_"+W,null,[],"split"),r.manager._initDinamicNode(G,x.lcn),G.layout=r.tree,s[G.id]=G,le.splice(w,0,G.id),W++):w%2&&le.splice(w,0,$.id);for(w=0;w<le.length;w+=3)K=null,0==w&&(K=x),J=s[le[w]],Z=s[le[w+1]],Q=s[le[w+2]],0!=w&&(K=s[le[w-3]]),0==w||Z||(K=s[le[w-2]]),J.parent=K,K.children.push(J),Z&&(0!=w&&(K=s[le[w-2]]),Z.parent=K,K.children.push(Z)),Q&&(0!=w&&(K=s[le[w-1]]),Q.parent=K,K.children.push(Q))}}}return{nodes:s,roots:d,rootList:c}},r.manager._getOrderFieldValue=function(e,t){var i=t;return t.field&&(i=t.field),e[i]},r.manager._getNodeWidth=function(e,t){switch(t.orientation){case r.orientation.top:case r.orientation.top_left:case r.orientation.bottom:case r.orientation.bottom_left:return e.w;case r.orientation.right:case r.orientation.right_top:case r.orientation.left:case r.orientation.left_top:return e.h}return 0},r.manager._isVisible=function(e,t,i,n){if(null!=e.x&&null!=e.y){if(t.lazyLoading&&n!==r.action.exporting){function a(e,t){var i=e.x,n=e.y,o=e.w,a=e.h,l=t[0]-r.LAZY_LOADING_FACTOR,s=t[2]+r.LAZY_LOADING_FACTOR+t[0],d=t[1]-r.LAZY_LOADING_FACTOR,c=t[3]+r.LAZY_LOADING_FACTOR+t[1],p=i+o>l&&s>i;return p&&(p=n+a>d&&c>n),p}if(a(e,i))return!0;for(var o=0;o<e.children.length;o++)if(a(e.children[o],i))return!0;return!1}return!0}},r.manager.getAllFields=function(e){var t=[r.TAGS];for(var i in e.nodeBinding)t.push(e.nodeBinding[i]);for(i=0;i<e.nodes.length;i++)for(var n in e.nodes[i])n!==r.ID&&n!==r.TAGS&&n!==r.NODES&&n!==r.PID&&n!==r.STPID&&(e.nodeBinding[n]||t.has(n)||t.push(n));return t},r.manager._getMostDeepChild=function(e){if(e){var t=e;return function e(i){i.sl>t.sl&&(t=i);for(var n=0;n<i.children.length;n++)e(i.children[n])}(e),t}},r.manager._getResponse=function(e,t,i,n,o,a,l,s,d,c,p,h,f,u,g){var m=c[0],b=[],v={top:null,left:null,bottom:null,right:null,minX:null,maxX:null,minY:null,maxY:null},y=[[],[],[]],x=o-l+2*n.padding,_=a-s+2*n.padding,w=r.getScale(d,e,t,n.scaleInitial,n.scaleMax,n.scaleMin,x,_);if(v.top=s-n.padding,v.left=l-n.padding,v.bottom=a+n.padding-t/w,v.right=o+n.padding-e/w,v.maxX=o,v.minX=l,v.maxY=a,v.minY=s,0==c.length||null==d&&!g&&n.align==r.CENTER){var k=Math.ceil(e/w),S=Math.ceil(t/w),C=0,I=0;if(k-2*n.padding>=o-l)switch(C=(o+l)/2-k/2,n.orientation){case r.orientation.right:case r.orientation.right_top:C=(l-o)/2-k/2}else switch(C=m.x-k/2+r.manager._getNodeWidth(m,n)/2,n.orientation){case r.orientation.right:case r.orientation.right_top:(C=-(k/2-(l-o)/2))<n.padding-k&&(C=n.padding-k);break;case r.orientation.left:case r.orientation.bottom_left:case r.orientation.top_left:case r.orientation.left_top:(C=-(k/2-(o-l)/2))>-n.padding&&(C=-n.padding)}if(S-2*n.padding>=a-s)switch(I=(a+s)/2-S/2,n.orientation){case r.orientation.bottom:case r.orientation.bottom_left:I=(s-a)/2-S/2}else switch((I=-(S/2-(a-s)/2))>-n.padding&&(I=-n.padding),n.orientation){case r.orientation.bottom:case r.orientation.bottom_left:(I=-(S/2-(s-a)/2))<n.padding-S&&(I=n.padding-S);break;case r.orientation.left:case r.orientation.right:I=m.y-S/2+r.manager._getNodeWidth(m,n)/2}d=[C,I,k,S]}else if(null==d&&!g&&n.align==r.ORIENTATION){switch(k=Math.ceil(e/w),S=Math.ceil(t/w),C=0,I=0,n.orientation){case r.orientation.top:C=m.x-k/2+r.manager._getNodeWidth(m,n)/2,I=-n.padding;break;case r.orientation.bottom:C=m.x-k/2+r.manager._getNodeWidth(m,n)/2,I=n.padding-S;break;case r.orientation.left:C=-n.padding,I=m.y-S/2+r.manager._getNodeWidth(m,n)/2;break;case r.orientation.right:C=n.padding-k,I=m.y-S/2+r.manager._getNodeWidth(m,n)/2;break;case r.orientation.top_left:C=-n.padding,I=-n.padding;break;case r.orientation.right_top:C=n.padding-k,I=-n.padding;break;case r.orientation.left_top:C=-n.padding,I=-n.padding;break;case r.orientation.bottom_left:C=-n.padding,I=n.padding-S}d=[C,I,k,S],n.sticky&&(d[0]<v.left&&d[0]<v.right&&(d[0]=v.left>v.right?v.right:v.left),d[0]>v.right&&d[0]>v.left&&(d[0]=v.left>v.right?v.left:v.right),d[1]<v.top&&d[1]<v.bottom&&(d[1]=v.top>v.bottom?v.bottom:v.top),d[1]>v.bottom&&d[1]>v.top&&(d[1]=v.top>v.bottom?v.top:v.bottom))}if(p==r.action.centerNode||p==r.action.maximize){var N=f[h.id];1==h.options.horizontal&&(d[0]=N.x+N.w/2-d[2]/2),1==h.options.vertical&&(d[1]=N.y+N.h/2-d[3]/2),n.sticky&&(d[0]<v.left&&d[0]<v.right&&(d[0]=v.left>v.right?v.right:v.left),d[0]>v.right&&d[0]>v.left&&(d[0]=v.left>v.right?v.left:v.right),d[1]<v.top&&d[1]<v.bottom&&(d[1]=v.top>v.bottom?v.bottom:v.top),d[1]>v.bottom&&d[1]>v.top&&(d[1]=v.top>v.bottom?v.top:v.bottom))}if(p==r.action.insert||p==r.action.expand||p==r.action.collapse||p==r.action.update||p==r.action.centerNode||p==r.action.maximize){var A=null;if(p==r.action.insert&&h&&null!=h.insertedNodeId&&null!=h.insertedNodeId)A=f[h.insertedNodeId];else if(p==r.action.update&&h&&null!=h.visId&&null!=h.visId)A=f[h.visId];else if(p!=r.action.expand&&p!=r.action.collapse&&p!=r.action.maximize||!h||null==h.id||null==h.id){if(p==r.action.centerNode||p==r.action.maximize){switch(n.orientation){case r.orientation.top:case r.orientation.top_left:case r.orientation.bottom:case r.orientation.bottom_left:h.options.vertical||(A=f[h.id]);break;case r.orientation.right:case r.orientation.right_top:case r.orientation.left:case r.orientation.left_top:h.options.horizontal||(A=f[h.id])}A&&(A=r.manager._getMostDeepChild(A,f))}}else A=f[h.id],A=r.manager._getMostDeepChild(A,f);if(!r.FIXED_POSITION_ON_CLICK&&A)switch(n.orientation){case r.orientation.top:case r.orientation.top_left:var M=A.y+A.h-d[3]+n.padding;d[1]<M&&(d[1]=M);break;case r.orientation.bottom:case r.orientation.bottom_left:M=A.y-n.padding,d[1]>M&&(d[1]=M);break;case r.orientation.right:case r.orientation.right_top:M=A.x-n.padding,d[0]>M&&(d[0]=M);break;case r.orientation.left:case r.orientation.left_top:M=A.x+A.w-d[2]+n.padding,d[0]<M&&(d[0]=M)}}for(var E=0;E<c.length;E++)r.manager._iterate2(c[E],f,n,d,p,h,b,u,i,y);return{animations:y,boundary:v,viewBox:d,visibleNodeIds:b,nodes:f,allFields:r.manager.getAllFields(n)}},r.manager._iterate2=function(e,t,i,n,o,a,l,s,d,c){if(r.manager._isVisible(e,i,n,o)){l.push(e.id);var p=null;if((o==r.action.expand||o==r.action.collapse||o==r.action.maximize)&&s&&s[e.id]&&"expandCollapseToLevel"==a.method){if(p={x:(g=s[e.id]).x,y:g.y},g){p={x:g.x,y:g.y};for(var h=e,f=null;null!=h;)s[h.id]&&s[h.id].collapsed&&(f=h),h=h.parent;f&&f.parent&&(p={x:f.parent.x,y:f.parent.y})}if(m=t[a.id]){for(h=e.parent;null!=h;)h=h.parent;h&&(p={x:m.x+m.w/2-e.w/2,y:m.y+m.h/2-e.h/2})}}else if((o==r.action.expand||o==r.action.collapse)&&s&&s[e.id]){if(p={x:(g=s[e.id]).x,y:g.y},"all"==a.ids&&g){for(p={x:g.x,y:g.y},h=e,f=null;null!=h;)s[h.id]&&s[h.id].collapsed&&(f=h),h=h.parent;f&&f.parent&&(p={x:f.parent.x,y:f.parent.y})}if(m=t[a.id]){for(h=e.parent;null!=h&&-1==a.ids.indexOf(e.id)&&-1==a.ids.indexOf(h.id);)h=h.parent;h&&(p={x:m.x+m.w/2-e.w/2,y:m.y+m.h/2-e.h/2})}}else if(o==r.action.centerNode&&s&&s[e.id])null!=(g=s[e.id]).x&&null!=g.y&&(p={x:g.x,y:g.y}),(u=t[a.id])&&u==e&&(h=e.parent)&&h.id==a.id&&(p={x:u.x+u.w/2-e.w/2,y:u.y+u.h/2-e.h/2});else if(o==r.action.maximize&&s&&s[e.id]){var u;null!=(g=s[e.id]).x&&null!=g.y&&(p={x:g.x,y:g.y}),(u=t[a.id])&&u==e&&(h=e.parent)&&h.id==a.id&&(p={x:u.x+u.w/2-e.w/2,y:u.y+u.h/2-e.h/2})}else if(o==r.action.minimize&&s&&s[e.id])p={x:(g=s[e.id]).x,y:g.y};else if(o==r.action.insert&&a&&a.insertedNodeId==e.id&&e.parent)p={x:e.parent.x,y:e.parent.y};else if(o!=r.action.update&&o!=r.action.insert||!s)o!==r.action.exporting&&o!==r.action.init&&-1==d.indexOf(e.id)&&(c[0].push(e.id),c[1].push({opacity:0}),c[2].push({opacity:1}));else{var g,m;if((!(g=s[e.id])||r.isNEU(g.x)&&r.isNEU(g.y))&&a){if(m=t[a.id]){for(h=m;h&&h.id==e.id;)h=h.parent;h&&(p={x:m.x,y:m.y})}}else g&&(p={x:g.x,y:g.y})}null!=p&&null!=p.x&&null!=p.y&&(p.x==e.x&&p.y==e.y||(c[0].push(e.id),c[1].push({transform:[1,0,0,1,p.x,p.y]}),c[2].push({transform:[1,0,0,1,e.x,e.y]})))}for(var b=0;b<e.stChildren.length;b++)r.manager._iterate2(e.stChildren[b],t,i,n,o,a,l,s,d,c);for(b=0;b<e.children.length;b++)r.manager._iterate2(e.children[b],t,i,n,o,a,l,s,d,c)},r.manager._addExpandedNodeIdsIterate=function(e,t,i){for(var n=0;n<e.childrenIds.length;n++)i.push(e.childrenIds[n]),r.manager._addExpandedNodeIdsIterate(t[e.childrenIds[n]],t,i)},r.manager._setMinMaxXYAdjustifyIterate=function(e,t,i,n,o,a,l){e.x+=a.x,e.y+=a.y,r._setMinMaxXY(e,i);for(var s=0;s<e.stChildren.length;s++)r.manager._setMinMaxXYAdjustifyIterate(e.stChildren[s],e.stChildren[s],i,0,o,a,l);for(e.isPartner?e.sl=n-1:e.sl=n,null==o[t.id]&&(o[t.id]={}),null==o[t.id][e.sl]&&(o[t.id][e.sl]={minX:null,minY:null,maxX:null,maxY:null}),e.layout||r._setMinMaxXY(e,o[t.id][e.sl]),n++,s=0;s<e.children.length;s++)r.manager._setMinMaxXYAdjustifyIterate(e.children[s],t,i,n,o,a,l)},r.manager._doNotChangePositionOfClickedNodeIfAny=function(e,t,i,n,o,a){if(i!=r.action.expand&&i!=r.action.collapse&&i!=r.action.minimize&&i!=r.action.maximize&&i!=r.action.centerNode&&i!=r.action.update&&i!=r.action.insert)return{x:0,y:0};if(i==r.action.update&&(!n||null==n.id)){if(!e||!e.length)return{x:0,y:0};n={id:e[0].id}}if(null==n.id)return{x:0,y:0};var l=n.id;(i==r.action.minimize&&t[l].parent||i==r.action.maximize&&t[l].parent)&&(l=t[l].pid);var s=t[l],d=o[l];return d?{x:(d.x?d.x:0)-s.x,y:(d.y?d.y:0)-s.y}:{x:0,y:0}},r.manager.__createNodes=function(e,t,i,n,o,a,l,s){for(var d=i.nodes,c=[],p={},h={},f=0;f<d.length;f++){var u,g=d[f];u=r.STRING_TAGS?g.tags?g.tags.split(","):[]:Array.isArray(g.tags)?g.tags.slice(0):[],s.filterUI.addFilterTag(g)&&u.push("filter"),g.gender&&u.push(g.gender);var m=r._getTemplate(u,i.tags,i.template);g.templateName&&(m=g.templateName);var b=new r.node(g.id,g.pid,u,m);b.ftChildrenIds=[],b.rids=[],r.isNEU(g.ppid)||(b.ppid=g.ppid),r.isNEU(g.stpid)||(b.stpid=g.stpid),r.isNEU(g.mid)||(b.mid=g.mid),r.isNEU(g.fid)||(b.fid=g.fid),r.isNEU(g.gender)||(b.gender=g.gender),Array.isArray(g.pids)?b.pids=g.pids:b.pids=[],null!=i.orderBy&&(b.order=r.manager._getOrderFieldValue(g,i.orderBy)),e[g.id]=b,r.isNEU(b.stpid)?(r.isNEU(b.mid)||(p[b.mid]||(p[b.mid]=[]),p[b.mid].push(b.id)),r.isNEU(b.fid)||(p[b.fid]||(p[b.fid]=[]),p[b.fid].push(b.id)),r.isNEU(b.mid)&&r.isNEU(b.fid)&&r.isNEU(b.stpid)&&(c.has(b.id)||c.push(b.id))):(h[b.stpid]||(h[b.stpid]=[]),h[b.stpid].push(b.id))}if(null!=i.orderBy&&p)for(var v in p)p[v].sort((function(t,n){var r=e[t].order,o=e[n].order;return"number"==typeof r||"number"==typeof o?(null==r&&(r=-1),null==o&&(o=-1),i.orderBy.desc?o-r:r-o):"string"==typeof r||"string"==typeof o?(null==r&&(r=""),null==o&&(o=""),i.orderBy.desc?o.localeCompare(r):r.localeCompare(o)):void 0}));for(f=0;f<c.length;f++){var y=e[c[f]];if(y){var x=[];r.manager._iterateSetRootIds(y.id,y.id,h,p,e,x),l.push(x)}}for(f=0;f<l.length;f++)for(var _=0;_<l.length;_++)if(_!=f){for(var w=l[f],k=l[_],S=!1,C=0;C<w.length;C++)if(k.has(w[C])){S=!0;break}S&&(l[f]=w.concat(k).unique(),l[_]=[])}for(f=l.length-1;f>=0;f--)l[f].length||l.splice(f,1);if(!i.roots||!i.roots.length)for(i.roots=[],f=l.length-1;f>=0;f--)i.roots.push(l[f][0]);for(f=0;f<i.roots.length;f++)r.manager._iterateFT(i.roots[f],h,p,e,a,t,n,o,i)},r.manager._iterateSetRootIds=function(e,t,i,n,o,a){var l=o[e];if(l){l.rids.has(t)||l.rids.push(t);for(var s=0;s<l.rids.length;s++)a.has(l.rids[s])||a.push(l.rids[s]);for(s=0;s<l.pids.length;s++){var d=o[l.pids[s]];if(d)for(var c=0;c<d.rids.length;c++)a.has(d.rids[c])||a.push(d.rids[c])}if(i[l.id])for(s=0;s<i[l.id].length;s++)r.manager._iterateSetRootIds(i[l.id][s],t,i,n,o,a);if(n[l.id])for(s=0;s<n[l.id].length;s++)r.manager._iterateSetRootIds(n[l.id][s],t,i,n,o,a)}},r.manager._iterateFT=function(e,t,i,n,o,a,l,s,d){var c,p=n[e],h=o?o[e]:null,f=n[p.stpid],u=n[p.mid],g=n[p.fid];if(f||(p.stpid=null),u?g&&(u.tags.has("partner")||u.tags.has("left-partner")||u.tags.has("right-partner"))?(p.pid=g.id,c=g,p.ppid=u.id):(p.pid=u.id,c=u,g&&(p.ppid=g.id)):g?u&&(g.tags.has("partner")||g.tags.has("left-partner")||g.tags.has("right-partner"))?(p.pid=u.id,c=u,p.ppid=g.id):(p.pid=g.id,c=g,u&&(p.ppid=u.id)):p.pid,f){var m=o?o[f.id]:null;m&&(f.min=m.min),f.stChildrenIds.push(p.id)}else u||g?(h&&(p.collapsed=h.collapsed,p.min=h.min),c&&!c.childrenIds.has(p.id)&&c.childrenIds.push(p.id),u&&!u.ftChildrenIds.has(p.id)&&u.ftChildrenIds.push(p.id),g&&!g.ftChildrenIds.has(p.id)&&g.ftChildrenIds.push(p.id)):(h&&(p.collapsed=h.collapsed,p.min=h.min),a.push(p));l==r.action.init&&(p.min=r._getMin(p,d));for(var b=0;b<p.pids.length;b++){var v=n[p.pids[b]];if(v){v.pid=p.id;var y=o?o[v.id]:null;if(y&&(v.collapsed=y.collapsed,v.min=y.min),l==r.action.init&&(v.min=r._getMin(v,d)),s&&h&&y&&s.id==p.id?y.hasPartners&&1==h.isPartner?v.tags.push("left-partner"):y.hasPartners&&2==h.isPartner||1==h.isPartner?v.tags.push("right-partner"):2==h.isPartner?v.tags.push("left-partner"):v.tags.push("partner"):y&&2==y.isPartner?v.tags.push("left-partner"):y&&1==y.isPartner?v.tags.push("right-partner"):v.tags.push("partner"),!r.isNEU(v)&&i[v.id])for(var x=0;x<i[v.id].length;x++){var _=n[i[v.id][x]];_&&(r.isNEU(_.fid)||r.isNEU(_.mid))&&r.manager._iterateFT(i[v.id][x],t,i,n,o,a,l,s,d)}p.childrenIds.push(v.id),v.ftChildrenIds=p.ftChildrenIds}}if(t[e])for(x=0;x<t[e].length;x++)r.manager._iterateFT(t[e][x],t,i,n,o,a,l,s,d);if(i[e])for(x=0;x<i[e].length;x++)r.manager._iterateFT(i[e][x],t,i,n,o,a,l,s,d)},r.manager.getAllFields=function(e){var t=[r.TAGS];for(var i in e.nodeBinding)t.push(e.nodeBinding[i]);for(i=0;i<e.nodes.length;i++)for(var n in e.nodes[i])n!==r.ID&&n!==r.TAGS&&n!==r.NODES&&n!==r.PID&&n!==r.STPID&&"mid"!==n&&"fid"!==n&&"pids"!==n&&(e.nodeBinding[n]||t.has(n)||t.push(n));return t},r.templates={},r.templates.base={defs:`<g transform="matrix(1,0,0,1,0,0)" id="dot"><circle class="bft-fill" cx="0" cy="0" r="5" stroke="#aeaeae" stroke-width="1"></circle></g>\n            <g id="base_node_menu" style="cursor:pointer;"><rect x="0" y="0" fill="transparent" width="22" height="22"></rect><circle cx="4" cy="11" r="2" fill="#ffffff"></circle><circle cx="11" cy="11" r="2" fill="#ffffff"></circle><circle cx="18" cy="11" r="2" fill="#ffffff"></circle></g>\n            <g style="cursor: pointer;" id="base_tree_menu">\n                <rect x="0" y="0" width="25" height="25" fill="transparent"></rect>\n                ${r.icon.addUser(25,25,"#fff",0,0)}\n            </g>\n            <g style="cursor: pointer;" id="base_tree_menu_close">\n                <circle cx="12.5" cy="12.5" r="12" fill="#F57C00"></circle>\n                ${r.icon.close(25,25,"#fff",0,0)}\n            </g>            \n            <g id="base_up">\n                <circle cx="15" cy="15" r="15" fill="#fff" stroke="#aeaeae" stroke-width="1"></circle>\n                ${r.icon.ft(20,20,"#aeaeae",5,5)}\n            </g>\n            <clipPath id="base_img_0"><rect id="base_img_0_stroke" stroke-width="3" stroke="#fff" x="170" y="-5" rx="25" ry="25" width="70" height="70"></rect></clipPath>`,size:[250,120],linkAdjuster:{fromX:0,fromY:0,toX:0,toY:0},ripple:{radius:0,color:"#e6e6e6",rect:null},expandCollapseSize:0,svg:'<svg class="{randId} {template} bft-{mode}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  style="display:block;" width="{w}" height="{h}" viewBox="{viewBox}">{content}</svg>',link:'<path stroke-linejoin="round" stroke="#aeaeae" stroke-width="1px" fill="none" d="{rounded}" />',assistanseLink:'<path stroke-linejoin="round" stroke="#aeaeae" stroke-width="2px" fill="none" d="M{xa},{ya} {xb},{yb} {xc},{yc} {xd},{yd} L{xe},{ye}"/>',pointer:'<g data-pointer="pointer" transform="matrix(0,0,0,0,100,100)"><radialGradient id="pointerGradient"><stop stop-color="#ffffff" offset="0" /><stop stop-color="#C1C1C1" offset="1" /></radialGradient><circle cx="16" cy="16" r="16" stroke-width="1" stroke="#acacac" fill="url(#pointerGradient)"></circle></g>',node:'<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" stroke="#aeaeae" rx="7" ry="7"></rect>',menuButton:'<div style="position:absolute;right:{p}px;top:{p}px; width:40px;height:50px;cursor:pointer;" '+r.attr.control_export_menu+'=""><hr style="background-color: #7A7A7A; height: 3px; border: none;"><hr style="background-color: #7A7A7A; height: 3px; border: none;"><hr style="background-color: #7A7A7A; height: 3px; border: none;"></div>',padding:[50,20,35,20],nodeMenuButton:`<use ${r.attr.control_node_menu_id}="{id}" x="220" y="95" xlink:href="#base_node_menu"/>`,nodeTreeMenuButton:'<use data-ctrl-n-t-menu-id="{id}" x="10" y="10" xlink:href="#base_tree_menu"/>',nodeTreeMenuCloseButton:'<use data-ctrl-n-t-menu-c="" x="10" y="10" xlink:href="#base_tree_menu_close"/>',up:'<use x="110" y="-10" xlink:href="#base_up"/>',img_0:'<use xlink:href="#base_img_0_stroke" /><image preserveAspectRatio="xMidYMid slice" clip-path="url(#base_img_0)" xlink:href="{val}"  x="170" y="-5"  width="70" height="70"></image>',link_field_0:'<text text-anchor="middle" fill="#aeaeae" '+r.attr.width+'="290" x="0" y="0" style="font-size:10px;">{val}</text>'},r.templates.dot=Object.assign({},r.templates.base),r.templates.dot.node='<circle cx="5" cy="5" r="5" fill="none" stroke-width="1" stroke="#aeaeae"></circle>',r.templates.dot.size=[10,10],r.templates.dot.nodeMenuButton="",r.templates.dot.nodeTreeMenuButton="",r.templates.dot.nodeTreeMenuCloseButton="",r.templates.dot.up="",r.templates.john=Object.assign({},r.templates.base),r.templates.john.defs=`<style>                          \n                                        .{randId} .bft-edit-form-header, .{randId} .bft-img-button{\n                                            background-color: #aeaeae;\n                                        }\n                                        .{randId}.male .bft-edit-form-header, .{randId}.male .bft-img-button{\n                                            background-color: #039BE5;\n                                        }        \n                                        .{randId}.male div.bft-img-button:hover{\n                                            background-color: #F57C00;\n                                        }\n                                        .{randId}.female .bft-edit-form-header, .{randId}.female .bft-img-button{\n                                            background-color: #F57C00;\n                                        }        \n                                        .{randId}.female div.bft-img-button:hover{\n                                            background-color: #039BE5;\n                                        }\n                                    </style>\n                                    <clipPath id="john_img_0"><rect  x="6" y="6" rx="54" ry="54" width="108" height="108"></rect></clipPath>\n                                    ${r.gradientCircleForDefs("circle","#aeaeae",60,5)}\n                                    ${r.gradientCircleForDefs("male_circle","#039BE5",60,5)}\n                                    ${r.gradientCircleForDefs("female_circle","#F57C00",60,5)}`,r.templates.john.field_0="<text "+r.attr.width+'="230" style="font-size: 16px;font-weight:bold;" fill="#aeaeae" x="60" y="135" text-anchor="middle">{val}</text>',r.templates.john.field_1="<text "+r.attr.width+'="150" style="font-size: 13px;" fill="#aeaeae" x="60" y="150" text-anchor="middle">{val}</text>',r.templates.john.node='<use x="0" y="0" xlink:href="#circle" />',r.templates.john.img_0='<image preserveAspectRatio="xMidYMid slice" clip-path="url(#john_img_0)" xlink:href="{val}"  x="6" y="6"  width="108" height="108"></image>',r.templates.john.ripple={radius:60,color:"#e6e6e6",rect:null},r.templates.john.size=[120,120],r.templates.john_male=Object.assign({},r.templates.john),r.templates.john_male.node+='<use x="0" y="0" xlink:href="#male_circle" />',r.templates.john_male.ripple={radius:60,color:"#039BE5",rect:null},r.templates.john_female=Object.assign({},r.templates.john),r.templates.john_female.node+='<use x="0" y="0" xlink:href="#female_circle" />',r.templates.john_female.ripple={radius:60,color:"#F57C00",rect:null},r.templates.tommy=Object.assign({},r.templates.base),r.templates.tommy.defs="<style>                          \n                                        .{randId} .bft-edit-form-header, .{randId} .bft-img-button{\n                                            background-color: #aeaeae;\n                                        }\n                                        .{randId}.male .bft-edit-form-header, .{randId}.male .bft-img-button{\n                                            background-color: #039BE5;\n                                        }        \n                                        .{randId}.male div.bft-img-button:hover{\n                                            background-color: #F57C00;\n                                        }\n                                        .{randId}.female .bft-edit-form-header, .{randId}.female .bft-img-button{\n                                            background-color: #F57C00;\n                                        }        \n                                        .{randId}.female div.bft-img-button:hover{\n                                            background-color: #039BE5;\n                                        }\n                                    </style>",r.templates.tommy.field_0="<text "+r.attr.width+'="230" style="font-size: 18px;font-weight:bold;" fill="#ffffff" x="10" y="90" text-anchor="start">{val}</text>',r.templates.tommy.field_1="<text "+r.attr.width+'="150" style="font-size: 14px;" fill="#ffffff" x="10" y="65" text-anchor="start">{val}</text>',r.templates.tommy.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill="#aeaeae" stroke="#aeaeae" rx="7" ry="7"></rect>',r.templates.tommy_male=Object.assign({},r.templates.tommy),r.templates.tommy_male.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill="#039BE5" stroke="#aeaeae" rx="7" ry="7"></rect>',r.templates.tommy_female=Object.assign({},r.templates.tommy),r.templates.tommy_female.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill="#F57C00" stroke="#aeaeae" rx="7" ry="7"></rect>',r.templates.hugo=Object.assign({},r.templates.base),r.templates.hugo.up='<use x="200" y="10" xlink:href="#hugo_up"/>',r.templates.hugo.nodeMenuButton=`<use x="225" y="10" ${r.attr.control_node_menu_id}="{id}" xlink:href="#hugo_node_menu"/>`,r.templates.hugo.defs=`<clipPath id="hugo_img_0"><rect id="hugo_img_0_stroke" stroke-width="2" stroke="#fff" x="90" y="-5" rx="25" ry="25" width="70" height="70"></rect></clipPath>\n                                    <linearGradient id="hugo_grad_female" x1="0%" y1="0%" x2="100%" y2="0%">\n                                        <stop offset="0%" style="stop-color:#FF8024;stop-opacity:1" />\n                                        <stop offset="100%" style="stop-color:#FF46A3;stop-opacity:1" />\n                                    </linearGradient>\n                                    <linearGradient id="hugo_grad_male" x1="0%" y1="0%" x2="100%" y2="0%">\n                                        <stop offset="0%" style="stop-color:#00D3A5;stop-opacity:1" />\n                                        <stop offset="100%" style="stop-color:#00A7D4;stop-opacity:1" />\n                                    </linearGradient>\n                                    <linearGradient id="hugo_grad" x1="0%" y1="0%" x2="100%" y2="0%">\n                                        <stop offset="0%" style="stop-color:#D0D0D0;stop-opacity:1" />\n                                        <stop offset="100%" style="stop-color:#909090;stop-opacity:1" />\n                                    </linearGradient>\n                                    <g id="hugo_up">\n                                        <circle cx="12" cy="12" r="15" fill="transparent" ></circle>\n                                        ${r.icon.ft(24,24,"#fff",0,0)}\n                                    </g>\n                                    <g id="hugo_node_menu" style="cursor:pointer;"><rect x="0" y="0" fill="transparent" width="22" height="22"></rect><circle cx="11" cy="4" r="2" fill="#ffffff"></circle><circle cx="11" cy="11" r="2" fill="#ffffff"></circle><circle cx="11" cy="18" r="2" fill="#ffffff"></circle></g>\n                                    <style>\n                                        .{randId} .bft-edit-form-header{\n                                            background: linear-gradient(90deg, #D0D0D0 0%, #909090 100%);\n                                        }\n                                        .{randId}.male .bft-edit-form-header{\n                                            background: linear-gradient(90deg, #00D3A5 0%, #00A7D4 100%);\n                                        }\n                                        .{randId}.female .bft-edit-form-header{\n                                            background: linear-gradient(90deg, #FF8024 0%, #FF46A3 100%);\n                                        }  \n                                        .{randId} .bft-img-button{\n                                            background-color: #909090;\n                                        }      \n                                        .{randId} .bft-img-button:hover{\n                                            background-color: #D0D0D0;\n                                        }\n                                        .{randId}.male .bft-img-button{\n                                            background-color: #00A7D4;\n                                        }      \n                                        .{randId}.male .bft-img-button:hover{\n                                            background-color: #00D3A5;\n                                        }\n                                        .{randId}.female .bft-img-button{\n                                            background-color: #FF46A3;\n                                        }      \n                                        .{randId}.female .bft-img-button:hover{\n                                            background-color: #FF8024;\n                                        }\n                                        \n                                    </style>`,r.templates.hugo.img_0='<use xlink:href="#hugo_img_0_stroke" /><image preserveAspectRatio="xMidYMid slice" clip-path="url(#hugo_img_0)" xlink:href="{val}"  x="90" y="-5"  width="70" height="70"></image>',r.templates.hugo.field_0="<text "+r.attr.width+'="230" style="font-size: 18px;font-weight:bold;" fill="#ffffff" x="125" y="85" text-anchor="middle">{val}</text>',r.templates.hugo.field_1="<text "+r.attr.width+'="230" style="font-size: 14px;" fill="#ffffff" x="125" y="105" text-anchor="middle">{val}</text>',r.templates.hugo.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill=url(#hugo_grad) stroke="#aeaeae" rx="7" ry="7"></rect>',r.templates.hugo_male=Object.assign({},r.templates.hugo),r.templates.hugo_male.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill=url(#hugo_grad_male) stroke="#aeaeae" rx="7" ry="7"></rect>',r.templates.hugo_female=Object.assign({},r.templates.hugo),r.templates.hugo_female.node='<rect x="0" y="0" height="{h}" width="{w}" stroke-width="1" fill=url(#hugo_grad_female) stroke="#aeaeae" rx="7" ry="7"></rect>',r.templates.mother=Object.assign({},r.templates.base),r.templates.mother.up="",r.templates.mother.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;"  stroke-width="1" stroke="#F57C00" rx="5" ry="5"></rect><text style="font-size: 18px;" fill="#F57C00" x="240" y="30" text-anchor="end">Add mother</text>'+r.icon.mother(70,70,"#F57C00",10,40),r.templates.mother.field_0="",r.templates.mother.field_1="",r.templates.father=Object.assign({},r.templates.mother),r.templates.father.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#039BE5;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#039BE5" x="240" y="30" text-anchor="end">Add father</text>'+r.icon.father(70,70,"#039BE5",10,40),r.templates.partner=Object.assign({},r.templates.mother),r.templates.partner.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#aeaeae;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#aeaeae" x="240" y="30" text-anchor="end">Add partner</text>',r.templates.son=Object.assign({},r.templates.mother),r.templates.son.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#039BE5;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#039BE5" x="240" y="30" text-anchor="end">Add son</text>'+r.icon.son(70,70,"#039BE5",10,40),r.templates.daughter=Object.assign({},r.templates.mother),r.templates.daughter.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#F57C00;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#F57C00" x="240" y="30" text-anchor="end">Add daughter</text>'+r.icon.daughter(70,70,"#F57C00",10,40),r.templates.husband=Object.assign({},r.templates.mother),r.templates.husband.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#039BE5;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#039BE5" x="240" y="30" text-anchor="end">Add husband</text>'+r.icon.husband(70,70,"#039BE5",10,40),r.templates.wife=Object.assign({},r.templates.mother),r.templates.wife.node='<rect x="0" y="0" height="{h}" width="{w}" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#F57C00;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#F57C00" x="240" y="30" text-anchor="end">Add wife</text>'+r.icon.wife(70,70,"#F57C00",10,40),r.templates.pet=Object.assign({},r.templates.mother),r.templates.pet.node='<rect x="0" y="0" style="fill:transparent;height:{h}; width:{w};stroke-width:1;stroke:#F57C00;rx:5;ry:5;"></rect><text style="font-size: 18px;" fill="#F57C00" x="240" y="30" text-anchor="end">Add pet</text>'+r.icon.teddy(70,70,"#F57C00",10,40),r.templates.cgroup=Object.assign({},r.templates.base),r.templates.cgroup.defs="",r.templates.cgroup.size=[250,120],r.templates.cgroup.padding=[0,0,0,0],r.templates.cgroup.node="",r.templates.split=Object.assign({},r.templates.base),r.templates.split.size=[10,10],r.templates.split.node='<circle cx="5" cy="5" r="5" fill="none" stroke-width="1" stroke="#aeaeae"></circle>',r.templates.mirror={linkAdjuster:{},link:"",node:"",nodeMenuButton:"",size:[0,0]},r.ui={_defsIds:{},defs:function(e){var t="";for(var i in r.templates){var n=r.templates[i];n.defs&&(r.ui._defsIds[i]=r.randomId(),t+=n.defs.replaceAll("{randId}",r.ui._defsIds[i]))}return"<defs>"+t+e+"</defs>"},lonely:function(e){return e.nodes&&e.nodes.length?"":r.IT_IS_LONELY_HERE.replace("{link}",r.RES.IT_IS_LONELY_HERE_LINK)},pointer:function(e,t,i){return t===r.action.exporting?"":r.t(e.template,!1,i).pointer},node:function(e,t,i,n,o,a,l,s,d,c){var p=r.t(e.templateName,e.min,d),h=p.node.replaceAll("{w}",e.w).replaceAll("{h}",e.h);p.defs&&(h=h.replaceAll("{randId}",r.ui._defsIds[e.templateName])),null==l&&(l=n.nodeBinding);var f={node:e,data:t};for(var u in l){var g,m=l[u];t&&(g=t[m]),"function"==typeof m&&(g=m(c,e,t)),f.value=g,f.element=p[u],f.name=m,!1!==r.events.publish("field",[c,f])&&null!=f.value&&null!=f.value&&null!=f.element&&(r._lblIsImg(n,u)||"string"!=typeof f.value||(f.value=r.wrapText(f.value,f.element)),h+=f.element.replace("{val}",(function(){return f.value})).replaceAll("{ew}",e.w-(e.padding?e.padding[1]:0)).replaceAll("{cw}",e.w/2).replaceAll("{randId}",r.randomId()).replaceAll("{randId2}",r.randomId()))}var b=r._getPosition(i,e,o,a),v="node";Array.isArray(e.tags)&&e.tags.length&&(v+=" "+e.tags.join(" ")),e.layout&&(v+=" tree-layout");var y="";e.lcn&&(y='lcn="'+e.lcn+'"');var x=r.nodeOpenTag.replace("{lcn}",y).replace("{id}",e.id).replace("{class}",v).replace("{sl}",e.sl).replace("{level}",e.level).replace("{x}",b.x).replace("{y}",b.y),_=r._getOpacity(i,e);return(x=x.replace("{opacity}",_))+(h+=r.ui.nodeBtns(n,e,s,p,c))+r.grCloseTag},nodeBtns:function(e,t,i,n,o){var a="";return null==e.nodeMenu||t.isSplit||i===r.action.exporting||(a+=n.nodeMenuButton.replace("{id}",t.id).replace("{cw}",t.w/2).replace("{ew}",t.w-(t.padding?t.padding[1]:0))),null==e.nodeCircleMenu||t.isSplit||i===r.action.exporting||r.isNEU(n.nodeCircleMenuButton)||(a+='<g style="cursor:pointer;" transform="matrix(1,0,0,1,'+n.nodeCircleMenuButton.x+","+n.nodeCircleMenuButton.y+')" '+r.attr.control_node_circle_menu_id+'="'+t.id+'"><circle cx="0" cy="0" fill="'+n.nodeCircleMenuButton.color+'" r="'+n.nodeCircleMenuButton.radius+'" stroke-width="1" stroke="'+n.nodeCircleMenuButton.stroke+'"></circle><line x1="-'+n.nodeCircleMenuButton.radius/2+'" y1="-6" x2="'+n.nodeCircleMenuButton.radius/2+'" y2="-6" stroke-width="2" stroke="'+n.nodeCircleMenuButton.stroke+'"></line><line x1="-'+n.nodeCircleMenuButton.radius/2+'" y1="0" x2="'+n.nodeCircleMenuButton.radius/2+'" y2="0" stroke-width="2" stroke="'+n.nodeCircleMenuButton.stroke+'"></line><line x1="-'+n.nodeCircleMenuButton.radius/2+'" y1="6" x2="'+n.nodeCircleMenuButton.radius/2+'" y2="6" stroke-width="2" stroke="'+n.nodeCircleMenuButton.stroke+'"></line></g>'),a},expandCollapseBtn:function(e,t,i,n,o){var a="";if(n!==r.action.exporting&&!t.isSplit){var l=i[t.lcn?t.lcn:"base"],s=0,d=0,c=r.t(t.templateName,t.min,o);if(t.childrenIds.length>0){if(t.hasPartners){for(var p=!1,h=0;h<t.children.length;h++)t.children[h].parentPartner||t.children[h].isPartner||(p=!0);if(!p)return""}switch(l.orientation){case r.orientation.top:case r.orientation.top_left:s=t.x+t.w/2,d=t.y+t.h;break;case r.orientation.bottom:case r.orientation.bottom_left:s=t.x+t.w/2,d=t.y;break;case r.orientation.right:case r.orientation.right_top:s=t.x,d=t.y+t.h/2;break;case r.orientation.left:case r.orientation.left_top:s=t.x+t.w,d=t.y+t.h/2}if(s-=c.expandCollapseSize/2,d-=c.expandCollapseSize/2,e.getCollapsedIds(t).length?(a+=r.expcollOpenTag.replace("{id}",t.id).replace("{x}",s).replace("{y}",d),a+=c.plus,a+=r.grCloseTag):(a+=r.expcollOpenTag.replace("{id}",t.id).replace("{x}",s).replace("{y}",d),a+=c.minus,a+=r.grCloseTag),a.indexOf("{collapsed-children-count}")){var f=r.collapsedChildrenCount(e,t);a=a.replace("{collapsed-children-count}",f)}}e._nodeHasHiddenParent(t)&&(a+=r.upOpenTag.replace("{id}",t.id).replace("{x}",t.x).replace("{y}",t.y),a+=c.up,a+=r.grCloseTag)}var u={html:a,node:t};return r.events.publish("renderbuttons",[e,u]),u.html},link:function(e,t,i,n,o,a){var l=e.lcn?e.lcn:"base",s=t._layoutConfigs[l],d=r.t(e.templateName,e.min,i),c=[],p=s.levelSeparation/2;e.layout!=r.mixed&&e.layout!=r.tree||(p=s.mixedHierarchyNodesSeparation/2);var h=0,f=r.getRootOf(e).id,u=n[f][e.sl],g=void 0;if(e.hasPartners){g={ids:[],indexes:{},ppnodes:{},lastLeft:null,firstRight:null,maxSidePartnersWithChildren:0,rightIds:[],leftIds:[],partnerChildrenSplitSeparation:t.config.partnerChildrenSplitSeparation};for(var m=0;m<e.children.length;m++)(b=e.children[m]).parentPartner?(g.ppnodes[b.id]=b.parentPartner,g.ids.push(b.id),1==b.parentPartner.isPartner?(-1==g.rightIds.indexOf(b.parentPartner.id)&&g.rightIds.push(b.parentPartner.id),g.indexes[b.id]=g.rightIds.indexOf(b.parentPartner.id),g.firstRight||(g.firstRight=b)):2==b.parentPartner.isPartner&&(-1==g.leftIds.indexOf(b.parentPartner.id)&&g.leftIds.push(b.parentPartner.id),g.indexes[b.id]=g.leftIds.indexOf(b.parentPartner.id),g.lastLeft=b)):b.isPartner||(g.lastLeft=b,g.firstRight||(g.firstRight=b));g.maxSidePartnersWithChildren=Math.max(g.leftIds.length,g.rightIds.length),h=0==g.maxSidePartnersWithChildren?t.config.minPartnerSeparation/2:t.config.minPartnerSeparation/2+g.partnerChildrenSplitSeparation*g.maxSidePartnersWithChildren+g.partnerChildrenSplitSeparation/2}for(m=0;m<e.children.length;m++){var b=e.children[m],v=n[f][b.sl],y={xa:0,ya:0,xb:0,yb:0,xc:0,yc:0,xd:0,yd:0,x:0,y:0,rotate:0},x=(d=r.t(b.templateName,b.min,i)).link;if(b.isChildOfPartner)switch(s.orientation){case r.orientation.top:case r.orientation.top_left:var _=1==b.layout?void 0:v.minY-(v.minY-u.maxY)/2;y=r.ui._linkTopToBottom(b.parentPartner,b,d,p,_);break;case r.orientation.bottom:case r.orientation.bottom_left:_=1==b.layout?void 0:v.maxY-(v.maxY-u.minY)/2,y=r.ui._linkBottomToTop(b.parentPartner,b,d,p,_);break;case r.orientation.right:case r.orientation.right_top:_=1==b.layout?void 0:v.maxX-(v.maxX-u.minX)/2,y=r.ui._linkRightToLeft(b.parentPartner,b,d,p,_);break;case r.orientation.left:case r.orientation.left_top:_=1==b.layout?void 0:v.minX-(v.minX-u.maxX)/2,y=r.ui._linkLeftToRight(b.parentPartner,b,d,p,_)}else if(g&&-1!=g.ids.indexOf(b.id))switch(s.orientation){case r.orientation.top:case r.orientation.top_left:y=r.ui._linkPpTop(g,e,b,v,u,d);break;case r.orientation.bottom:case r.orientation.bottom_left:y=r.ui._linkPpBottom(g,e,b,v,u,d);break;case r.orientation.right:case r.orientation.right_top:y=r.ui._linkPpRight(g,e,b,v,u,d);break;case r.orientation.left:case r.orientation.left_top:y=r.ui._linkPpLeft(g,e,b,v,u,d)}else if((b.isAssistant||2==b.layout)&&b.rightNeighbor&&b.rightNeighbor.isSplit)switch(s.orientation){case r.orientation.top:case r.orientation.top_left:case r.orientation.bottom:case r.orientation.bottom_left:y=r.ui._linkRightToLeft(b.rightNeighbor,b,d,p);break;case r.orientation.right:case r.orientation.right_top:case r.orientation.left:case r.orientation.left_top:y=r.ui._linkBottomToTop(b.rightNeighbor,b,d,p)}else if((b.isAssistant||2==b.layout)&&b.leftNeighbor&&b.leftNeighbor.isSplit)switch(s.orientation){case r.orientation.top:case r.orientation.top_left:case r.orientation.bottom:case r.orientation.bottom_left:y=r.ui._linkLeftToRight(b.leftNeighbor,b,d,p);break;case r.orientation.right:case r.orientation.right_top:case r.orientation.left:case r.orientation.left_top:y=r.ui._linkTopToBottom(b.leftNeighbor,b,d,p)}else switch(s.orientation){case r.orientation.top:case r.orientation.top_left:1==b.isPartner?y=r.ui._linkLeftToRight(e,b,d,h):2==b.isPartner?y=r.ui._linkRightToLeft(e,b,d,h):(_=1==b.layout?void 0:v.minY-(v.minY-u.maxY)/2,y=r.ui._linkTopToBottom(e,b,d,p,_));break;case r.orientation.bottom:case r.orientation.bottom_left:1==b.isPartner?y=r.ui._linkLeftToRight(e,b,d,h):2==b.isPartner?y=r.ui._linkRightToLeft(e,b,d,h):(_=1==b.layout?void 0:v.maxY-(v.maxY-u.minY)/2,y=r.ui._linkBottomToTop(e,b,d,p,_));break;case r.orientation.right:case r.orientation.right_top:1==b.isPartner?y=r.ui._linkTopToBottom(e,b,d,h):2==b.isPartner?y=r.ui._linkBottomToTop(e,b,d,h):(_=1==b.layout?void 0:v.maxX-(v.maxX-u.minX)/2,y=r.ui._linkRightToLeft(e,b,d,p,_));break;case r.orientation.left:case r.orientation.left_top:1==b.isPartner?y=r.ui._linkTopToBottom(e,b,d,h):2==b.isPartner?y=r.ui._linkBottomToTop(e,b,d,h):(_=1==b.layout?void 0:v.minX-(v.minX-u.maxX)/2,y=r.ui._linkLeftToRight(e,b,d,p,_))}if(-1!=x.indexOf("{rounded}"))if(y.xa==y.xb&&y.xa==y.xc&&y.xa==y.xd||y.ya==y.yb&&y.ya==y.yc&&y.ya==y.yd)x=x.replace("{rounded}","M"+y.xa+","+y.ya+" L"+y.xd+","+y.yd);else if(Math.abs(y.xa-y.xd)<=r.LINK_ROUNDED_CORNERS&&Math.abs(y.xa-y.xc)<=r.LINK_ROUNDED_CORNERS&&Math.abs(y.xa-y.xb)<=r.LINK_ROUNDED_CORNERS)x=x.replace("{rounded}","M"+y.xa+","+y.ya+" L"+y.xa+","+y.yd);else if(Math.abs(y.ya-y.yd)<=r.LINK_ROUNDED_CORNERS&&Math.abs(y.ya-y.yc)<=r.LINK_ROUNDED_CORNERS&&Math.abs(y.ya-y.yb)<=r.LINK_ROUNDED_CORNERS)x=x.replace("{rounded}","M"+y.xa+","+y.ya+" L"+y.xd+","+y.ya);else{var w=r.ui._roundedEdge(y.xa,y.ya,y.xb,y.yb,y.xc,y.yc),k=r.ui._roundedEdge(y.xb,y.yb,y.xc,y.yc,y.xd,y.yd);x=x.replace("{rounded}","M"+w.x1+","+w.y1+" "+w.x2+","+w.y2+" Q"+w.qx1+","+w.qy1+" "+w.qx2+","+w.qy2+" L"+k.x2+","+k.y2+" Q"+k.qx1+","+k.qy1+" "+k.qx2+","+k.qy2+" L"+k.x3+","+k.y3)}else x=-1!=x.indexOf("{edge}")?x.replace("{edge}","M"+y.xa+","+y.ya+" "+y.xb+","+y.yb+" "+y.xc+","+y.yc+" L"+y.xd+","+y.yd):-1!=x.indexOf("{curve}")?x.replace("{curve}","M"+y.xa+","+y.ya+" C"+y.xb+","+y.yb+" "+y.xc+","+y.yc+" "+y.xd+","+y.yd):x.replaceAll("{xa}",y.xa).replaceAll("{ya}",y.ya).replaceAll("{xb}",y.xb).replaceAll("{yb}",y.yb).replaceAll("{xc}",y.xc).replaceAll("{yc}",y.yc).replaceAll("{xd}",y.xd).replaceAll("{yd}",y.yd);c.push(r.linkOpenTag.replace("{id}",e.id).replace("{class}","link "+b.tags.join(" ")).replace("{child-id}",b.id));var S={node:e,cnode:b,p:y,html:x,action:a};r.events.publish("render-link",[t,S]),c.push(S.html);var C="";for(var I in t.config.linkBinding){var N=t.config.linkBinding[I],A=t._get(b.id);if(A){var M=A[N];S.value=M,S.element=d[I],S.name=N,!1!==r.events.publish("label",[t,S])&&(r.isNEU(S.value)||r.isNEU(S.element)||(C+=S.element.replace("{val}",S.value)))}}""!=C&&(C=r.linkFieldsOpenTag.replace("{x}",y.x).replace("{y}",y.y).replace("{rotate}",0)+C+r.grCloseTag,c.push(C)),c.push(r.grCloseTag)}return c.join("")},svg:function(e,t,i,n,o,a){return r.t(n.template,!1,a).svg.replace("{w}",e).replace("{h}",t).replace("{viewBox}",i).replace("{randId}",r.ui._defsIds[n.template]).replace("{mode}",n.mode).replace("{template}",n.template).replace("{content}",(function(){return o}))},menuButton:function(e){return null==e.menu?"":r.t(e.template,!1).menuButton.replaceAll("{p}",e.padding)},_roundedEdge:function(e,t,i,n,o,a){var l,s,d,c=r.LINK_ROUNDED_CORNERS,p=0;return e==i&&e==o||t==n&&t==a?(l=d=i,s=p=n):(e!=o&&i==o&&(l=d=i,s=n,t<a?p=n+c:t>a&&(p=n-c)),e<o&&i==o?i-=c:e>o&&i==o&&(i+=c),t!=a&&n==a&&(l=i,s=p=n,e<o?d=i+c:e>o&&(d=i-c)),t<a&&n==a?n-=c:t>a&&n==a&&(n+=c)),{x1:e,y1:t,x2:i,y2:n,x3:o,y3:a,qx1:l,qy1:s,qx2:d,qy2:p}},_linkTopToBottom:function(e,t,i,n,r){var o,a,l,s,d,c;return o=e.x+e.w/2+i.linkAdjuster.toX,a=e.y+e.h+i.linkAdjuster.toY,s=l=t.x+t.w/2+i.linkAdjuster.fromX,d=t.y+i.linkAdjuster.fromY,{xa:o,ya:a,xb:o,yb:c=e.rightNeighbor&&e.rightNeighbor.isAssistant&&"split"==t.templateName?e.rightNeighbor.y+e.rightNeighbor.h+n:"split"!=e.templateName||!t.isAssistant&&2!=t.layout?"split"==t.templateName?a+n:null!=r?r:d-n:d,xc:l,yc:c,xd:s,yd:d,x:l,y:c+16,rotate:0}},_linkBottomToTop:function(e,t,i,n,r){var o,a,l,s,d,c;return o=e.x+e.w/2+i.linkAdjuster.toX,a=e.y+i.linkAdjuster.toY,s=l=t.x+t.w/2+i.linkAdjuster.fromX,d=t.y+t.h+i.linkAdjuster.fromY,{xa:o,ya:a,xb:o,yb:c=e.rightNeighbor&&e.rightNeighbor.isAssistant&&"split"==t.templateName?e.rightNeighbor.y-n:"split"!=e.templateName||!t.isAssistant&&2!=t.layout?"split"==t.templateName?a-n:null!=r?r:d+n:d,xc:l,yc:c,xd:s,yd:d,x:l,y:c-14,rotate:0}},_linkRightToLeft:function(e,t,i,n,r){var o,a,l,s,d,c,p;return o=e.x+i.linkAdjuster.toX,a=e.y+e.h/2+i.linkAdjuster.toY,d=t.x+t.w+i.linkAdjuster.fromX,c=s=t.y+t.h/2+i.linkAdjuster.fromY,l=a,{xa:o,ya:a,xb:p=e.rightNeighbor&&e.rightNeighbor.isAssistant&&"split"==t.templateName?e.rightNeighbor.x-n:"split"!=e.templateName||!t.isAssistant&&2!=t.layout?"split"==t.templateName?o-n:null!=r?r:d+n:d,yb:l,xc:p,yc:s,xd:d,yd:c,x:p-16,y:s,rotate:90}},_linkLeftToRight:function(e,t,i,n,r){var o,a,l,s,d,c,p;return o=e.x+e.w+i.linkAdjuster.toX,a=e.y+e.h/2+i.linkAdjuster.toY,d=t.x+i.linkAdjuster.fromX,c=s=t.y+t.h/2+i.linkAdjuster.fromY,l=a,{xa:o,ya:a,xb:p=e.rightNeighbor&&e.rightNeighbor.isAssistant&&"split"==t.templateName?e.rightNeighbor.x+e.rightNeighbor.w+n:"split"!=e.templateName||!t.isAssistant&&2!=t.layout?"split"==t.templateName?o+n:null!=r?r:d-n:d,yb:l,xc:p,yc:s,xd:d,yd:c,x:p+14,y:s,rotate:270}},_linkPpTop:function(e,t,i,n,o,a){var l=e.ppnodes[i.id],s=l.y+l.h/2,d=n.minY-(n.minY-o.maxY)/2,c=(n.minY-o.maxY)/e.maxSidePartnersWithChildren/4,p=r.ui.__linkPpBottomTop(e,t,i,d,c,l),h=p.x;return d=p.mid,r.ui._linkTopToBottom({x:h,y:s,w:0,h:0},i,a,0,d)},_linkPpBottom:function(e,t,i,n,o,a){var l=e.ppnodes[i.id],s=l.y+l.h/2,d=n.maxY-(n.maxY-o.minY)/2,c=(n.maxY-o.minY)/e.maxSidePartnersWithChildren/4,p=r.ui.__linkPpBottomTop(e,t,i,d,c,l),h=p.x;return d=p.mid,r.ui._linkBottomToTop({x:h,y:s,w:0,h:0},i,a,0,d)},_linkPpLeft:function(e,t,i,n,o,a){var l=e.ppnodes[i.id],s=n.minX-(n.minX-o.maxX)/2,d=(n.minX-o.maxX)/e.maxSidePartnersWithChildren/4,c=l.x+l.w/2,p=r.ui.__linkPpLeftRight(e,t,i,s,d,l),h=p.y;return s=p.mid,r.ui._linkLeftToRight({x:c,y:h,w:0,h:0},i,a,0,s)},_linkPpRight:function(e,t,i,n,o,a){var l=e.ppnodes[i.id],s=n.maxX-(n.maxX-o.minX)/2,d=(n.maxX-o.minX)/e.maxSidePartnersWithChildren/4,c=l.x+l.w/2,p=r.ui.__linkPpLeftRight(e,t,i,s,d,l),h=p.y;return s=p.mid,r.ui._linkRightToLeft({x:c,y:h,w:0,h:0},i,a,0,s)},__linkPpBottomTop:function(e,t,i,n,r,o){var a=0;return 1==o.isPartner?(a=o.x-t.partnerSeparation/2+e.indexes[i.id]*e.partnerChildrenSplitSeparation-(e.rightIds.length-1)*e.partnerChildrenSplitSeparation/2,e.lastLeft&&a<e.lastLeft.x+e.lastLeft.w/2?a<i.x+i.w/2?n-=(e.indexes[i.id]+1)*r:n-=(e.rightIds.length-e.indexes[i.id])*r:a<i.x+i.w/2?n+=(e.rightIds.length-e.indexes[i.id])*r:n+=(e.indexes[i.id]+1)*r):2==o.isPartner&&(a=o.x+o.w+t.partnerSeparation/2+e.indexes[i.id]*e.partnerChildrenSplitSeparation-(e.leftIds.length-1)*e.partnerChildrenSplitSeparation/2,e.firstRight&&a>e.firstRight.x+e.firstRight.w/2?a<i.x+i.w/2?n-=(e.indexes[i.id]+1)*r:n-=(e.leftIds.length-e.indexes[i.id])*r:a<i.x+i.w/2?n+=(e.leftIds.length-e.indexes[i.id])*r:n+=(e.indexes[i.id]+1)*r),{x:a,mid:n}},__linkPpLeftRight:function(e,t,i,n,r,o){var a=0;return 1==o.isPartner?(a=o.y-t.partnerSeparation/2+e.indexes[i.id]*e.partnerChildrenSplitSeparation-(e.rightIds.length-1)*e.partnerChildrenSplitSeparation/2,e.lastLeft&&a<e.lastLeft.y+e.lastLeft.h/2?a<i.y+i.h/2?n-=(e.indexes[i.id]+1)*r:n-=(e.rightIds.length-e.indexes[i.id])*r:a<i.y+i.h/2?n+=(e.rightIds.length-e.indexes[i.id])*r:n+=(e.indexes[i.id]+1)*r):2==o.isPartner&&(a=o.y+o.h+t.partnerSeparation/2+e.indexes[i.id]*e.partnerChildrenSplitSeparation-(e.leftIds.length-1)*e.partnerChildrenSplitSeparation/2,e.firstRight&&a>e.firstRight.y+e.firstRight.h/2?a<i.y+i.h/2?n-=(e.indexes[i.id]+1)*r:n-=(e.leftIds.length-e.indexes[i.id])*r:a<i.y+i.h/2?n+=(e.leftIds.length-e.indexes[i.id])*r:n+=(e.indexes[i.id]+1)*r),{y:a,mid:n}}},r.ui._base_nodeBtns=r.ui.nodeBtns,r.ui.nodeBtns=function(e,t,i,n,o){var a="";return o._tree_menu_temp?!t.isSplit&&i!==r.action.exporting&&n.nodeTreeMenuCloseButton&&o._tree_menu_temp.id==t.id&&(a+=n.nodeTreeMenuCloseButton):(a=r.ui._base_nodeBtns(e,t,i,n,o),null!=e.nodeTreeMenu&&!t.isSplit&&i!==r.action.exporting&&n.nodeTreeMenuButton&&(a+=n.nodeTreeMenuButton.replace("{id}",t.id))),a},r.ui._base_expandCollapseBtn=r.ui.expandCollapseBtn,r.ui.expandCollapseBtn=function(e,t,i,n,o){return e._tree_menu_temp?"":r.ui._base_expandCollapseBtn(e,t,i,n,o)},r.xScrollUI=function(e,t,i,n,r){this.element=e,this.requestParams=i,this.config=t,this.onSetViewBoxCallback=n,this.onDrawCallback=r,this.pos=0},r.xScrollUI.prototype.addListener=function(e){var t=this;if((this.config.mouseScrool==r.action.xScroll||this.config.mouseScrool==r.action.scroll)&&this.bar){var i=r._getScrollSensitivity();!function(e,i,n){var o=!1;function a(){o=!0;var e=(t.pos-t.bar.scrollLeft)/n;if(e>0)e++;else{if(0==e)return void(o=!1);e--}Math.ceil(t.bar.scrollLeft)==Math.ceil(t.pos)?o=!1:(t.bar.scrollLeft+=e,l(a))}e.addEventListener("wheel",(function(e){var n=0;if(t.config.mouseScrool==r.action.xScroll)(n=e.deltaX||e.wheelDeltaX)||(n=e.deltaY||e.wheelDeltaY);else if(t.config.mouseScrool==r.action.scroll&&!(n=e.shiftKey?e.deltaY||e.wheelDeltaY:e.deltaX||e.wheelDeltaX))return;n=-n,n=Math.max(-1,Math.min(1,n)),t.pos+=-n*i;var l=parseFloat(t.innerBar.clientWidth)-parseFloat(t.bar.clientWidth);t.pos<0&&(t.pos=0),t.pos>l&&(t.pos=l),o||a()}),{passive:!0});var l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,20)}}(e,i.speed,i.smooth)}},r.xScrollUI.prototype.create=function(e){if(this.config.showXScroll===r.scroll.visible||this.config.mouseScrool===r.action.scroll||this.config.mouseScrool===r.action.xScroll){var t=this;this.bar&&this.bar.parentNode.removeChild(this.bar),this.bar=document.createElement("div"),this.config.showXScroll!==r.scroll.visible&&(this.bar.style.visibility="hidden"),this.innerBar=document.createElement("div"),this.requestParams(),this.innerBar.innerHTML="&nbsp",Object.assign(this.bar.style,{position:"absolute",left:0,bottom:0,width:e+"px","overflow-x":"scroll",height:"20px"}),this.element.appendChild(this.bar),this.bar.appendChild(this.innerBar),this.bar.addEventListener("scroll",(function(){if(this.ignore)this.ignore=!1;else{var e=t.requestParams(),i=(parseFloat(t.innerBar.clientWidth)-parseFloat(t.bar.clientWidth))/100,n=this.scrollLeft/i,r=(e.boundary.right-e.boundary.left)/100;e.viewBox[0]=n*r+e.boundary.left,t.onSetViewBoxCallback(e.viewBox),clearTimeout(this._timeout),this._timeout=setTimeout((function(){t.onDrawCallback()}),500)}}))}},r.xScrollUI.prototype.setPosition=function(){if(this.bar){var e=this.requestParams(),t=Math.abs(e.boundary.maxX-e.boundary.minX)*e.scale;switch(this.config.orientation){case r.orientation.bottom:case r.orientation.bottom_left:innerHeight=Math.abs(e.boundary.minY*e.scale);break;case r.orientation.right:case r.orientation.right_top:t=Math.abs(e.boundary.minX*e.scale)}this.innerBar.style.width=t+"px";var i=(e.boundary.right-e.boundary.left)/100,n=(e.viewBox[0]-e.boundary.left)/i;n<0?n=0:n>100&&(n=100);var o=(parseFloat(this.innerBar.clientWidth)-parseFloat(this.bar.clientWidth))/100,a=n*o;this.bar.ignore=!0,this.bar.scrollLeft=a,this.pos=this.bar.scrollLeft,this.bar.style.visibility=o<=0?"hidden":""}},r.yScrollUI=function(e,t,i,n,r){this.element=e,this.requestParams=i,this.config=t,this.onSetViewBoxCallback=n,this.onDrawCallback=r,this.pos=0},r.yScrollUI.prototype.addListener=function(e){var t=this;if(this.config.mouseScrool==r.action.yScroll||this.config.mouseScrool==r.action.scroll){var i=r._getScrollSensitivity();!function(e,i,n){var o=!1;function a(){o=!0;var e=(t.pos-t.bar.scrollTop)/n;if(e>0)e++;else{if(0==e)return void(o=!1);e--}Math.ceil(t.bar.scrollTop)==Math.ceil(t.pos)?o=!1:(t.bar.scrollTop+=e,l(a))}e.addEventListener("wheel",(function(e){var n=0;if(t.config.mouseScrool==r.action.yScroll)(n=e.deltaY||e.wheelDeltaY)||(n=e.deltaX||e.wheelDeltaX);else if(t.config.mouseScrool==r.action.scroll&&!(n=e.shiftKey?e.deltaX||e.wheelDeltaX:e.deltaY||e.wheelDeltaY))return;n=-n,n=Math.max(-1,Math.min(1,n)),t.pos+=-n*i;var l=parseFloat(t.innerBar.clientHeight)-parseFloat(t.bar.clientHeight);t.pos<0&&(t.pos=0),t.pos>l&&(t.pos=l),o||a()}),{passive:!0});var l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,20)}}(e,i.speed,i.smooth)}},r.yScrollUI.prototype.create=function(e){if(this.config.showYScroll===r.scroll.visible||this.config.mouseScrool===r.action.scroll||this.config.mouseScrool===r.action.yScroll){var t=this;this.bar&&this.bar.parentNode.removeChild(this.bar),this.bar=document.createElement("div"),this.config.showYScroll!==r.scroll.visible&&(this.bar.style.visibility="hidden"),this.innerBar=document.createElement("div"),this.innerBar.innerHTML="&nbsp",Object.assign(this.bar.style,{position:"absolute",right:0,bottom:0,height:e+"px","overflow-y":"scroll",width:"20px"}),this.element.appendChild(this.bar),this.bar.appendChild(this.innerBar),this.bar.addEventListener("scroll",(function(){if(this.ignore)this.ignore=!1;else{var e=t.requestParams(),i=(parseFloat(t.innerBar.clientHeight)-parseFloat(t.bar.clientHeight))/100,n=this.scrollTop/i,r=(e.boundary.bottom-e.boundary.top)/100;e.viewBox[1]=n*r+e.boundary.top,t.onSetViewBoxCallback(e.viewBox),clearTimeout(this._timeout),this._timeout=setTimeout((function(){t.onDrawCallback()}),500)}}))}},r.yScrollUI.prototype.setPosition=function(){if(this.bar){var e=this.requestParams(),t=Math.abs(e.boundary.maxY-e.boundary.minY)*e.scale;switch(this.config.orientation){case r.orientation.bottom:case r.orientation.bottom_left:t=Math.abs(e.boundary.minY*e.scale);break;case r.orientation.right:case r.orientation.right_top:innerWidth=Math.abs(e.boundary.minX*e.scale)}this.innerBar.style.height=t+"px";var i=(e.boundary.bottom-e.boundary.top)/100,n=(e.viewBox[1]-e.boundary.top)/Math.abs(i);n<0?n=0:n>100&&(n=100);var o=(parseFloat(this.innerBar.clientHeight)-parseFloat(this.bar.clientHeight))/100,a=n*o;this.bar.ignore=!0,this.bar.scrollTop=a,this.pos=this.bar.scrollTop,this.bar.style.visibility=o<=0?"hidden":""}},r.prototype.zoom=function(e,t,i,n){var o=this.getViewBox().slice(0),a=o,l=o[2],s=o[3];!0===e?(o[2]=o[2]/r.SCALE_FACTOR,o[3]=o[3]/r.SCALE_FACTOR):!1===e?(o[2]=o[2]*r.SCALE_FACTOR,o[3]=o[3]*r.SCALE_FACTOR):(o[2]=o[2]/e,o[3]=o[3]/e),t||(t=[50,50]),o[0]=a[0]-(o[2]-l)/(100/t[0]),o[1]=a[1]-(o[3]-s)/(100/t[1]);var d=this.getScale(o);if(o[2]=this.width()/d,o[3]=this.height()/d,!0===e&&d<this.config.scaleMax||!1===e&&d>this.config.scaleMin||0!=e&&1!=e&&d<this.config.scaleMax&&d>this.config.scaleMin){this._hideBeforeAnimation();var c=this;i?(clearTimeout(c._timeout),r.animate(this.getSvg(),{viewbox:this.getViewBox()},{viewbox:o},this.config.anim.duration,this.config.anim.func,(function(){clearTimeout(c._timeout),c._timeout=setTimeout((function(){c._draw(!0,r.action.zoom,null,n)}),500)}))):(this.setViewBox(o),clearTimeout(c._timeout),c._timeout=setTimeout((function(){c._draw(!0,r.action.zoom,null,n)}),500))}},r.loading={},r.loading.show=function(e){var t=document.createElement("div");t.id="bft-loading",t.innerHTML='<style>@-webkit-keyframes dot-keyframes {0% { opacity: .4; -webkit-transform: scale(1, 1);transform: scale(1, 1);}50% {opacity: 1;-webkit-transform: scale(1.2, 1.2);transform: scale(1.2, 1.2);}100% {opacity: .4;-webkit-transform: scale(1, 1);transform: scale(1, 1);}}@keyframes dot-keyframes {0% {opacity: .4;-webkit-transform: scale(1, 1);transform: scale(1, 1);}50% {opacity: 1;-webkit-transform: scale(1.2, 1.2);transform: scale(1.2, 1.2);}100% {opacity: .4;-webkit-transform: scale(1, 1);transform: scale(1, 1);}}.bft-loading-dots div {margin: 10px;}      .bft-dot-1 {background-color: #039BE5;}.bft-dot-2 {background-color: #F57C00;}.bft-dot-3 {background-color: #FFCA28;}      .bft-loading-dots {text-align: center;width: 100%; position: absolute; top: 0;}.bft-loading-dots--dot {-webkit-animation: dot-keyframes 1.5s infinite ease-in-out;animation: dot-keyframes 1.5s infinite ease-in-out;        border-radius: 10px;display: inline-block;height: 10px;width: 10px;}.bft-loading-dots--dot:nth-child(2) {-webkit-animation-delay: .5s;animation-delay: .5s;}.bft-loading-dots--dot:nth-child(3) {-webkit-animation-delay: 1s;animation-delay: 1s;}</style><div class="bft-loading-dots"><div class="bft-loading-dots--dot bft-dot-1"></div><div class="bft-loading-dots--dot bft-dot-2"></div><div class="bft-loading-dots--dot bft-dot-3"></div></div>',e.element.appendChild(t)},r.loading.hide=function(e){var t=e.element.querySelector("#bft-loading");t&&t.parentNode.removeChild(t)},r.pdfPrevUI={},r.loc||(r.loc={}),r.loc.ppdfCmdTitle="PDF Preview",r.loc.ppdfSave="Save",r.loc.ppdfCancel="Cancel",r.loc.ppdfFormat="Format",r.loc.ppdfFitToDrwaing="Fit",r.loc.ppdfA4="A4",r.loc.ppdfA3="A3",r.loc.ppdfA2="A2",r.loc.ppdfA1="A1",r.loc.ppdfLetter="Letter",r.loc.ppdfLegal="Legal",r.loc.ppdfLayout="Layout",r.loc.ppdfPortrait="Portrait",r.loc.ppdfLandscape="Landscape",r.loc.ppdfFittopagewidth="Fit to page width",r.loc.ppdfMargin="Margin",r.loc.ppdfHeader="Header",r.loc.ppdfFooter="Footer",r.loc.ppdfScale="Scale",r.pdfPrevUI.show=function(e,t){r.pdfPrevUI.hide(e),t=e._defaultExportOptions(t,"pdf");var i=document.createElement("div");i.classList.add(e.config.mode),i.id="bft-ppdf-btns",Object.assign(i.style,{position:"absolute",top:0,left:0,"background-color":"#fff","z-index":5,margin:"0 0 0 -265px","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",width:"265px",height:"100%","font-family":"Roboto,Helvetica",color:"#757575","text-align":"right",padding:"10px"}),e.element.appendChild(i),i.innerHTML="<h1>"+r.loc.ppdfCmdTitle+'</h1><div><button type="button" id="bft-prev-save" style="font-size: 14px; width: 90px;">'+r.loc.ppdfSave+'</button>&nbsp;<button type="button" id="bft-prev-cancel" style="width: 90px;font-size: 14px;">'+r.loc.ppdfCancel+'</button></div><div style="margin-top:30px; height:10px;border-bottom:1px solid #eeeeee;"></div><div style="padding-top:30px;"><label for="bft-size">'+r.loc.ppdfFormat+': </label><select id="bft-ppdf-size" style="color: #757575; width: 150px; font-size: 14px;" id="bft-size"><option value="fit">'+r.loc.ppdfFitToDrwaing+'</option><option value="A4">'+r.loc.ppdfA4+'</option><option value="A3">'+r.loc.ppdfA3+'</option><option value="A2">'+r.loc.ppdfA2+'</option><option value="A1">'+r.loc.ppdfA1+'</option><option value="Letter">'+r.loc.ppdfLetter+'</option><option value="Legal">'+r.loc.ppdfLegal+'</option></select></div><div style="padding-top:10px;"><label for="bft-ppdf-layout">'+r.loc.ppdfLayout+': </label><select id="bft-ppdf-layout" style="color: #757575; width: 150px;font-size: 14px;" ><option value="false">'+r.loc.ppdfPortrait+'</option><option value="true">'+r.loc.ppdfLandscape+'</option></select></div><div style="padding-top:10px;"><label for="bft-scale">'+r.loc.ppdfScale+': </label><select id="bft-ppdf-scale" style="color: #757575; width: 150px;font-size: 14px;" id="bft-scale"><option value="fit">'+r.loc.ppdfFittopagewidth+'</option><option value="10">10%</option><option value="20">20%</option><option value="30">30%</option><option value="40">40%</option><option value="50">50%</option><option value="60">60%</option><option value="70">70%</option><option value="80">80%</option><option value="90">90%</option><option value="100">100%</option><option value="110">110%</option><option value="120">120%</option><option value="130">130%</option><option value="140">140%</option><option value="150">150%</option><option value="160">160%</option><option value="170">170%</option><option value="180">180%</option><option value="190">190%</option><option value="200">200%</option></select></div><div style="margin-top:10px;margin-bottom:10px; height:10px;border-bottom:1px solid #eeeeee;"></div><div style="padding-top:10px;"><label for="bft-ppdf-header">'+r.loc.ppdfHeader+': </label><input id="bft-ppdf-header" type="text" style="color: #757575; width: 100px;font-size: 14px;" ></div><div style="padding-top:10px;"><label for="bft-ppdf-footer">'+r.loc.ppdfFooter+': </label><input id="bft-ppdf-footer" type="text" style="color: #757575; width: 100px;font-size: 14px;" ></div><div style="padding-top:10px;"><label for="bft-ppdf-margin">'+r.loc.ppdfMargin+': </label><input id="bft-ppdf-margin" type="text" style="color: #757575; width: 100px;font-size: 14px;" ></div>';var n=document.createElement("div");n.id="bft-ppdf-wrapper",Object.assign(n.style,{"overflow-y":"scroll","z-index":11,position:"absolute",top:0,left:"285px","background-color":"#eee",width:e.width()-270+"px",height:"100%"}),e.element.appendChild(n),n.innerHTML='<div id="bft-ppdf-content" style="width: 100%;margin-top:10px;margin-bottom:10px;opacity:0;"></div>';var o,a,l,s=e.element.querySelector("#bft-ppdf-size"),d=e.element.querySelector("#bft-ppdf-layout"),c=e.element.querySelector("#bft-ppdf-scale"),p=e.element.querySelector("#bft-ppdf-margin"),h=e.element.querySelector("#bft-ppdf-header"),f=e.element.querySelector("#bft-ppdf-footer");s.value=t.format,d.value=t.landscape,c.value=t.scale,p.value=t.margin,h.value=t.header,f.value=t.footer,r.animate(e.element.querySelector("#bft-ppdf-btns"),{margin:[0,0,0,-250]},{margin:[0,0,0,0]},300,r.anim.outSin,(function(){e.exportPDF(t,r.pdfPrevUI._handler)})),e.element.querySelector("#bft-prev-cancel").addEventListener("click",(function(){r.pdfPrevUI.hide(e)})),e.element.querySelector("#bft-prev-save").addEventListener("click",(function(){e.exportPDF(t),r.pdfPrevUI.hide(e)})),r.pdfPrevUI._showHide(s,d,c),s.addEventListener("change",(function(){r.animate(e.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,r.anim.inSin,(function(){e.element.querySelector("#bft-ppdf-content").innerHTML="",t.format=s.value,e.exportPDF(t,r.pdfPrevUI._handler),r.pdfPrevUI._showHide(s,d,c)}))})),d.addEventListener("change",(function(){r.animate(e.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,r.anim.inSin,(function(){e.element.querySelector("#bft-ppdf-content").innerHTML="",t.landscape="true"==d.value,e.exportPDF(t,r.pdfPrevUI._handler),r.pdfPrevUI._showHide(s,d,c)}))})),c.addEventListener("change",(function(){r.animate(e.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,r.anim.inSin,(function(){e.element.querySelector("#bft-ppdf-content").innerHTML="",t.scale=c.value,e.exportPDF(t,r.pdfPrevUI._handler),r.pdfPrevUI._showHide(s,d,c)}))})),p.addEventListener("keyup",(function(){clearTimeout(o),o=setTimeout((function(){r.animate(e.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,r.anim.inSin,(function(){e.element.querySelector("#bft-ppdf-content").innerHTML="";var i=p.value.split(",");if(4==i.length){for(var n=0;n<i.length;n++)i[n]=parseInt(i[n]);t.margin=i,e.exportPDF(t,r.pdfPrevUI._handler)}}))}),1e3)})),h.addEventListener("keyup",(function(){clearTimeout(a),a=setTimeout((function(){r.animate(e.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,r.anim.inSin,(function(){e.element.querySelector("#bft-ppdf-content").innerHTML="",t.header=h.value,e.exportPDF(t,r.pdfPrevUI._handler)}))}),1e3)})),f.addEventListener("keyup",(function(){clearTimeout(l),l=setTimeout((function(){r.animate(e.element.querySelector("#bft-ppdf-content"),{opacity:1},{opacity:0},300,r.anim.inSin,(function(){e.element.querySelector("#bft-ppdf-content").innerHTML="",t.footer=f.value,e.exportPDF(t,r.pdfPrevUI._handler)}))}),1e3)}))},r.pdfPrevUI._showHide=function(e,t,i){"A4"==e.value||"A3"==e.value||"A2"==e.value||"A1"==e.value||"Letter"==e.value||"Legal"==e.value?(t.parentNode.style.display="block",i.parentNode.style.display="block"):(t.parentNode.style.display="none",i.parentNode.style.display="none")},r.pdfPrevUI._handler=function(e,t,i){var n=t.options,o=t.pages,a=n.margin[0],l=n.margin[2],s=document.createElement("div");s.classList.add(e.config.mode),s.innerHTML=i.outerHTML,r._browser().msie&&(s.innerHTML=(new XMLSerializer).serializeToString(i));for(var d=s.querySelector("svg"),c=e.element.querySelector("#bft-ppdf-content"),p=0;p<o.length;p++){var h=document.createElement("iframe");Object.assign(h.style,{display:"block",margin:"10px auto",border:"1px solid #eeeeee","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"}),c.appendChild(h),d&&d.style.backgroundColor?h.style.backgroundColor=d.style.backgroundColor:h.style.backgroundColor="#fff";var f=h.contentWindow.document;f.open(),h.style.width=o[p].size.w+"px",h.style.height=o[p].size.h+"px",h.style.margin="10 auto",o[p].backgroundColor&&(h.style.backgroundColor=o[p].backgroundColor);var u=n.header;o[p].header&&(u=o[p].header),u&&(u=u.replace("{current-page}",p+1).replace("{total-pages}",o.length));var g=n.footer;o[p].footer&&(g=o[p].footer),g&&(g=g.replace("{current-page}",p+1).replace("{total-pages}",o.length)),o[p].html?f.write(r._exportHtml(o[p].html,t.styles,n,o[p].innerSize.w,o[p].innerSize.h,u,g,e.config.mode)):(d.setAttribute("viewBox",o[p].vb),f.write(r._exportHtml(s.innerHTML,t.styles,n,o[p].innerSize.w,o[p].innerSize.h,u,g,e.config.mode)));var m=f.getElementById("bft-header"),b=f.getElementById("bft-footer");if(m){var v=a-m.offsetHeight-7;m.style.top=v+"px"}if(b){var y=l-b.offsetHeight-7;b.style.bottom=y+"px"}f.close()}var x=e.element.querySelector("#bft-ppdf-content");r.animate(x,{opacity:0},{opacity:1},300,r.anim.outSin)},r.pdfPrevUI._getViewBox=function(e){var t=null;return e?(t=(t="["+(t=e.getAttribute("viewBox"))+"]").replace(/\ /g,","),t=JSON.parse(t)):null},r._exportHtml=function(e,t,i,n,r,o,a,l){for(var s="",d=0;d<i.margin.length;d++)s+=i.margin[d]+"px ";var c='<!DOCTYPE html><html style="margin:0;padding:0;"><head></head>'+t+'<body class="bft-'+l+'" style="margin:0; padding:0;"><div style="margin: '+s+";overflow:hidden;width:"+n+"px;height:"+r+'px">';return o&&(c+='<div id="bft-header" style="width:'+n+"px;color:#757575;position:absolute;left:"+i.margin[3]+'px;top:0;">'+o+"</div>"),c+=e,a&&(c+='<div id="bft-footer" style="width:'+n+"px;color:#757575;position:absolute;left:"+i.margin[3]+'px;bottom:0;">'+a+"</div>"),(c+="</div>")+"</body></html>"},r.pdfPrevUI.hide=function(e){var t=e.element.querySelector("#bft-ppdf-wrapper");if(t){t.parentNode.removeChild(t),t.style.opacity=0;var i=e.element.querySelector("#bft-ppdf-btns");i.parentNode.removeChild(i)}},void 0===r&&(r={}),r.events.on("renderdefs",(function(e,t){for(var i=0;i<e.config.clinks.length;i++){var n=e.config.clinks[i].template;n||(n="orange");var o=r.clinkTemplates[n];t.defs+=o.defs}})),r.events.on("render",(function(e,t){e._clink(e,t)})),r.prototype._clink=function(e,t){for(var i,n,o,a,l,s="",d=0;d<this.config.clinks.length;d++){var c=this.config.clinks[d],p=e.getNode(c.from),h=e.getNode(c.to);if(p&&-1!=t.res.visibleNodeIds.indexOf(p.id)&&h&&-1!=t.res.visibleNodeIds.indexOf(h.id)){var f=p.x,u=p.y,g=h.x,m=h.y,b={},v={},y=f+p.w/2,x=g+h.w/2,_=u+p.h/2,w=m+h.h/2,k=1;switch(this.config.orientation){case r.orientation.top:case r.orientation.top_left:y<=x?(k=1,b.x=y+p.w/10,v.x=x-h.w/10):(k=-1,b.x=y-p.w/10,v.x=x+h.w/10),u==m?(k=1,b.y=u,v.y=m):u>m?(b.y=u,v.y=m+h.h):(b.y=u+p.h,v.y=m);break;case r.orientation.bottom:case r.orientation.bottom_left:y<=x?(k=-1,b.x=y+p.w/10,v.x=x+h.w/10):(k=1,b.x=y-p.w/10,v.x=x+h.w/10),u==m?(k=-1,b.y=u+p.h,v.y=m+h.h):u>m?(b.y=u,v.y=m+h.h):(b.y=u+p.h,v.y=m);break;case r.orientation.left:case r.orientation.left_top:_<=w?(k=-1,b.y=_+p.h/5,v.y=w+h.h/5):(k=1,b.y=_-p.h/5,v.y=w+h.h/5),f==g?(k=-1,b.x=f,v.x=g):f>g?(b.x=f,v.x=g+h.w):(b.x=f+p.w,v.x=g);break;case r.orientation.right:case r.orientation.right_top:_<=w?(k=1,b.y=_+p.h/5,v.y=w+h.h/5):(k=-1,b.y=_-p.h/5,v.y=w+h.h/5),f==g?(k=1,b.x=f+p.w,v.x=g+h.w):f>g?(b.x=f,v.x=g+h.w):(b.x=f+p.w,v.x=g)}var S=M(b,v,k),C=c.template;C||(C="orange");var I=r.clinkTemplates[C],N=(i=b,o=S,void 0,void 0,a=((n=v).x-i.x)/2+i.x,l=(n.y-i.y)/2+i.y,{x:(a-o.x)/2+o.x,y:(l-o.y)/2+o.y});c.label&&(s+=I.label.replace("{x}",N.x).replace("{y}",N.y).replace("{val}",c.label));var A="M"+b.x+","+b.y+"C"+b.x+","+b.y+" "+S.x+","+S.y+" "+v.x+","+v.y;s+=("<g "+r.attr.c_link_from+'="{from}" '+r.attr.c_link_to+'="{to}">').replace("{from}",p.id).replace("{to}",h.id)+I.link.replaceAll("{d}",A)+'<path stroke="transparent" stroke-width="15" fill="none" d="'+A+'" />',s+=r.grCloseTag}function M(e,t,i){null==i&&(i=1);var n=t.x-e.x,o=t.y-e.y,a=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))/3;return a=a/(Math.sqrt(n*n+o*o)*i)*r.CLINK_CURVE,{x:e.x+n/2-o*a,y:e.y+o/2+n*a}}}t.content+=s},r.prototype.addClink=function(e,t,i,n){return this.removeClink(e,t),this.config.clinks.push({from:e,to:t,label:i,template:n}),this},r.prototype.removeClink=function(e,t){for(var i=this.config.clinks.length-1;i>=0;i--){var n=this.config.clinks[i];n.from==e&&n.to==t&&this.config.clinks.splice(i,1)}return this},r.clinkTemplates={},r.clinkTemplates.orange={defs:'<marker id="arrowOrange" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#F57C00" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotOrange" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#F57C00" /></marker>',link:'<path marker-start="url(#dotOrange)" marker-end="url(#arrowOrange)" stroke="#F57C00" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#F57C00" text-anchor="middle" x="{x}" y="{y}">{val}</text>'},r.clinkTemplates.blue={defs:'<marker id="arrowBlue" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#039BE5" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotBlue" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#039BE5" /></marker>',link:'<path marker-start="url(#dotBlue)" marker-end="url(#arrowBlue)" stroke="#039BE5" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#039BE5"  text-anchor="middle" x="{x}" y="{y}">{val}</text>'},r.clinkTemplates.yellow={defs:'<marker id="arrowYellow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#FFCA28" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotYellow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#FFCA28" /></marker>',link:'<path marker-start="url(#dotYellow)" marker-end="url(#arrowYellow)" stroke="#FFCA28" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#FFCA28"  text-anchor="middle" x="{x}" y="{y}">{val}</text>'},void 0===r&&(r={}),r.events.on("renderdefs",(function(e,t){for(var i=0;i<e.config.slinks.length;i++){var n=e.config.slinks[i].template;n||(n="orange");var o=r.slinkTemplates[n];t.defs+=o.defs}})),r.events.on("render",(function(e,t){e._slinks(e,t)})),r.prototype._slinks=function(e,t){var i="",n=this.getScale(),o=t.res.boundary;function a(t,a,l){var d=[],c=null,p="left",h=t.lcn?t.lcn:"base",f=e._layoutConfigs[h];switch(f.orientation){case r.orientation.top:case r.orientation.top_left:case r.orientation.bottom:case r.orientation.bottom_left:a.x>t.x&&(p="right");break;case r.orientation.left:case r.orientation.left_top:case r.orientation.right:case r.orientation.right_top:p="top",a.y>t.y&&(p="bottom")}var u=r.t(t.templateName,t.min,n),g=f.levelSeparation;(t.parent&&t.parent.layout==r.mixed||t.parent&&t.parent.layout==r.tree)&&(g=f.mixedHierarchyNodesSeparation);var m={p:t.x+t.w/2+u.expandCollapseSize,q:t.y,r:t.x+t.w/2+u.expandCollapseSize,s:o.minY+g},b=t.level;t.subLevels&&(b+=t.subLevels);var v=a.level;if(a.subLevels&&(v+=a.subLevels),b==v)switch(c=a,f.orientation){case r.orientation.top:case r.orientation.top_left:d.push([m.p,m.q]),d.push([m.p,m.q-g/3]),u=r.t(c.templateName,c.min,n),d.push([c.x+c.w/2+u.expandCollapseSize,d[d.length-1][1]]),d.push([d[d.length-1][0],c.y]);break;case r.orientation.bottom:case r.orientation.bottom_left:m.q=t.y+t.h,m.s=o.maxY-g,d.push([m.p,m.q]),d.push([m.r,t.y+t.h+g/3]),u=r.t(c.templateName,c.min,n),d.push([c.x+c.w/2+u.expandCollapseSize,d[d.length-1][1]]),d.push([d[d.length-1][0],c.y+c.h]);break;case r.orientation.left:case r.orientation.left_top:m.p=t.x,m.q=t.y+t.h/2+u.expandCollapseSize,m.r=o.minX-g,m.s=t.y+t.h/2+u.expandCollapseSize,d.push([m.p,m.q]),d.push([t.x-g/3,m.q]),u=r.t(c.templateName,c.min,n),d.push([d[d.length-1][0],c.y+c.h/2+u.expandCollapseSize]),d.push([c.x,d[d.length-1][1]]);break;case r.orientation.right:case r.orientation.right_top:m.p=t.x+t.w,m.q=t.y+t.h/2+u.expandCollapseSize,m.r=o.maxX+g,m.s=t.y+t.h/2+u.expandCollapseSize,d.push([m.p,m.q]),d.push([t.x+t.w+g/3,m.q]),u=r.t(c.templateName,c.min,n),d.push([d[d.length-1][0],c.y+c.h/2+u.expandCollapseSize]),d.push([c.x+c.w,d[d.length-1][1]])}else{switch(f.orientation){case r.orientation.top:case r.orientation.top_left:d.push([m.p,m.q]),d.push([m.r,t.y-g/3]);break;case r.orientation.bottom:case r.orientation.bottom_left:m.q=t.y+t.h,m.s=o.maxY-g,d.push([m.p,m.q]),d.push([m.r,t.y+t.h+g/3]);break;case r.orientation.left:case r.orientation.left_top:m.p=t.x,m.q=t.y+t.h/2+u.expandCollapseSize,m.r=o.minX-g,m.s=t.y+t.h/2+u.expandCollapseSize,d.push([m.p,m.q]),d.push([t.x-g/3,m.q]);break;case r.orientation.right:case r.orientation.right_top:m.p=t.x+t.w,m.q=t.y+t.h/2+u.expandCollapseSize,m.r=o.maxX+g,m.s=t.y+t.h/2+u.expandCollapseSize,d.push([m.p,m.q]),d.push([t.x+t.w+g/3,m.q])}for(var y=t;null==c;){var x=!1,_=y.parent,w=_.leftNeighbor,k=_.rightNeighbor;if(_.id==a.id?c=_:r._intersects(_,m,e.config)&&(m=r._addPoint(_,d,e.config,m,p),x=!0),_.id!=a.id){for(;w;){if(w.id==a.id){c=w;break}r._intersects(w,m,e.config)&&(m=r._addPoint(w,d,e.config,m,p),x=!0),w=w.leftNeighbor}for(;k;){if(k.id==a.id){c=k;break}r._intersects(k,m,e.config)&&(m=r._addPoint(k,d,e.config,m,p),x=!0),k=k.rightNeighbor}}if(!x){var S=d[d.length-1][0],C=0;if(_.parent)switch(g=f.levelSeparation,_.parent.layout!=r.mixed&&_.parent.layout!=r.tree||(g=f.mixedHierarchyNodesSeparation),f.orientation){case r.orientation.top:case r.orientation.top_left:C=_.parent.y+_.parent.h+g*(2/3);break;case r.orientation.bottom:case r.orientation.bottom_left:C=_.parent.y-g*(2/3);break;case r.orientation.left:case r.orientation.left_top:S=_.parent.x+_.parent.w+g*(2/3),C=d[d.length-1][1];break;case r.orientation.right:case r.orientation.right_top:S=_.parent.x-g*(2/3),C=d[d.length-1][1]}d.push([S,C])}y=_}switch(u=r.t(c.templateName,c.min,n),d.splice(d.length-1,1),f.orientation){case r.orientation.top:case r.orientation.top_left:d.push([c.x+c.w/2+u.expandCollapseSize,d[d.length-1][1]]),d.push([d[d.length-1][0],c.y+c.h]);break;case r.orientation.bottom:case r.orientation.bottom_left:d.push([c.x+c.w/2+u.expandCollapseSize,d[d.length-1][1]]),d.push([d[d.length-1][0],c.y]);break;case r.orientation.left:case r.orientation.left_top:d.push([d[d.length-1][0],c.y+c.h/2+u.expandCollapseSize]),d.push([c.x+c.w,d[d.length-1][1]]);break;case r.orientation.right:case r.orientation.right_top:d.push([d[d.length-1][0],c.y+c.h/2+u.expandCollapseSize]),d.push([c.x,d[d.length-1][1]])}}var I=s.template;I||(I="orange");var N,A,M=null;switch((u=r.slinkTemplates[I]).labelPosition){case"start":M={x:d[1][0],y:d[1][1]};break;case"middle":var E=Math.ceil(d.length/2);N=d[E],A=d[E-1],M={x:(N[0]+A[0])/2,y:(N[1]+A[1])/2};break;case"end":M={x:d[d.length-2][0],y:d[d.length-2][1]}}l&&(d=d.reverse()),d[0]="M"+d[0].join(",");for(var L=1;L<d.length;L++)d[L]="L"+d[L].join(",");var T=d.join(" ");if(s.label){var U=u.label.replace("{x}",M.x).replace("{y}",M.y).replace("{val}",s.label),O=r._getLabelSize(U),B=-O.height/2;switch(f.orientation){case r.orientation.bottom:case r.orientation.bottom_left:B=O.height}i+=u.label.replace("{x}",M.x).replace("{y}",M.y+B).replace("{val}",s.label)}i+=("<g "+r.attr.s_link_from+'="{from}" '+r.attr.s_link_to+'="{to}">').replace("{from}",t.id).replace("{to}",a.id)+u.link.replaceAll("{d}",T)+'<path stroke="transparent" stroke-width="15" fill="none" d="'+T+'" />',i+=r.grCloseTag}for(var l=0;l<this.config.slinks.length;l++){var s=this.config.slinks[l],d=e.getNode(s.from),c=e.getNode(s.to);d&&c&&-1!=t.res.visibleNodeIds.indexOf(c.id)&&-1!=t.res.visibleNodeIds.indexOf(d.id)&&(d.level>=c.level?a(d,c,!1):a(c,d,!0))}t.content+=i},r.prototype.addSlink=function(e,t,i,n){return this.removeClink(e,t),this.config.slinks.push({from:e,to:t,label:i,template:n}),this},r.prototype.removeSlink=function(e,t){for(var i=this.config.slinks.length-1;i>=0;i--){var n=this.config.slinks[i];n.from==e&&n.to==t&&this.config.slinks.splice(i,1)}return this},r.slinkTemplates={},r.slinkTemplates.orange={defs:'<marker id="arrowSlinkOrange" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#F57C00" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotSlinkOrange" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#F57C00" /></marker>',link:'<path stroke-dasharray="4, 2" marker-start="url(#dotSlinkOrange)" marker-end="url(#arrowSlinkOrange)" stroke-linejoin="round" stroke="#F57C00" stroke-width="2" fill="none" d="{d}" />',label:'<text dominant-baseline="middle" fill="#F57C00" alignment-baseline="middle" text-anchor="middle" x="{x}" y="{y}">{val}</text>',labelPosition:"middle"},r.slinkTemplates.blue={defs:'<marker id="arrowSlinkBlue" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#039BE5" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotSlinkBlue" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#039BE5" /></marker>',link:'<path stroke-dasharray="4, 2" marker-start="url(#dotSlinkBlue)" marker-end="url(#arrowSlinkBlue)" stroke-linejoin="round" stroke="#039BE5" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#039BE5" text-anchor="middle" x="{x}" y="{y}">{val}</text>',labelPosition:"middle"},r.slinkTemplates.yellow={defs:'<marker id="arrowSlinkYellow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#FFCA28" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotSlinkYellow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#FFCA28" /></marker>',link:'<path stroke-dasharray="4, 2" marker-start="url(#dotSlinkYellow)" marker-end="url(#arrowSlinkYellow)" stroke-linejoin="round" stroke="#FFCA28" stroke-width="2" fill="none" d="{d}" />',label:'<text  fill="#FFCA28" text-anchor="middle" x="{x}" y="{y}">{val}</text>',labelPosition:"middle"},r.events.on("redraw",(function(e,t){if(e.config.miniMap){var i=r.miniMap._getCanvas(e),n=i.getContext("2d");i.width=i.width,i.height=i.height;var o=e.response.boundary.maxX-e.response.boundary.minX,a=e.response.boundary.maxY-e.response.boundary.minY,l=Math.min(i.width/o,i.height/a),s=(i.width-o*l)/2,d=(i.height-a*l)/2;n.clearRect(0,0,i.width,i.height),n.translate(-e.response.boundary.minX*l+s,-e.response.boundary.minY*l+d),n.scale(l,l);var c=0,p=[];!function e(t,i){if(Array.isArray(i))for(var o=0;o<i.length;o++)e(t,i[o]);else{for(n.fillStyle=r.miniMap.colors[3],n.beginPath(),n.lineWidth="0.5",n.fillRect(i.x,i.y,i.w,i.h),n.strokeRect(i.x,i.y,i.w,i.h),o=0;o<i.stChildrenIds.length;o++)c++,p.includes(i.id)||(1==c?n.fillStyle=r.miniMap.colors[0]:2==c?n.fillStyle=r.miniMap.colors[1]:3==c&&(n.fillStyle=r.miniMap.colors[2]),n.beginPath(),n.fillRect(i.x,i.y,i.w,i.h),n.strokeRect(i.x,i.y,i.w,i.h),p.push(i.id)),e(t,t.getNode(i.stChildrenIds[o])),c--;for(o=0;o<i.childrenIds.length;o++)e(t,t.getNode(i.childrenIds[o]))}}(e,e.roots);var h=e.getViewBox()[0],f=e.getViewBox()[1],u=e.getViewBox()[2],g=e.getViewBox()[3];n.lineWidth=.5/l,n.strokeStyle="#f57c00",n.strokeRect(h,f,u,g),n.globalAlpha=.4,n.fillStyle=r.miniMap.selectorBackgroundColor,n.fillRect(h,f,u,g)}})),r.miniMap={},r.miniMap._getCanvas=function(e){if(!(t=e.element.querySelector("["+r.attr.id+'="mini-map"]'))){var t;(t=document.createElement("canvas")).width=250,t.height=140,t.setAttribute(r.attr.id,"mini-map"),t.style.display="inline-block",t.style.backgroundColor=r.miniMap.backgroundColor;var i=document.createElement("div");i.classList.add("mini-map"),i.style.position="absolute",i.style.bottom="10px",i.style.left="10px",i.style.border="1px solid #aeaeae",i.style.padding="5px",i.style.margin=e.config.padding+"px",i.style.backgroundColor=r.miniMap.backgroundColor,i.appendChild(t),e.element.appendChild(i)}return t},r.miniMap.colors=["#E0E0E0","#BDBDBD","#9E9E9E","#757575"],r.miniMap.selectorBackgroundColor="white",r.miniMap.backgroundColor="white",r._search={},r._search.search=function(e,t,i,n,o,a){var l=[],s=t.toLowerCase().split(" ");s=s.filter((function(e,t,i){return i.indexOf(e)===t}));for(var d={},c=0;c<e.length;c++)for(var p=e[c],h=0;h<i.length;h++){var f=i[h];if(!r.isNEU(p[f])){var u=p[f];if(null!=(t=r._search.searchAndComputeScore(s,u,f,a))){var g=p.id;if(d[g]){if(d[g]&&d[g]<t.__score){d[g]=t.__score;for(var m=l.length-1;m>=0;m--)l[m].id==g&&l.splice(m,1);r._search.addNodeToResult(l,n,p,t,f,o)}}else d[g]=t.__score,r._search.addNodeToResult(l,n,p,t,f,o)}}}return l.sort((function(e,t){return e.__score<t.__score?1:e.__score>t.__score?-1:0})),l},r._search.addNodeToResult=function(e,t,i,n,o,a){var l={};l.id=i.id,r.isNEU(i[a])||(l[a]=i[a]);for(var s=0;s<t.length;s++){var d=t[s];r.isNEU(i[d])||r.isNEU(l[d])&&(l[d]=i[d])}null!=n&&(r.isNEU(l.__score)&&(l.__score=n.__score),r.isNEU(l.__searchField)&&(l.__searchField=o),r.isNEU(l.__searchMarks)&&(l.__searchMarks=n.__searchMarks)),e.push(l)},r._search.searchAndComputeScore=function(e,t,i,n){if(r.isNEU(t))return null;if(r.isNEU(e))return null;if(!e.length)return null;"string"!=typeof t&&(t=t.toString());var o=t.toLowerCase(),a=r._search.searchIndexesOf(o,e);if(!a.length)return null;var l=o.length/100,s=0,d=0,c=s>0?100:0;if(a.length){d=a[0].start;for(var p=0;p<a.length;p++)if(s+=a[p].length,a[p].start<d&&(d=a[p].start),p>=1&&a[p-1].start>a[p].start){c=0;break}}var h=0;0!=s&&(h=s/l);var f=s>0?100:0;0!=d&&(f=100-d/l);var u=0;n&&n[i]&&(u=n[i]),h>0&&(h=h/100*20),f>0&&(f=f/100*20),c>0&&(c=c/100*20),u>0&&(u=u/100*40);var g=parseInt(h+f+c+u);g>100&&(g=100),a.sort((function(e,t){return e.start<t.start?-1:e.start>t.start?1:0}));var m=t;for(p=a.length-1;p>=0;p--)m=(m=m.insert(a[p].start+a[p].length,"</mark>")).insert(a[p].start,"<mark>");return{__searchMarks:m,__score:g}},r._search.searchIndexesOf=function(e,t){var i=[];if(!r.isNEU(e))for(var n=0;n<t.length;n++){var o=t[n];if(!r.isNEU(o))for(var a=0;(a=e.indexOf(o,a))>-1;)i.push({length:o.length,start:a}),a+=o.length}return i.sort((function(e,t){return e.length<t.length?1:e.length>t.length||e.start<t.start?-1:e.start>t.start?1:0})),i=i.filter((function(e){for(var t=!1,n=0;n<i.length;n++){var r=i[n].start,o=i[n].start+i[n].length-1,a=e.start,l=e.start+e.length-1;if(r==a&&o==l){t=!1;break}if(r>=a&&o<=l){t=!0;break}if(r<=a&&o>=l){t=!0;break}}return!t}))},r.events.on("redraw",(function(e,t){if(e.config.state){var i=[],n=[];!function e(t){if(Array.isArray(t))for(var r=0;r<t.length;r++)e(t[r]);else{for(("string"!=typeof t.id||"string"==typeof t.id&&-1==t.id.indexOf("split")&&-1==t.id.indexOf("mirror"))&&(i.push(t.id),1==t.min&&n.push(t.id)),r=0;r<t.stChildren.length;r++)e(t.stChildren[r]);for(r=0;r<t.children.length;r++)e(t.children[r])}}(e.roots),r.state._put(e.width(),e.height(),e.response.viewBox,i,n,e.response.adjustify,e.config.state)}})),r.state={},r.state._buildStateNames=function(e){return{paramScale:e+"-scale",paramX:e+"-x",paramY:e+"-y",paramExp:e+"-exp",paramMin:e+"-min",paramAdjustify:e+"-adjustify"}},r.state._put=function(e,t,i,n,o,a,l){if(l){var s=r.state._buildStateNames(l.name),d={scale:Math.min(e/i[2],t/i[3]),x:i[0],y:i[1],exp:n,min:o,adjustify:a};if(l.writeToUrlParams){var c=new URLSearchParams(window.location.search);c.has(s.paramScale)?c.set(s.paramScale,d.scale):c.append(s.paramScale,d.scale),c.has(s.paramX)?c.set(s.paramX,d.x):c.append(s.paramX,d.x),c.has(s.paramY)?c.set(s.paramY,d.y):c.append(s.paramY,d.y),c.has(s.paramExp)?c.set(s.paramExp,d.exp.join("*")):c.append(s.paramExp,d.exp.join("*")),c.has(s.paramMin)?c.set(s.paramMin,d.min.join("*")):c.append(s.paramMin,d.min.join("*")),c.has(s.paramAdjustify)?c.set(s.paramAdjustify,d.adjustify.x+"*"+d.adjustify.y):c.append(s.paramAdjustify,d.adjustify.x+"*"+d.adjustify.y),window.history.replaceState(null,null,"?"+c)}l.writeToIndexedDB&&(d.id=l.name,r.idb.put(d,(function(e){0==e&&console.error("Cannot write row - "+l.name)}))),l.writeToLocalStorage&&r.localStorage.setItem(l.name,JSON.stringify(d))}},r.state._get=function(e,t,i,n){if(e){var o=r.state._buildStateNames(e.name);if(e.readFromUrlParams){var a=new URLSearchParams(window.location.search);if(a.has(o.paramScale)&&a.has(o.paramX)&&a.has(o.paramY)&&a.has(o.paramExp)&&a.has(o.paramMin)&&a.has(o.paramAdjustify)){var l={},s=parseFloat(a.get(o.paramScale)),d=parseFloat(a.get(o.paramX)),c=parseFloat(a.get(o.paramY));(h=[])[0]=d,h[1]=c,h[2]=t/s,h[3]=i/s,l.vb=h,l.scale=s,l.x=d,l.y=c,l.exp=a.get(o.paramExp).split("*"),l.min=a.get(o.paramMin).split("*");var p=a.get(o.paramAdjustify).split("*");return l.adjustify={x:parseFloat(p[0]),y:parseFloat(p[1])},void n(l)}if(!e.readFromIndexedDB&&!e.readFromLocalStorage)return void n(null)}if(e.readFromLocalStorage){var h;if(null!=(l=r.localStorage.getItem(e.name)))return l=JSON.parse(l),(h=[])[0]=l.x,h[1]=l.y,h[2]=t/l.scale,h[3]=i/l.scale,l.vb=h,void n(l);if(!e.readFromIndexedDB)return void n(null)}e.readFromIndexedDB&&r.idb.read(e.name,(function(r,o){if(0==r)console.error("Cannot read from - "+e.name),n(null);else if(null==r)n(null);else{var a=[];a[0]=o.x,a[1]=o.y,a[2]=t/o.scale,a[3]=i/o.scale,o.vb=a,n(o)}}))}else n(null)},r.state.clear=function(e){if(!e)return!1;var t=r.state._buildStateNames(e),i=new URLSearchParams(window.location.search);i.has(t.paramScale)&&i.delete(t.paramScale),i.has(t.paramX)&&i.delete(t.paramX),i.has(t.paramY)&&i.delete(t.paramY),i.has(t.paramExp)&&i.delete(t.paramExp),i.has(t.paramMin)&&i.delete(t.paramMin),i.has(t.paramAdjustify)&&i.delete(t.paramAdjustify),window.history.replaceState(null,null,"?"+i),r.idb.delete(e,(function(t){0==t&&console.error("Cannot delete row - "+e)}))},r._magnify={},r.prototype.magnify=function(e,t,i,n,o){n||(n=this.config.anim);var a=this.getNode(e),l=this.getNodeElement(e);if(a||l){var s=r._magnify[e];s&&(null!=s.timer&&clearInterval(s.timer),null!=s.timerBack&&clearInterval(s.timerBack),l.setAttribute("transform","matrix("+s.transformStart.toString()+")"),r._magnify[e]),i&&(l=l.cloneNode(!0),this.getSvg().appendChild(l));var d=r._getTransform(l),c=JSON.parse(JSON.stringify(d));c[0]=t,c[3]=t;var p=a.w+a.w*(t-1),h=a.h+a.h*(t-1);c[4]+=(a.w-p)/2,c[5]+=(a.h-h)/2;var f=r.animate(l,{transform:d},{transform:c},n.duration,n.func);r._magnify[e]={timer:f,transformStart:d,nodeElement:l,front:i},o&&o(l)}},r.prototype.magnifyBack=function(e,t,i){t||(t=this.config.anim);var n=r._magnify[e];if(n){null!=n.timer&&clearInterval(n.timer),null!=n.timerBack&&clearInterval(n.timerBack);var o=r._getTransform(n.nodeElement);n.timerBack=r.animate(n.nodeElement,{transform:o},{transform:n.transformStart},t.duration,t.func,(function(e){var t=e[0].getAttribute(r.attr.node_id);r._magnify[t]&&r._magnify[t].front&&(e[0].parentNode.removeChild(e[0]),r._magnify[t]=null),i&&i(e[0])}))}},void 0===r&&(r={}),r.events.on("init",(function(e,t){e.config.enableKeyNavigation&&(e._addEvent(window,"keydown",e._windowKeyDownHandler),r.isNEU(e._keyNavigationActiveNodeId)&&e.roots&&e.roots.length&&(e._keyNavigationActiveNodeId=e.roots[0].id,e.center(e._keyNavigationActiveNodeId)))})),r.prototype._windowKeyDownHandler=function(e,t){for(var i=t.target,n=null;i&&i!=this.element;){if(i.hasAttribute&&i.hasAttribute(r.attr.node_id)){n=i.getAttribute(r.attr.node_id);break}i=i.parentNode}if(i){var o=n?this.getNode(n):null,a={node:o,data:n?this.get(n):null,event:t};if(!1!==r.events.publish("key-down",[this,a])&&o)if("KeyF"==t.code)this.searchUI.find("");else if("ArrowRight"==t.code||o.isAssistant&&"ArrowDown"==t.code||o.isPartner&&"ArrowDown"==t.code){if(d=this.getNode(o.pid)){var l=d.childrenIds.indexOf(o.id);if(++l<d.childrenIds.length){var s=d.childrenIds[l];this._keyNavigationActiveNodeId=s,this.center(s)}}}else if("ArrowLeft"==t.code)(d=this.getNode(o.pid))&&(l=d.childrenIds.indexOf(o.id),--l>=0&&(s=d.childrenIds[l],this._keyNavigationActiveNodeId=s,this.center(s)));else if("ArrowUp"==t.code){var d;(d=this.getNode(o.pid))&&(s=d.id,(o.isAssistant||d.hasAssistants||o.isPartner||d.hasPartners)&&(l=d.childrenIds.indexOf(o.id),--l>=0&&(s=d.childrenIds[l])),this._keyNavigationActiveNodeId=s,this.center(s))}else if("ArrowDown"==t.code)o.childrenIds.length&&(this._keyNavigationActiveNodeId=o.childrenIds[0],this.center(o.childrenIds[0]));else if("Space"==t.code){var c=i.getAttribute(r.attr.node_id);return void this.toggleExpandCollapse(c,t)}}},r.events.on("redraw",(function(e,t){e.config.enableKeyNavigation&&r._keyNavigation(e)})),r.events.on("click",(function(e,t){e.config&&e.config.enableKeyNavigation&&(e._keyNavigationActiveNodeId=t.node.id,e.center(t.node.id))})),r._keyNavigation=function(e){var t=e.element.querySelector(":focus");if(t&&t.parentElement&&t.parentElement.hasAttribute(r.attr.node_id)){var i=t.parentElement;(o=(n=t).querySelector("title"))&&o.parentNode.removeChild(o),n.removeAttribute("tabindex")}if(!r.isNEU(e._keyNavigationActiveNodeId)&&(i=e.getNodeElement(e._keyNavigationActiveNodeId))&&i.children.length){var n;(n=i.children[0]).setAttribute("tabindex",2);var o,a={text:"",id:e._keyNavigationActiveNodeId};r.events.publish("screen-reader-text",[e,a]),r.isNEU(a.text)||((o=document.createElementNS("http://www.w3.org/2000/svg","title")).innerHTML=a.text,n.appendChild(o)),e.searchUI.hide(),n.focus()}},r.elements={},r.elements.textbox=function(e,t,i,n){var o=r.elements._vidrf(e,t,n);if(o.doNotRender)return{html:""};var a="";return t.btn&&(a=`<a href="#" bft-input-btn="" class="bft-link bft-link-bft-button">${t.btn}</a>`),{html:`<div class="bft-form-field" style="min-width: ${i};">\n                    <div class="bft-input" data-bft-input="" ${o.disabledAttribute} ${o.vlidators}>\n                        <label for="${o.id}">${o.label}</label>\n                        <input ${o.readOnlyAttribute} data-binding="${o.binding}" maxlength="256" id="${o.id}" name="${o.id}" type="text" value="${o.value}" autocomplete="off">\n                        ${a}\n                    </div>\n                </div>`,id:o.id,value:o.value}},r.elements.checkbox=function(e,t,i,n){var o=r.elements._vidrf(e,t,n);if(o.doNotRender)return{html:""};var a=o.value?"checked":"",l=n?'onclick="return false;"':"";return{html:`<div class="bft-form-field"  style="min-width: ${i};" >\n                        <label class="bft-checkbox" data-bft-input="" ${o.disabledAttribute}>\n                            <input ${a} ${l} data-binding="${o.binding}" type="checkbox"><span class="bft-checkbox-checkmark" type="checkbox"></span>${o.label}\n                        </label>\n                    </div>`,id:o.id,value:a}},r.elements.select=function(e,t,i,n){if(n)return r.elements.textbox(e,t,i,n);var o=r.elements._vidrf(e,t,n);return o.doNotRender?{html:""}:{html:`<div class="bft-form-field" style="min-width: ${i};">\n                    <div class="bft-input" data-bft-input="" ${o.disabledAttribute} ${o.vlidators}>\n                        <label for="${o.id}">${o.label}</label>\n                        <select data-binding="${o.binding}" ${o.readOnlyAttribute} id="${o.id}" name="${o.id}">\n                            ${function(){for(var e="",t=0;t<o.options.length;t++){var i=o.options[t];e+=`<option ${i.value==o.value?"selected":""} value="${i.value}">${i.text}</option>`}return e}()}                           \n                        </select>\n                    </div>\n                </div>`,id:o.id,value:o.value}},r.elements.date=function(e,t,i,n){var o=r.elements._vidrf(e,t,n);return o.doNotRender?{html:""}:{html:`<div class="bft-form-field" style="min-width: ${i};">\n                    <div class="bft-input" data-bft-input="" ${o.disabledAttribute} ${o.vlidators}>\n                        <label for="${o.id}" class="hasval">${o.label}</label>\n                        <input data-binding="${o.binding}" ${o.readOnlyAttribute} maxlength="256" id="${o.id}" name="${o.id}" type="date" value="${o.value}" autocomplete="off">\n                    </div>\n                </div>`,id:o.id,value:o.value}},r.elements._vidrf=function(e,t,i){var n={};if(t.binding||(t.binding=""),t.label||(t.label=""),"select"!=t.type||Array.isArray(t.options)?n.options=t.options:n.options=[],n.value=e&&!r.isNEU(e[t.binding])?e[t.binding]:"",i&&n.options)for(var o=0;o<n.options.length;o++)if(n.options[o].value==n.value){n.value=n.options[o].text;break}if(n.id=r.elements.generateId(),n.disabledAttribute=i?"data-bft-input-disabled":"",n.readOnlyAttribute=i?"readonly":"",n.id=n.id,i&&r.isNEU(n.value)&&(n.doNotRender=!0),i&&"photo"==t.binding&&(n.id=null,n.doNotRender=!0),n.binding=t.binding,n.label=t.label,n.vlidators="",t.vlidators)for(var a in t.vlidators)n.vlidators+=`data-v-${a}="${t.vlidators[a]}" `;return n},r.elements.ids=[],r.elements.generateId=function(){for(;;){var e="_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4);if(!r.elements.ids.has(e))return r.elements.ids.push(e),e}},r.input={},r.input._timeout=null,r.input.initWithTimeout=function(){r.input._timeout&&(clearTimeout(r.input._timeout),r.input._timeout=null),r.input._timeout=setTimeout(r.input.init,200)},r.input.init=function(e){var t;t=e?e.querySelectorAll("[data-bft-input]"):document.querySelectorAll("[data-bft-input]");for(var i=0;i<t.length;i++){var n=t[i],r=null;n.type&&"hidden"==n.type.toLowerCase()&&(r=n),r||(r=n.querySelector("input")),r||(r=n.querySelector("select"));var o=n.querySelector("label");o&&(r.value||"select-one"==r.type&&r.selectedOptions&&r.selectedOptions.length&&""==r.selectedOptions[0].value&&r.selectedOptions[0].innerHTML)&&o.classList.add("hasval"),"checkbox"!=r.type.toLowerCase()&&r.addEventListener("focus",(function(){this.classList.remove("bft-validation-error");var e=this.parentNode.querySelector("label");e.classList.add("focused");var t=e.querySelector(".bft-validation-error-message");t&&t.parentNode.removeChild(t)})),"checkbox"!=r.type.toLowerCase()&&r.addEventListener("blur",(function(){var e=this.parentNode.querySelector("label");e.classList.remove("focused"),this.value||"date"==this.type?e.classList.add("hasval"):e.classList.remove("hasval")}))}},r.input.validate=function(e){var t=null;e.type&&"hidden"==e.type.toLowerCase()&&(t=e),t||(t=e.querySelector("input")),t||(t=e.querySelector("select"));var i=e.querySelector("label");if(t.classList.remove("bft-validation-error"),i){var n=i.querySelector(".bft-validation-error-message");n&&n.parentNode.removeChild(n)}t.value&&(t.value=t.value.trim());var o=e.getAttribute("data-v-required"),a=e.getAttribute("data-v-password"),l=e.getAttribute("data-v-email"),s=e.getAttribute("data-v-emails");return o&&""==t.value?(i.innerHTML+='<span class="bft-validation-error-message">&nbsp;'+o+"</span>",t.classList.add("bft-validation-error"),!1):a&&!r.input.validatePassword(t.value)?(i.innerHTML+='<span class="bft-validation-error-message">&nbsp;'+a+"</span>",t.classList.add("bft-validation-error"),!1):l&&!r.input.isValidEmail(t.value)?(i.innerHTML+='<span class="bft-validation-error-message">&nbsp;'+l+"</span>",t.classList.add("bft-validation-error"),!1):!(s&&!r.input.isValidEmails(t.value)&&(i.innerHTML+='<span class="bft-validation-error-message">&nbsp;'+s+"</span>",t.classList.add("bft-validation-error"),1))},r.input.validateAndGetData=function(e){for(var t=e.querySelectorAll("[data-bft-input]"),i=!0,n=0;n<t.length;n++){var o=t[n];r.input.validate(o)||(i=!1)}if(!i)return!1;var a=e.querySelectorAll("[data-binding]"),l={};for(n=0;n<a.length;n++){var s=a[n],d=s.getAttribute("data-binding");"checkbox"==s.type.toLowerCase()?l[d]=s.checked:l[d]=s.value}return l},r.input.validatePassword=function(e){return e&&(e=e.trim()),!(e.length<5||e.length>18||-1!=e.indexOf(" "))},r.input.isValidEmails=function(e){if(e)for(var t=e.split(","),i=0;i<t.length;i++){var n=t[i].trim();if(!r.input.isValidEmail(n))return!1}return!0},r.input.isValidEmail=function(e){return e&&(e=e.trim()),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},r.prototype.hideTreeMenu=function(e,t){if(this._tree_menu_temp){var i=this._tree_menu_temp;if(this.manager.oldNodes=this.nodes,this.nodes=i.nodes,this.manager.maxX=i.maxX,this.manager.maxY=i.maxY,this.manager.minX=i.minX,this.manager.minY=i.minY,this.manager.roots=i.roots,this.manager.nodes=i.nodes,this.manager.rootList=i.rootList,this.manager.visibleNodeIds=i.visibleNodeIds,this.manager.bordersByRootIdAndLevel=i.bordersByRootIdAndLevel,this.config.roots=i.config.roots,this.config.nodes=i.config.nodes,this._tree_menu_temp=null,e){var n={id:i.id,animFromClickedNode:!1};this._draw(!0,r.action.update,n,(function(){t&&t()}))}}},r.prototype.showTreeMenu=function(e){null==e&&console.error("Call addNode without id");var t=this.getNode(e);t||console.error("Cannot get node id: "+e);var i=this.getNode(t.fid),n=this.getNode(t.mid),o=null,a=null,l=[],s=[];i&&(o=this.get(i.id)),n&&(a=this.get(n.id));for(var d=0;d<t.pids.length;d++){var c=this.get(t.pids[d]);c&&l.push(c)}for(d=0;d<t.ftChildrenIds.length;d++)s.push(this.get(t.ftChildrenIds[d]));var p=this.get(e);this._tree_menu_temp={maxX:this.manager.maxX,maxY:this.manager.maxY,minX:this.manager.minX,minY:this.manager.minY,roots:this.manager.roots,nodes:this.manager.nodes,rootList:this.manager.rootList,visibleNodeIds:this.manager.visibleNodeIds,bordersByRootIdAndLevel:this.manager.bordersByRootIdAndLevel,id:e,config:{roots:this.config.roots,nodes:this.config.nodes}},this.config.nodes=[];var h=[];if(a)h.push(a);else{var f={id:"_ft_mother",templateName:"mother",_ft_method:"addParentNode",_ft_childId:e,_ft_type:"mid",_ft_data:{gender:"female"}};p.mid=f.id,o?(o.pids=[f.id],f.pids=[o.id],f._ft_data.pids=[o.id]):f.pids=["_ft_father"],h.push(f)}if(o)h.push(o);else{var u={id:"_ft_father",templateName:"father",_ft_method:"addParentNode",_ft_childId:e,_ft_type:"fid",_ft_data:{gender:"male"}};p.fid=u.id,a?(a.pids=[u.id],u.pids=[a.id],u._ft_data.pids=[a.id]):u.pids=["_ft_mother"],h.push(u)}for(d=0;d<l.length;d++)h.push(l[d]);p.pids||(p.pids=[]);var g={id:"_ft_partner",pids:[e],templateName:"partner",_ft_method:"addPartnerNode",_ft_data:{pids:[e]}};if("male"==p.gender?(g.templateName="wife",g._ft_data.gender="female"):"female"==p.gender&&(g.templateName="husband",g._ft_data.gender="male"),p.pids.push(g.id),h.push(g),p.pids)for(d=0;d<p.pids.length;d++){if(h.push({id:"_ft_child_group_"+d,mid:e,fid:p.pids[d],tags:["children-group"]}),"_ft_partner"==p.pids[d]){var m={id:"_ft_son_"+d,stpid:"_ft_child_group_"+d,templateName:"son",_ft_method:"addChildAndPartnerNodes",_ft_childData:{mid:t.id,fid:g.id,gender:"male"},_ft_partnerData:{pids:[e]},_ft_id:e},b={id:"_ft_daughter_"+d,stpid:"_ft_child_group_"+d,templateName:"daughter",_ft_method:"addChildAndPartnerNodes",_ft_childData:{mid:t.id,fid:g.id,gender:"female"},_ft_partnerData:{pids:[e]},_ft_id:e};"male"==p.gender&&"female"==g._ft_data.gender?(m._ft_childData.mid=g.id,m._ft_childData.fid=p.id,m._ft_partnerData.gender=g._ft_data.gender,b._ft_childData.mid=g.id,b._ft_childData.fid=p.id,b._ft_partnerData.gender=g._ft_data.gender):"female"==p.gender&&"male"==g._ft_data.gender&&(m._ft_childData.mid=p.id,m._ft_childData.fid=g.id,m._ft_partnerData.gender=g._ft_data.gender,b._ft_childData.mid=p.id,b._ft_childData.fid=g.id,b._ft_partnerData.gender=g._ft_data.gender),h.push(m),h.push(b)}else h.push({id:"_ft_son_"+d,stpid:"_ft_child_group_"+d,templateName:"son",_ft_method:"addChildNode",_ft_data:{mid:e,fid:p.pids[d],gender:"male"}}),h.push({id:"_ft_daughter_"+d,stpid:"_ft_child_group_"+d,templateName:"daughter",_ft_method:"addChildNode",_ft_data:{mid:e,fid:p.pids[d],gender:"female"}});for(var v=0;v<s.length;v++)s[v].mid!=p.pids[d]&&s[v].fid!=p.pids[d]||(s[v].mid=void 0,s[v].fid=void 0,s[v].stpid="_ft_child_group_"+d,h.push(s[v]))}for(v=0;v<s.length;v++)if(s[v].fid==p.id&&r.isNEU(s[v].mid)||s[v].mid==p.id&&r.isNEU(s[v].fid)){var y={id:"_ft_partner_for_single_child",pids:[e],templateName:"partner",_ft_method:"addPartnerAndParentNodes",_ft_childId:s[v].id,_ft_partnerData:{pids:[e]},_ft_id:e};"male"==p.gender?(y.templateName="wife",y._ft_partnerData.gender="female"):"female"==p.gender&&(y.templateName="husband",y._ft_partnerData.gender="male"),p.pids.push(y.id),h.push(y),s[v].fid==p.id?s[v].mid="_ft_partner_for_single_child":s[v].mid==p.id&&(s[v].fid="_ft_partner_for_single_child"),h.push(s[v])}var x={nodes:h,node:p};r.events.publish("node-tree-menu-show",[this,x]),x.nodes.push(x.node),this.config.nodes=x.nodes,p=this.get(e);var _=this;r.isNEU(p.mid)?r.isNEU(p.fid)||(this.config.roots=[p.fid]):this.config.roots=[p.mid];var w={id:e,treeMenuMode:!0};this._draw(!1,r.action.update,w,(function(){r._moveToBoundaryArea(_.getSvg(),_.getViewBox(),_.response.boundary)}))},r.ui.css=function(){return'<style data-bft-styles>.bft-button{background-color:#039be5;cursor:pointer;width:calc(100%);height:50px;color:#fff;padding-top:5px;padding-left:7px;padding-right:7px;text-align:center;text-transform:uppercase;border:1px solid #3fc0ff;display:inline-block;border-radius:5px}.bft-button.orange{background-color:#f57c00;border:1px solid #ffa03e}.bft-button.yellow{background-color:#ffca28;border:1px solid #ffdf7c}.bft-button.lower{text-transform:unset}.bft-button.transparent{background-color:transparent}.bft-button:hover{background-color:#35afea}.bft-button.orange:hover{background-color:#f79632}.bft-button.yellow:hover{background-color:#ffd452}.bft-button:active{transform:matrix(.98,0,0,.98,0,0)}.bft-button-icon{text-align:initial;cursor:pointer;margin-bottom:15px;color:#039be5}.bft-dark .bft-button-icon:hover{background-color:#2d2d2d}.bft-light .bft-button-icon:hover{background-color:#ececec}.bft-button-icon>img{height:24px;width:24px;vertical-align:middle;padding:7px}.bft-button:focus{outline:0}.bft-button-icon>img{filter:invert(46%) sepia(66%) saturate(2530%) hue-rotate(171deg) brightness(95%) contrast(98%)}.bft-light .bft-button.transparent{color:#039be5}.bft-light .bft-button.transparent:hover{color:#fff}.bft-button-loading{background-color:transparent;cursor:pointer;width:calc(100% - 2px);height:50px;color:#fff;text-align:center;text-transform:uppercase;border:1px solid #027cb7;display:inline-block;display:flex;justify-content:center;align-items:center;display:none}.bft-button-loading .bft-loading-dots div{margin:0 10px}.bft-link-bft-button{position:absolute;right:10px;top:-1px}[data-bft-input-disabled] .bft-link-bft-button{display:none}[dir=rtl] .bft-link-bft-button{left:10px;right:unset}.bft-img-button{width:48px;height:48px;cursor:pointer;border-radius:50%;background-color:#039be5;background-repeat:no-repeat;background-size:24px 24px;background-position:center center;margin:3px;display:inline-block}.bft-img-button:hover{background-color:#f57c00}.bft-checkbox{display:block;position:relative;padding-left:35px;margin-bottom:12px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}.bft-checkbox input{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.bft-checkbox-checkmark{position:absolute;top:0;left:0;height:25px;width:25px;border-radius:5px}.bft-dark [data-bft-input-disabled] .bft-checkbox-checkmark,.bft-dark [data-bft-input-disabled].bft-checkbox input:checked~.bft-checkbox-checkmark,.bft-light [data-bft-input-disabled] .bft-checkbox-checkmark,.bft-light [data-bft-input-disabled].bft-checkbox input:checked~.bft-checkbox-checkmark{background-color:#aeaeae!important}[data-bft-input-disabled].bft-checkbox{cursor:default}[dir=rtl] .bft-checkbox-checkmark{right:0}[dir=rtl] .bft-checkbox{padding-left:unset;padding-right:35px}.bft-dark .bft-checkbox-checkmark{background-color:#333;border:1px solid #5b5b5b}.bft-light .bft-checkbox-checkmark{background-color:#fff;border:1px solid #c7c7c7}.bft-dark .bft-checkbox:hover input~.bft-checkbox-checkmark{background-color:#3c3c3c}.bft-light .bft-checkbox:hover input~.bft-checkbox-checkmark{background-color:#f8f9f9}.bft-dark .bft-checkbox input:checked~.bft-checkbox-checkmark{background-color:#039be5}.bft-light .bft-checkbox input:checked~.bft-checkbox-checkmark{background-color:#039be5}.bft-checkbox-checkmark:after{content:"";position:absolute;display:none}.bft-checkbox input:checked~.bft-checkbox-checkmark:after{display:block}.bft-checkbox .bft-checkbox-checkmark:after{left:9px;top:5px;width:5px;height:10px;border:solid #fff;border-width:0 3px 3px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.bft-filter{user-select:none}.bft-light .bft-filter{color:#757575}.bft-dark .bft-filter{color:#ccc}.bft-filter>div>div{display:inline-block;padding:3px 10px;cursor:pointer}.bft-filter-menu fieldset,.bft-filter>div,.filter-field-selected{border-radius:5px}.bft-filter-menu fieldset{overflow-y:auto;max-height:300px}.bft-filter>div.bft-filter-menu{padding:10px}.bft-light .bft-filter>div.bft-filter-menu,.bft-light .filter-field-selected{background-color:#f8f9f9}.bft-dark .bft-filter>div.bft-filter-menu,.bft-dark .filter-field-selected{background-color:#3c3c3c}.bft-light .bft-filter>div{background-color:#eee}.bft-dark .bft-filter>div{background-color:#333}.bft-form-perspective{transform-style:preserve-3d;perspective:500px;position:absolute;top:32px}.bft-form{box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0;padding:14px;transform-origin:top center;user-select:none;display:none;position:relative;max-height:calc(100vh - 100px);overflow-y:auto;border-bottom-left-radius:5px;border-bottom-right-radius:5px}.bft-form-bottom{border-bottom-left-radius:unset;border-bottom-right-radius:unset;border-top-left-radius:5px;border-top-right-radius:5px}.bft-form .separator{margin:0 10px}@media screen and (max-width:1000px){.bft-form-perspective{min-width:100%;max-height:calc(100% - 32px);left:unset!important;right:unset!important;transform:none!important}.bft-form .set{max-height:calc(100vh - 74px)}.bft-form-fieldset{max-width:unset!important}}.bft-light .bft-form .separator{border-bottom:1px solid #c7c7c7}.bft-dark .bft-form .separator{border-bottom:1px solid #5b5b5b}.bft-light .bft-form{background-color:#fff}.bft-dark .bft-form{background-color:#252526}.bft-item{padding:6px 12px 6px 12px;display:flex;flex-direction:row}.bft-light .bft-form .bft-item.selected,.bft-light .bft-form .bft-item:hover{background-color:#0074e8;color:#fff}.bft-dark .bft-form .bft-item.selected,.bft-dark .bft-form .bft-item:hover{background-color:#094771;color:#fff}.bft-item.selected img,.bft-item:hover img{filter:invert(100%)}.bft-item.selected img{visibility:visible!important}.bft-form-fieldset{display:flex;flex-wrap:wrap;margin:0!important}.bft-form-field{flex:1 0 21%;margin:3px;min-width:200px}.bft-form-field-100{flex:1 0 96%;margin:3px;min-width:200px}.bft-input{position:relative}.bft-input>input,.bft-input>select{height:50px;padding:18px 10px 2px 9px;width:100%;box-sizing:border-box;border-style:solid;border-width:1px}.bft-input select{height:50px;padding:20px 5px 4px 5px}[data-bft-input-disabled].bft-input>input,[data-bft-input-disabled].bft-input>select{border-color:transparent!important}.bft-light [data-bft-input-disabled]>input,.bft-light [data-bft-input-disabled]>select{background-color:#fff!important}.bft-dark [data-bft-input-disabled]>input,.bft-dark [data-bft-input-disabled]>select{background-color:#252526!important}[data-bft-input-disabled]>select{appearance:none;padding-left:8px}.bft-input>label{display:inline-block;position:absolute;padding-left:10px;padding-right:10px;color:#acacac;cursor:text;-webkit-transition:all .1s ease-out;-moz-transition:all .1s ease-out;-ms-transition:all .1s ease-out;-o-transition:all .1s ease-out;transition:all .1 ease-out;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:initial;text-align:initial;white-space:nowrap}.bft-input>label{top:12px;overflow:hidden;text-overflow:ellipsis;max-width:calc(100% - 14px)}.bft-input>label.focused,.bft-input>label.hasval{top:-1px}.bft-input>input,.bft-input>select{outline:0;border-radius:5px}.bft-dark .bft-input>label.focused,.bft-light .bft-input>label.focused{color:#039be5}.bft-dark .bft-input>input,.bft-dark .bft-input>select{color:#ccc;background-color:#333;border-color:#5b5b5b}.bft-light .bft-input>input,.bft-light .bft-input>select{color:#757575;background-color:#fff;border-color:#c7c7c7}.bft-light .bft-input>input:focus,.bft-light .bft-input>select:focus{border-color:#039be5;background-color:#f8f9f9}.bft-dark .bft-input>input:focus,.bft-dark .bft-input>select:focus{border-color:#039be5;background-color:#3c3c3c}.bft-dark .bft-input>input.bft-validation-error,.bft-dark .bft-input>select.bft-validation-error,.bft-light .bft-input>input.bft-validation-error,.bft-light .bft-input>select.bft-validation-error{border-color:#ca2a2a}.bft-dark .bft-validation-error-message,.bft-light .bft-validation-error-message{color:#ca2a2a}.bft-link{color:#039be5;cursor:pointer;text-decoration:underline}.bft-link:hover{color:#f57c00}.bft-dark ::-webkit-scrollbar,.bft-light ::-webkit-scrollbar{width:15px}.bft-dark ::-webkit-scrollbar-track{background:#1e1e1e;border-left:1px solid #333}.bft-dark ::-webkit-scrollbar-thumb{background:#424242}.bft-dark ::-webkit-scrollbar-thumb:hover{background:#4f4f4f}.bft-dark ::-webkit-scrollbar-thumb:active{background:#5e5e5e}.bft-light ::-webkit-scrollbar-track{background:#fff;border-left:1px solid #ddd}.bft-light ::-webkit-scrollbar-thumb{background:#c1c1c1}.bft-light ::-webkit-scrollbar-thumb:hover{background:#929292}.bft-light ::-webkit-scrollbar-thumb:active{background:#666}.bft-edit-form{position:fixed;top:0;right:0;height:100%;width:100%;box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0;display:flex;flex-direction:column;height:100%;width:400px}@media screen and (max-width:1000px){.bft-edit-form{width:100%}}.bft-dark .bft-edit-form{background-color:#252526}.bft-light .bft-edit-form{background-color:#fff}.bft-edit-form-header{height:200px;text-align:center;border-radius:10px}.export-service .bft-edit-form-header{border-radius:unset}.bft-edit-form-title{color:#fff;margin:0;padding:14px 17px 7px 17px}.bft-edit-form-avatar{border-radius:50%;width:150px;height:150px;position:absolute;top:75px;border:5px solid #fff;left:50%;transform:translateX(-50%);background-color:#cacaca;box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0}.bft-edit-form-close{position:absolute;right:14px;top:14px;width:34px;height:34px;cursor:pointer}.bft-edit-form-fields{flex-grow:1;overflow-y:auto;overflow-x:hidden}.bft-edit-form-fields-inner{margin:0 7px 20px 7px}.bft-family-menu{opacity:0;display:inline-block;position:absolute;text-align:left;user-select:none;min-width:270px;box-shadow:rgba(0,0,0,.2) 0 4px 8px 0,rgba(0,0,0,.19) 0 6px 20px 0;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif;border-radius:10px}.bft-family-menu>div:hover img{filter:invert(100%)}.bft-family-menu [data-item]{text-align:start;padding:7px 10px}.bft-dark .bft-family-menu [data-item]{background-color:#252526;color:#acacac;border-bottom:1px solid #333}.bft-dark .bft-family-menu [data-item]:hover{background-color:#094771!important;color:#fff!important}.bft-dark .bft-family-menu [data-item]:hover svg{filter:brightness(0) invert(1)}.bft-light .bft-family-menu [data-item]{background-color:#fff;color:#333;border-bottom:1px solid #c7c7c7}.bft-light .bft-family-menu [data-item]:hover{background-color:#0074e8!important;color:#fff!important}.bft-light .bft-family-menu [data-item]:hover svg{filter:brightness(0) invert(1)}.bft-family-menu [data-item] svg{vertical-align:middle}.bft-family-menu [data-item]:first-child{border-top-left-radius:7px;border-top-right-radius:7px}.bft-family-menu [data-item]:last-child{border-bottom-width:0;border-bottom-style:none;border-bottom-left-radius:7px;border-bottom-right-radius:7px}.bft-search{position:absolute}@media screen and (max-width:1000px){.bft-search{width:calc(100% - 30px)}}.bft-search .bft-input{margin-bottom:0}.bft-search-input{color:#7a7a7a;width:100%;border:none;outline:0;padding-top:10px;padding-right:47px}.bft-search label{padding-right:47px}.bft-search-image-td{width:43px}.bft-search-text-td{padding-inline-end:7px;line-height:15px;text-align:start}.bft-search table{box-shadow:rgba(0,0,0,.2) 0 4px 8px 0,rgba(0,0,0,.19) 0 6px 20px 0;margin:0 3.5px 0 3.5px;width:calc(100% - 7px);border-radius:7px}.bft-search table tr:first-child td:first-child{border-top-left-radius:7px}.bft-search table tr:first-child td:last-child{border-top-right-radius:7px}[dir=rtl] .bft-search table tr:first-child td:first-child{border-top-left-radius:unset;border-top-right-radius:7px}[dir=rtl] .bft-search table tr:first-child td:last-child{border-top-right-radius:unset;border-top-left-radius:7px}.bft-search table tr:last-child td:first-child{border-bottom-left-radius:7px}.bft-search table tr:last-child td:last-child{border-bottom-right-radius:7px}[dir=rtl] .bft-search table tr:last-child td:first-child{border-bottom-left-radius:unset;border-bottom-right-radius:7px}[dir=rtl] .bft-search table tr:last-child td:last-child{border-bottom-right-radius:unset;border-bottom-left-radius:7px}.bft-dark .bft-search table{background-color:#252526;color:#acacac}.bft-search [data-search-item-id]{cursor:pointer}.bft-search-photo{margin:7px 7px 0 7px;width:32px;height:32px;background-size:cover;background-position:top center;border-radius:50%;display:inline-block;border:1px solid #8c8c8c}.bft-dark .bft-search [data-search-item-id] td{border-top:1px solid #333}.bft-dark .bft-search [data-search-item-id]:hover,.bft-dark .bft-search [data-selected=yes]{background-color:#094771;color:#fff}.bft-light .bft-search table{background-color:#fff;color:#333}.bft-light .bft-search [data-search-item-id] td{border-top:1px solid #c7c7c7}.bft-light .bft-search [data-search-item-id]:hover,.bft-light .bft-search [data-selected=yes]{background-color:#0074e8;color:#fff}.bft-search [data-search-item-id]:first-child td{border-top:unset}.bft-ripple-container{position:absolute;top:0;right:0;bottom:0;left:0}.bft-drag-over rect{opacity:.5}.bft-ripple-container span{transform:scale(0);border-radius:100%;position:absolute;opacity:.75;background-color:#fff;animation:bft-ripple 1s}@-moz-keyframes bft-ripple{to{opacity:0;transform:scale(2)}}@-webkit-keyframes bft-ripple{to{opacity:0;transform:scale(2)}}@-o-keyframes bft-ripple{to{opacity:0;transform:scale(2)}}@keyframes bft-ripple{to{opacity:0;transform:scale(2)}}.bft-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:.4s;transition:.4s}.bft-slider:before{position:absolute;content:"";height:16px;width:16px;left:4px;bottom:4px;background-color:#fff;-webkit-transition:.4s;transition:.4s}.bft-slider.round{border-radius:24px}.bft-slider.round:before{border-radius:50%}svg text:hover{cursor:default}svg.bft-cursor-grab,svg.bft-cursor-grab text:hover{cursor:grab}svg.bft-cursor-nodrop,svg.bft-cursor-nodrop text:hover{cursor:no-drop}svg.bft-cursor-copy,svg.bft-cursor-copy text:hover{cursor:copy}svg.bft-cursor-move,svg.bft-cursor-move text:hover{cursor:move}#bft-close-btn:focus,#bft-close-btn:hover{color:#000;text-decoration:none;cursor:pointer}#bft-id-select:focus{outline:.5px solid #aeaeae}#bft-sampleDialog #title:hover{cursor:default;background:gray}.bft-light{background-color:#fff;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif}.bft-dark{background-color:#1e1e1e;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif}.bft-light .bft-fill{fill:#fff}.bft-dark .bft-fill{fill:#1e1e1e}.bft-dark input,.bft-dark select,.bft-light input,.bft-light select{font:16px Helvetica,"Segoe UI",Arial,sans-serif}.bft-dark h1,.bft-light h1{font-size:30px;line-height:1}.bft-edit-form{position:absolute;border-radius:10px}.export-service .bft-edit-form{border-radius:unset}.bft-dark .bft-edit-form{color:#acacac}.bft-light .bft-edit-form{color:#333}.bft-dark ::-webkit-calendar-picker-indicator{filter:invert(70%)}.bft-light ::-webkit-calendar-picker-indicator{filter:invert(50%)}.bft-edit-form-instruments{margin:42px 10px 0 10px;text-align:center;min-height:70px}.bft-img-button svg{position:relative;top:12px}.bft-light .bft-toolbar-container svg circle,.bft-light .bft-toolbar-container svg line,.bft-light .bft-toolbar-container svg path{stroke:#8c8c8c!important}.bft-dark .bft-toolbar-container svg circle,.bft-dark .bft-toolbar-container svg line,.bft-dark .bft-toolbar-container svg path{stroke:#8c8c8c!important}.bft-dark .bft-toolbar-container svg rect{fill:#252526!important}.bft-dark .bft-toolbar-container [data-tlbr=minus] svg{border-left:1px solid #5b5b5b!important;border-right:1px solid #5b5b5b!important;border-bottom:1px solid #5b5b5b!important}.bft-dark .bft-toolbar-container [data-tlbr=plus] svg{border-left:1px solid #5b5b5b!important;border-right:1px solid #5b5b5b!important;border-top:1px solid #5b5b5b!important}.bft-dark .bft-toolbar-container [data-tlbr]>svg{border:1px solid #5b5b5b!important;background-color:#252526!important}</style>'},r.events.on("render",(function(e,t){if(e.recentRoots||(e.recentRoots=[]),e.config.roots)for(var i=0;i<e.config.roots.length;i++){var n=e.recentRoots.indexOf(e.config.roots[i]);-1!=n&&e.recentRoots.splice(n,1),e.recentRoots.unshift(e.config.roots[i])}})),r.events.on("render-link",(function(e,t){null!=t.cnode.ppid&&t.cnode.layout!=r.mixed&&(t.html+='<use xlink:href="#dot" x="'+t.p.xa+'" y="'+t.p.ya+'"/>')})),r.events.on("click",(function(e,t){if(e instanceof r){var i=e._get(t.node.id);if(i._ft_method)return"addParentNode"==i._ft_method?e[i._ft_method](i._ft_childId,i._ft_type,i._ft_data,null,!0):"addChildAndPartnerNodes"==i._ft_method?e[i._ft_method](i._ft_id,i._ft_childData,i._ft_partnerData,null,!0):"addPartnerAndParentNodes"==i._ft_method?e[i._ft_method](i._ft_id,i._ft_childId,i._ft_partnerData,null,!0):e[i._ft_method](i._ft_data,null,!0),!1;for(var n=t.event.target;n;){if(n.getAttribute&&(n.hasAttribute("data-ctrl-n-t-menu-id")||n.hasAttribute("data-ctrl-n-t-menu-c"))){var o=n.getAttribute("data-ctrl-n-t-menu-id");return r.isNEU(o)?e.hideTreeMenu(!0):e.showTreeMenu(o),t.event.stopPropagation(),t.event.preventDefault(),!1}n=n.parentNode}}})),void 0===r&&(r={}),r.prototype.onField=function(e){return this.on("field",(function(t,i){return e.call(t,i)}))},r.prototype.onInit=function(e){return this.on("init",(function(t){return e.call(t)}))},r.prototype.onRedraw=function(e){return this.on("redraw",(function(t){return e.call(t)}))},r.prototype.onUpdateNode=function(e){return this.on("update",(function(t,i,n){var r={oldData:i,newData:n};return e.call(t,r)}))},r.prototype.onRemoveNode=function(e){return this.on("remove",(function(t,i,n){var r={id:i,newPidsAndStpidsForIds:n};return e.call(t,r)}))},r.prototype.onAddNode=function(e){return this.on("add",(function(t,i){var n={data:i};return e.call(t,n)}))},r.prototype.onDrop=function(e){return this.on("drop",(function(t,i,n){var r={dragId:i,dropId:n};return e.call(t,r)}))},r.prototype.onDrag=function(e){return this.on("drag",(function(t,i,n){var r={dragId:i,event:n};return e.call(t,r)}))},r.prototype.onExpandCollpaseButtonClick=function(e){return this.on("expcollclick",(function(t,i,n,r){var o={collapsing:i,id:n,ids:r};return e.call(t,o)}))},r.prototype.onExportStart=function(e){return this.on("exportstart",(function(t,i){return e.call(t,i)}))},r.prototype.onExportEnd=function(e){return this.on("exportend",(function(t,i){return e.call(t,i)}))},r.prototype.onNodeClick=function(e){return this.on("click",(function(t,i){return e.call(t,i)}))},r.prototype.onNodeDoubleClick=function(e){return this.on("dbclick",(function(t,i){var n={data:i};return e.call(t,n)}))},r.filterUI=function(){},r.filterUI.prototype.init=function(e){this.instance=e},r.filterUI.prototype.addFilterTag=function(e){if(!this.instance.config.filterBy)return!1;if(r.isNEU(e))return!1;var t=this.instance.element.querySelectorAll("[data-filter-menu]");if(t)for(var i=0;i<t.length;i++){var n=e[t[i].getAttribute("data-filter-menu")];if(!r.isNEU(n)){var o=t[i].querySelector(`[name="${n}"]`);if(o&&!o.checked)return!0}}return!1},r.filterUI.prototype.update=function(){if(this.instance.config.filterBy){var e=Array.isArray(this.instance.config.filterBy),t=this,i=this.instance.element.querySelector("[data-filter]");i&&i.parentNode.removeChild(i),(i=document.createElement("div")).setAttribute("data-filter",""),i.style.position="absolute",i.setAttribute("class","bft-filter"),i.style.top=this.instance.config.padding+"px",i.style.left=this.instance.config.padding+"px";for(var n="",o=0;o<this.instance.editUI.fields.length;o++)(!e&&"tags"!=this.instance.editUI.fields[o]&&"id"!=this.instance.editUI.fields[o]&&"pid"!=this.instance.editUI.fields[o]&&"ppid"!=this.instance.editUI.fields[o]&&"stpid"!=this.instance.editUI.fields[o]||e&&this.instance.config.filterBy.has(this.instance.editUI.fields[o]))&&(n+=`<div data-filter-field="${this.instance.editUI.fields[o]}">${this.instance.editUI.fields[o]}</div>`);i.innerHTML=`<div>${n}</div>`,i.addEventListener("click",(function(e){if(e.target.hasAttribute("data-filter-close")||e.target.hasAttribute("data-filter-field")){for(var i=e.target.getAttribute("data-filter-field"),n=t.instance.element.querySelectorAll("[data-filter-menu]"),o=0;o<n.length;o++)n[o].style.display="none";var a=t.instance.element.querySelectorAll(".filter-field-selected");for(o=0;o<a.length;o++)a[o].classList.remove("filter-field-selected");var l=t.instance.element.querySelector("[data-filter-close]");if(l&&l.parentNode.removeChild(l),e.target.hasAttribute("data-filter-close"))return;if(!e.target.hasAttribute("data-filter-field"))return;var s=t.instance.element.querySelector(`[data-filter-menu="${i}"]`);if(!s){var d=`<div>\n                                        <input data-all type="checkbox" id="all_${i}" name="all_${i}" checked>\n                                        <label for="all_${i}">[All]</label>\n                                    </div>`,c=[];for(o=0;o<t.instance.config.nodes.length;o++){var p=t.instance.config.nodes[o][i];r.isNEU(p)||c.has(p)||(d+=`<div>\n                                    <input type="checkbox" id="${p}" name="${p}" checked>\n                                    <label for="${p}">${p}</label>\n                                </div>`,c.push(p))}(s=document.createElement("div")).innerHTML=`<fieldset>\n                                                    <legend>Filter by ${i}:</legend>\n                                                    ${d}\n                                                </fieldset>`,s.setAttribute("data-filter-menu",i),s.classList.add("bft-filter-menu"),e.target.parentNode.parentNode.appendChild(s);var h=s.querySelectorAll("input");for(o=0;o<h.length;o++)h[o].addEventListener("change",(function(e){if(e.target.hasAttribute("data-all"))for(var i=e.target.parentNode.parentNode.querySelectorAll("input"),n=0;n<i.length;n++)i[n]!=e.target&&(i[n].checked=e.target.checked);t.instance.draw()}))}s.style.display="block",e.target.classList.add("filter-field-selected"),(l=document.createElement("div")).classList.add("close"),l.innerHTML="x",l.setAttribute("data-filter-close",""),e.target.parentNode.appendChild(l)}})),this.instance.element.appendChild(i)}},void 0===r&&(r={}),void 0===r.remote&&(r.remote={}),r.LIMIT_NODES=!0,r.remote._fromResDTO=function(e,t,i,n,o){var a=t[e.id];e.x=a.p[0],e.y=a.p[1],e.w=a.p[2],e.h=a.p[3],null!=a.ln&&(e.leftNeighbor=o[a.ln]),null!=a.rn&&(e.rightNeighbor=o[a.rn]);for(var l=0;l<e.stChildren.length;l++)r.remote._fromResDTO(e.stChildren[l],t,i,n,o);for(l=0;l<e.children.length;l++)r.remote._fromResDTO(e.children[l],t,i,n,o)},r.remote._toReqDTO=function(e,t){var i={p:[e.id,null!=e.parent?e.parent.id:null,null!=e.stParent?e.stParent.id:null,e.w,e.h]};e.children.length>0&&(i.c=r.remote._convertToIdArray(e.children)),e.stChildren.length>0&&(i.v=r.remote._convertToIdArray(e.stChildren)),null!=e.layout&&0!=e.layout&&(i.l=e.layout),e.isAssistant&&(i.a=1),e.isSplit&&(i.s=e.isSplit),e.padding&&(i.q=e.padding),e.lcn&&(i.k=e.lcn),e.stContainerNodes&&(i.b=r.remote._convertToIdArray(e.stContainerNodes)),e._m&&(i.m=e._m.id),e.isPartner&&(i.i=e.isPartner),e.hasPartners&&(i.g=e.hasPartners),e.partnerSeparation&&(i.e=e.partnerSeparation),t.push(i);for(var n=0;n<e.stChildren.length;n++)r.remote._toReqDTO(e.stChildren[n],t);for(n=0;n<e.children.length;n++)r.remote._toReqDTO(e.children[n],t)},r.remote._toReqLayoutConfigsDTO=function(e){var t={};for(var i in e){var n=e[i];t[i]||(t[i]=[]),t[i][0]=n.orientation,t[i][1]=n.levelSeparation,t[i][2]=n.mixedHierarchyNodesSeparation,t[i][3]=n.subtreeSeparation,t[i][4]=n.siblingSeparation,t[i][5]=n.layout,t[i][6]=n.columns,t[i][7]=n.collapse,t[i][8]=n.assistantSeparation,t[i][9]=n.partnerNodeSeparation}return t},r.remote._convertToIdArray=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].id);return t},r.remote._setPositions=function(e,t,i,n){for(var o=[],a=[],l=r.remote._toReqLayoutConfigsDTO(t),s=0;s<e.length;s++)a.push(e[s].id),r.remote._toReqDTO(e[s],o);var d={n:o,c:l,r:a,v:"8.02.54"};if(r.LIMIT_NODES||(d.l=!0),null!=r.remote._fromReqDTO)r.remote._fromReqDTO(d.n,d.r,d.c,(function(t){for(var o=0;o<e.length;o++)r.remote._fromResDTO(e[o],t,0,e,n);i()}));else{d=JSON.stringify(d);var c=r.localStorage.getItem(d);c?r.remote._proceed(e,JSON.parse(c),n,i):r.remote._findRegion((function(t){r._ajax(t,"post",d,"json",(function(t){t.error?i(2):(r.remote._proceed(e,t,n,i),r.localStorage.setItem(d,JSON.stringify(t)))}))}))}},r.remote._proceed=function(e,t,i,n){if("string"==typeof t&&(t=JSON.parse(t)),t.limit&&1==t.limit)n(t.limit);else{for(var o=0;o<e.length;o++)r.remote._fromResDTO(e[o],t,0,e,i);n()}},r.remote._findRegion=function(e){var t=r.localStorage.getItem("funcUrl");if(t)e(t);else{for(var i=["au-e","au-se","brs","ca","ca-e","easia","eus-2","eus","fr","ind","jp-e","jp-w","kr","n-eu","se-asia","s-ind","uk-s","uk-w","us","us-n-c","us-s-c","w-c-us","w-eu","w-ind","w-us-2","wus"],n=[],o=0;o<i.length;o++)n.push(new XMLHttpRequest);for(o=0;o<i.length;o++)!function(){var t="https://"+i[o]+"-balkangraph.azurewebsites.net/api/OrgChartJS",a=n[o];a.onreadystatechange=function(){if(4==this.readyState&&200==this.status){r.localStorage.setItem("funcUrl",t),e(t);for(var i=0;i<n.length;i++)n[i].abort()}},a.open("GET",t,!0),a.send()}()}};const o=r,a={props:["datas"],name:"tree",data:function(){return{trees:[],nodes:[{id:7,mid:1,fid:2,name:"Peter Stevens7",gender:"male",img:"https://cdn.balkan.app/shared/m10/2.jpg"},{id:9,pids:[8],mid:1,fid:2,name:"Emma Stevens9",gender:"female",img:"https://cdn.balkan.app/shared/w10/3.jpg"},{id:8,pids:[9],mid:3,fid:6,name:"Savin Stevens8",gender:"male",img:"https://cdn.balkan.app/shared/m10/1.jpg"},{id:1,pids:[2],name:"Amber McKenzie1",gender:"female",img:"https://cdn.balkan.app/shared/2.jpg"},{id:2,pids:[1],name:"Ava Field2",gender:"male",img:"https://cdn.balkan.app/shared/m30/5.jpg"},{id:3,pids:[6],name:"Amber McKenzie3",gender:"female",img:"https://cdn.balkan.app/shared/2.jpg"},{id:4,pids:[5],name:"Ava Field4",gender:"male",img:"https://cdn.balkan.app/shared/m30/5.jpg"},{id:5,pids:[4],name:"Amber McKenzie5",gender:"female",img:"https://cdn.balkan.app/shared/2.jpg"},{id:6,pids:[3],name:"Ava Field6",gender:"male",img:"https://cdn.balkan.app/shared/m30/5.jpg"},{id:10,name:"Stand Alone",gender:"male",img:"https://cdn.balkan.app/shared/m10/2.jpg"}]}},methods:{callHandler:function(e){console.dir(e)},mytree:function(e,t){this.family=new o(e,{nodes:t,nodeBinding:{field_0:"name",img_0:"img",field_1:"title"},enableSearch:!1,template:"john",showXScroll:o.scroll.visible,showYScroll:o.scroll.visible,mouseScrool:o.action.ctrlZoom,mouseScroolBehaviour:o.action.none,mouseDragBehaviour:o.action.none,nodeMenu:{call:{icon:o.icon.user(18,18,"#039BE5"),text:"View Profile",onClick:this.callHandler}},editForm:{buttons:{user:{icon:o.icon.details(18,18,"#fff"),text:"Profile View"},edit:null,share:null,pdf:null,remove:null}}}),this.family.editUI.on("button-click",(function(e,t){"user"==t.name&&window.open("/family/member/"+t.nodeId)}))},reArrangeData:function(){this.datas.forEach((function(e){}))}},mounted:function(){this.trees=JSON.parse(this.datas),this.mytree(this.$refs.tree,this.trees)}};var l=i(3379),d=i.n(l),c=i(8006),p={insert:"head",singleton:!1};d()(c.Z,p);c.Z.locals;const h=(0,i(1900).Z)(a,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{ref:"tree",attrs:{id:"tree"}})])}),[],!1,null,"c51ca0b4",null).exports},1900:(e,t,i)=>{function n(e,t,i,n,r,o,a,l){var s,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=i,d._compiled=!0),n&&(d.functional=!0),o&&(d._scopeId="data-v-"+o),a?(s=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},d._ssrRegister=s):r&&(s=l?function(){r.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:r),s)if(d.functional){d._injectStyles=s;var c=d.render;d.render=function(e,t){return s.call(t),c(e,t)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,s):[s]}return{exports:e,options:d}}i.d(t,{Z:()=>n})}}]);